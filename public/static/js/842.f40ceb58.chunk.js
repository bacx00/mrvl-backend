/*! For license information please see 842.f40ceb58.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkmrvl_frontend=self.webpackChunkmrvl_frontend||[]).push([[842],{1742:(e,t,a)=>{a.d(t,{A:()=>r});const r=(0,a(6230).A)("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]])},1842:(e,t,a)=>{a.r(t),a.d(t,{default:()=>f});var r=a(2555),n=a(9950),s=a(5150),o=a(8091),l=a(4085),i=(a(7571),a(2393),a(4414));var c=a(7453),d=a(7838),u=a(6230);const m=(0,u.A)("mic-off",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M18.89 13.23A7.12 7.12 0 0 0 19 12v-2",key:"80xlxr"}],["path",{d:"M5 10v2a7 7 0 0 0 12 5",key:"p2k8kg"}],["path",{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33",key:"1gzdoj"}],["path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12",key:"r2i35w"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]),x=(0,u.A)("mic",[["path",{d:"M12 19v3",key:"npa21l"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["rect",{x:"9",y:"2",width:"6",height:"13",rx:"3",key:"s6n7sd"}]]),g=(0,u.A)("camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]),h=(0,u.A)("image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]),p=(0,u.A)("smile",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]]);var y=a(6479),b=a(1742);const f=function(e){let{navigateTo:t}=e;const{user:a,api:u}=(0,s.As)(),{triggerForumThread:f}=(0,o.VJ)(),v=e=>{if("string"===typeof e)return e;if(e&&"object"===typeof e){if("string"===typeof e.name)return e.name;if("string"===typeof e.title)return e.title;if("string"===typeof e.value)return e.value}return String(e||"")},[w,j]=(0,n.useState)({title:"",content:"",category:"",tags:[]}),[k,N]=(0,n.useState)(!1),[S,C]=(0,n.useState)(""),[A,E]=(0,n.useState)([]),[M,I]=(0,n.useState)(!1),[T,R]=(0,n.useState)(!1),[U,P]=(0,n.useState)(!1),[z,D]=(0,n.useState)([]),[_,W]=(0,n.useState)(!1),[L,q]=(0,n.useState)(!1),F=((0,n.useRef)(null),(0,n.useRef)(null)),B=(0,n.useRef)(null),H=(0,n.useRef)(null);(0,n.useEffect)((()=>{V(),K()}),[]),(0,n.useEffect)((()=>{if(w.title||w.content){const e=setTimeout((()=>{O()}),5e3);return()=>clearTimeout(e)}}),[w.title,w.content]);const V=async()=>{try{var e;const t=await u.get("/forums/categories");E((null===(e=t.data)||void 0===e?void 0:e.data)||[])}catch(S){console.error("Failed to load categories:",S)}},K=()=>{try{const e=localStorage.getItem("forum-thread-draft");if(e){const t=JSON.parse(e),a=(0,r.A)((0,r.A)({},t),{},{title:v(t.title),content:v(t.content)});j((e=>(0,r.A)((0,r.A)({},e),a))),W(!0)}}catch(S){console.error("Failed to load draft:",S)}},O=()=>{try{localStorage.setItem("forum-thread-draft",JSON.stringify({title:v(w.title),content:v(w.content),category:w.category})),W(!0)}catch(S){console.error("Failed to save draft:",S)}},Y=()=>{try{localStorage.removeItem("forum-thread-draft"),W(!1)}catch(S){console.error("Failed to clear draft:",S)}},$=e=>{Array.from(e.target.files).forEach((e=>{if(e.type.startsWith("image/")){const t=new FileReader;t.onload=t=>{const a={id:Date.now()+Math.random(),file:e,url:t.target.result,name:e.name};D((e=>[...e,a]));const n="\n![".concat(e.name,"](").concat(t.target.result,")\n");j((e=>(0,r.A)((0,r.A)({},e),{},{content:e.content+n})))},t.readAsDataURL(e)}}))},G=async()=>{if(!v(w.title).trim())return void alert("Please enter a thread title");const e=v(w.content);e.trim()?e.trim().length<10?alert("Thread content must be at least 10 characters"):await J({preventDefault:()=>{}}):alert("Please enter thread content")},J=async e=>{if(e.preventDefault(),!a)return void C("You must be logged in to create a thread");const r=v(w.title),n=v(w.content);if(r.trim())if(n.trim())if(n.trim().length<10)C("Thread content must be at least 10 characters long");else{N(!0),C("");try{console.log("\ud83d\ude80 CreateThreadPage: Submitting thread...");const e={title:r.trim(),content:n.trim()};console.log("\ud83d\udcbe CreateThreadPage: Submit data:",e);const a=await u.post("/user/forums/threads",e);console.log("\u2705 CreateThreadPage: Thread created successfully:",a);const s=(a.data||a).id;alert("\u2705 Thread created successfully!"),f(),window.dispatchEvent(new CustomEvent("forum-thread-created")),window.dispatchEvent(new CustomEvent("forum-category-updated")),Y(),setTimeout((()=>{s?t("thread-detail",{id:s}):t("forums")}),1e3)}catch(S){console.error("\u274c CreateThreadPage: Error creating thread:",S),S.message.includes("401")?C("\ud83d\udea8 AUTHENTICATION ISSUE: Please log in again to create threads."):S.message.includes("403")?C("\ud83d\udea8 PERMISSION ISSUE: You do not have permission to create threads."):S.message.includes("422")?C("\ud83d\udea8 VALIDATION ISSUE: Please check your thread title and content."):S.message.includes("404")?C("\ud83d\udea8 BACKEND ISSUE: Forum threads API endpoint not found. Please implement /api/forums/threads endpoint."):S.message.includes("500")?C("\ud83d\udea8 BACKEND ISSUE: Server error when creating thread. Check backend forum implementation."):C("Failed to create thread: ".concat(S.message))}finally{N(!1)}}else C("Thread content is required");else C("Thread title is required")};return a?(0,i.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,i.jsx)("div",{className:"lg:hidden sticky top-16 bg-white/95 dark:bg-gray-900/95 backdrop-blur-lg z-40 -mx-4 px-4 py-3 border-b border-gray-200 dark:border-gray-700 mb-4",children:(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,i.jsx)("button",{onClick:()=>t("forums"),className:"p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 text-gray-600 dark:text-gray-400 touch-optimized",children:(0,i.jsx)(c.A,{className:"w-5 h-5 transform rotate-90"})}),(0,i.jsxs)("div",{children:[(0,i.jsx)("h1",{className:"text-lg font-bold text-gray-900 dark:text-white",children:"New Thread"}),_&&(0,i.jsx)("p",{className:"text-xs text-blue-500 dark:text-blue-400",children:"Draft saved"})]})]}),(0,i.jsxs)("div",{className:"flex items-center space-x-2",children:[U?(0,i.jsx)("button",{onClick:()=>P(!1),className:"px-3 py-1.5 text-sm bg-gray-100 dark:bg-gray-800 text-gray-600 dark:text-gray-400 rounded-lg",children:"Edit"}):(0,i.jsx)("button",{onClick:()=>P(!0),className:"px-3 py-1.5 text-sm bg-gray-100 dark:bg-gray-800 text-gray-600 dark:text-gray-400 rounded-lg",children:(0,i.jsx)(d.A,{className:"w-4 h-4"})}),(0,i.jsx)("button",{onClick:G,disabled:k||!v(w.title).trim()||!v(w.content).trim(),className:"px-4 py-2 bg-red-600 text-white text-sm rounded-lg hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed touch-optimized",children:k?"...":"Post"})]})]})}),(0,i.jsxs)("div",{className:"hidden lg:flex items-center justify-between mb-6",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("h1",{className:"text-2xl md:text-3xl font-bold text-gray-900 dark:text-white",children:"Create New Thread"}),(0,i.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"Start a new discussion in the Marvel Rivals community"})]}),(0,i.jsx)("button",{onClick:()=>t("forums"),className:"px-4 py-2 text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white transition-colors",children:"\u2190 Back to Forums"})]}),(0,i.jsx)("input",{ref:B,type:"file",accept:"image/*",multiple:!0,onChange:$,className:"hidden"}),(0,i.jsx)("input",{ref:H,type:"file",accept:"image/*",capture:"environment",onChange:$,className:"hidden"}),(0,i.jsxs)("form",{onSubmit:J,className:"space-y-6",children:[S&&(0,i.jsxs)("div",{className:"border px-4 py-3 rounded mb-4 ".concat(S.includes("BACKEND ISSUE")||S.includes("AUTHENTICATION ISSUE")||S.includes("PERMISSION ISSUE")?"bg-red-100 border-red-400 text-red-700":"bg-yellow-100 border-yellow-400 text-yellow-700"),children:[S,S.includes("BACKEND ISSUE")&&(0,i.jsxs)("div",{className:"mt-2 text-sm",children:[(0,i.jsx)("strong",{children:"For Backend Developer:"})," Please implement the forum threads API endpoint with proper validation."]})]}),(0,i.jsx)("div",{className:"card p-6",children:(0,i.jsxs)("div",{className:"space-y-6",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-900 dark:text-gray-100 mb-2",children:"Thread Title *"}),(0,i.jsx)(l.A,{value:v(w.title),onChange:e=>{let t="";"string"===typeof e?t=e:e&&"object"===typeof e&&e.target&&"string"===typeof e.target.value?t=e.target.value:e&&"object"===typeof e?(console.warn("CreateThreadPage: Unexpected title value type:",e),t=""):t=String(e||""),j((e=>(0,r.A)((0,r.A)({},e),{},{title:t})))},placeholder:"e.g., Iron Man is too overpowered in ranked matches (@player:shroud thoughts?)",className:"form-input w-full mobile-input-no-zoom",rows:1,maxLength:200}),(0,i.jsxs)("div",{className:"flex justify-between items-center mt-1",children:[(0,i.jsxs)("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:[v(w.title).length,"/200 characters \u2022 Use @ to mention users, teams, or players in title"]}),_&&(0,i.jsx)("span",{className:"text-xs text-blue-500 dark:text-blue-400",children:"Auto-saved"})]})]}),(0,i.jsxs)("div",{className:"lg:hidden",children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-900 dark:text-gray-100 mb-2",children:"Category"}),(0,i.jsxs)("select",{name:"category",value:w.category,onChange:e=>{const{name:t,value:a}=e.target;j((e=>(0,r.A)((0,r.A)({},e),{},{[t]:a})))},className:"form-input w-full mobile-input-no-zoom",children:[(0,i.jsx)("option",{value:"",children:"Select a category"}),A.map((e=>(0,i.jsxs)("option",{value:e.slug,children:[e.icon," ",e.name]},e.id)))]})]}),(0,i.jsxs)("div",{className:"lg:hidden",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,i.jsx)("span",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:"Media & Voice"}),(0,i.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,i.jsx)("button",{type:"button",onClick:M?()=>{F.current&&F.current.stop(),I(!1)}:()=>{if("webkitSpeechRecognition"in window||"SpeechRecognition"in window){const e=new(window.webkitSpeechRecognition||window.SpeechRecognition);e.continuous=!0,e.interimResults=!0,e.lang="en-US",e.onstart=()=>{I(!0)},e.onresult=e=>{let t="";for(let a=e.resultIndex;a<e.results.length;a++)t+=e.results[a][0].transcript;j((e=>(0,r.A)((0,r.A)({},e),{},{content:e.content+t})))},e.onerror=e=>{console.error("Speech recognition error:",e.error),I(!1)},e.onend=()=>{I(!1)},F.current=e,e.start()}else alert("Speech recognition not supported in this browser")},className:"p-2 rounded-lg touch-optimized transition-colors ".concat(M?"bg-red-500 text-white animate-pulse":"bg-gray-100 dark:bg-gray-800 text-gray-600 dark:text-gray-400 hover:bg-red-50 hover:text-red-500"),children:M?(0,i.jsx)(m,{className:"w-5 h-5"}):(0,i.jsx)(x,{className:"w-5 h-5"})}),(0,i.jsx)("button",{type:"button",onClick:()=>{var e;return null===(e=H.current)||void 0===e?void 0:e.click()},className:"p-2 rounded-lg bg-gray-100 dark:bg-gray-800 text-gray-600 dark:text-gray-400 hover:bg-blue-50 hover:text-blue-500 touch-optimized",children:(0,i.jsx)(g,{className:"w-5 h-5"})}),(0,i.jsx)("button",{type:"button",onClick:()=>{var e;return null===(e=B.current)||void 0===e?void 0:e.click()},className:"p-2 rounded-lg bg-gray-100 dark:bg-gray-800 text-gray-600 dark:text-gray-400 hover:bg-green-50 hover:text-green-500 touch-optimized",children:(0,i.jsx)(h,{className:"w-5 h-5"})}),(0,i.jsx)("button",{type:"button",onClick:()=>R(!T),className:"p-2 rounded-lg bg-gray-100 dark:bg-gray-800 text-gray-600 dark:text-gray-400 hover:bg-yellow-50 hover:text-yellow-500 touch-optimized",children:(0,i.jsx)(p,{className:"w-5 h-5"})})]})]}),T&&(0,i.jsx)("div",{className:"bg-gray-50 dark:bg-gray-800 rounded-lg p-3 mb-3",children:(0,i.jsx)("div",{className:"grid grid-cols-6 gap-2",children:["\ud83d\udc4d","\ud83d\udc4e","\ud83d\ude04","\ud83d\ude22","\ud83d\ude21","\ud83e\udd14","\ud83d\udc40","\ud83d\udd25","\ud83d\udcaf","\u2764\ufe0f","\u26a1","\ud83c\udfaf"].map(((e,t)=>(0,i.jsx)("button",{type:"button",onClick:()=>(e=>{j((t=>(0,r.A)((0,r.A)({},t),{},{content:t.content+e}))),R(!1)})(e),className:"p-2 text-xl hover:bg-gray-100 dark:hover:bg-gray-700 rounded touch-optimized",children:e},t)))})}),M&&(0,i.jsx)("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-3 mb-3",children:(0,i.jsxs)("div",{className:"flex items-center space-x-2 text-red-600 dark:text-red-400",children:[(0,i.jsx)("div",{className:"w-2 h-2 bg-red-500 rounded-full animate-pulse"}),(0,i.jsx)("span",{className:"text-sm font-medium",children:"Recording... Speak now"})]})})]}),z.length>0&&(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-900 dark:text-gray-100 mb-2",children:"Uploaded Images"}),(0,i.jsx)("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-3",children:z.map((e=>(0,i.jsxs)("div",{className:"relative group",children:[(0,i.jsx)("img",{src:e.url,alt:e.name,className:"w-full h-24 object-cover rounded-lg"}),(0,i.jsx)("button",{type:"button",onClick:()=>{return t=e.id,void D((e=>e.filter((e=>e.id!==t))));var t},className:"absolute top-1 right-1 p-1 bg-red-500 text-white rounded-full opacity-0 group-hover:opacity-100 transition-opacity",children:(0,i.jsx)(y.A,{className:"w-3 h-3"})})]},e.id)))})]}),(0,i.jsxs)("div",{children:[(0,i.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,i.jsx)("label",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:"Content *"}),(0,i.jsxs)("div",{className:"lg:hidden flex items-center space-x-2",children:[!U&&(0,i.jsx)("button",{type:"button",onClick:()=>P(!0),className:"text-xs text-blue-500 dark:text-blue-400 hover:underline",children:"Preview"}),U&&(0,i.jsx)("button",{type:"button",onClick:()=>P(!1),className:"text-xs text-blue-500 dark:text-blue-400 hover:underline",children:"Edit"})]})]}),U?(0,i.jsx)("div",{className:"min-h-[200px] p-4 bg-gray-50 dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700",children:(0,i.jsx)("div",{className:"prose prose-sm dark:prose-invert max-w-none",children:v(w.content)?v(w.content).split("\n").map(((e,t)=>(0,i.jsx)("p",{className:"mb-2 last:mb-0",children:e},t))):(0,i.jsx)("p",{className:"text-gray-500 dark:text-gray-400 italic",children:"Preview will appear here..."})})}):(0,i.jsx)(l.A,{value:v(w.content),onChange:e=>{let t="";"string"===typeof e?t=e:e&&"object"===typeof e&&e.target&&"string"===typeof e.target.value?t=e.target.value:e&&"object"===typeof e?(console.warn("CreateThreadPage: Unexpected content value type:",e),t=""):t=String(e||""),j((e=>(0,r.A)((0,r.A)({},e),{},{content:t})))},rows:window.innerWidth<768?8:12,className:"form-input w-full mobile-input-no-zoom",placeholder:"Share your thoughts, strategies, feedback, or questions about Marvel Rivals... You can discuss:\n\u2022 Hero balance and gameplay mechanics (@player:s1mple, @team:navi)\n\u2022 Strategic tips and team compositions\n\u2022 Tournament results and esports news\n\u2022 Bug reports and technical issues\n\u2022 Team recruitment and player connections Type @ to mention teams, players, or users!",maxLength:1e4}),(0,i.jsxs)("div",{className:"flex justify-between items-center mt-2",children:[(0,i.jsxs)("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:[v(w.content).length,"/10000 characters (min 10)"]}),(0,i.jsx)("div",{className:"lg:hidden flex items-center space-x-2",children:(0,i.jsxs)("button",{type:"button",onClick:()=>O(),className:"text-xs text-gray-500 dark:text-gray-400 hover:text-blue-500 flex items-center space-x-1",children:[(0,i.jsx)(b.A,{className:"w-3 h-3"}),(0,i.jsx)("span",{children:"Save Draft"})]})})]})]})]})}),(0,i.jsxs)("div",{className:"card p-4 bg-blue-50 dark:bg-blue-900/10 border border-blue-200 dark:border-blue-800",children:[(0,i.jsx)("h3",{className:"text-sm font-semibold text-blue-900 dark:text-blue-100 mb-2",children:"Community Guidelines"}),(0,i.jsxs)("ul",{className:"text-xs text-blue-800 dark:text-blue-200 space-y-1",children:[(0,i.jsx)("li",{children:"\u2022 Be respectful and constructive in your discussions"}),(0,i.jsx)("li",{children:"\u2022 Keep content relevant to Marvel Rivals"}),(0,i.jsx)("li",{children:"\u2022 Use appropriate language and avoid toxicity"}),(0,i.jsx)("li",{children:"\u2022 Search existing threads before creating duplicates"}),(0,i.jsx)("li",{children:"\u2022 Use descriptive titles and proper categories"})]})]}),(0,i.jsxs)("div",{className:"hidden lg:flex justify-end space-x-4",children:[(0,i.jsx)("button",{type:"button",onClick:()=>t("forums"),className:"px-6 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:"Cancel"}),(0,i.jsx)("button",{type:"submit",disabled:k||!v(w.title).trim()||!v(w.content).trim(),className:"px-6 py-2 bg-red-600 text-white rounded hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:k?(0,i.jsxs)("span",{className:"flex items-center",children:[(0,i.jsx)("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Creating Thread..."]}):"Create Thread"})]}),(0,i.jsx)("div",{className:"lg:hidden sticky bottom-0 bg-white/95 dark:bg-gray-900/95 backdrop-blur-lg -mx-6 px-6 py-4 border-t border-gray-200 dark:border-gray-700",children:(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,i.jsx)("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:v(w.content).length<10?"".concat(10-v(w.content).length," more characters"):"Ready to post"}),_&&(0,i.jsxs)("div",{className:"flex items-center space-x-1 text-xs text-blue-500 dark:text-blue-400",children:[(0,i.jsx)(b.A,{className:"w-3 h-3"}),(0,i.jsx)("span",{children:"Saved"})]})]}),(0,i.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,i.jsx)("button",{type:"button",onClick:()=>Y(),disabled:!_,className:"text-sm text-gray-500 dark:text-gray-400 hover:text-red-500 disabled:opacity-50",children:"Clear Draft"}),(0,i.jsx)("button",{type:"button",onClick:G,disabled:k||!v(w.title).trim()||!v(w.content).trim()||v(w.content).length<10,className:"px-6 py-3 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors touch-optimized font-medium",children:k?(0,i.jsxs)("span",{className:"flex items-center space-x-2",children:[(0,i.jsx)("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),(0,i.jsx)("span",{children:"Posting..."})]}):"Post Thread"})]})]})})]})]}):(0,i.jsx)("div",{className:"max-w-2xl mx-auto",children:(0,i.jsxs)("div",{className:"card p-8 text-center",children:[(0,i.jsx)("div",{className:"text-4xl mb-4",children:"\ud83d\udd10"}),(0,i.jsx)("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-4",children:"Login Required"}),(0,i.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"You need to be logged in to create forum threads and participate in discussions."}),(0,i.jsxs)("div",{className:"space-x-4",children:[(0,i.jsx)("button",{onClick:()=>{window.dispatchEvent(new CustomEvent("mrvl-show-auth-modal"))},className:"px-6 py-2 bg-red-600 text-white rounded hover:bg-red-700 transition-colors",children:"Sign In / Sign Up"}),(0,i.jsx)("button",{onClick:()=>t("forums"),className:"px-6 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:"Back to Forums"})]})]})})}},2393:(e,t,a)=>{a.d(t,{A:()=>s});a(9950);var r=a(5920),n=a(4414);const s=e=>{let{show:t,results:a,selectedIndex:s,loading:o,position:l,onSelect:i,query:c="",dropdownRef:d}=e;if(console.log("[MentionDropdown] Render - show:",t,"results:",null===a||void 0===a?void 0:a.length,"position:",l),!t)return null;const u=e=>{switch(e){case"user":return(0,n.jsx)("div",{className:"w-6 h-6 bg-[#4ade80]/20 text-[#4ade80] rounded-full flex items-center justify-center text-xs font-medium",children:"U"});case"team":return(0,n.jsx)("div",{className:"w-6 h-6 bg-[#fa4454]/20 text-[#fa4454] rounded-full flex items-center justify-center text-xs font-medium",children:"T"});case"player":return(0,n.jsx)("div",{className:"w-6 h-6 bg-[#3b82f6]/20 text-[#3b82f6] rounded-full flex items-center justify-center text-xs font-medium",children:"P"});default:return null}};return(0,n.jsx)("div",{ref:d,className:"absolute bg-[#1a2332] border border-[#2b3d4d] rounded-lg shadow-xl max-h-64 overflow-y-auto min-w-[280px]",style:{top:l.top||0,left:l.left||0,zIndex:99999,position:"fixed",display:t?"block":"none"},children:o?(0,n.jsxs)("div",{className:"p-3 text-center text-[#768894]",children:[(0,n.jsx)("div",{className:"animate-spin w-4 h-4 border-2 border-[#fa4454] border-t-transparent rounded-full mx-auto"}),(0,n.jsx)("span",{className:"text-sm mt-1 block",children:"Searching..."})]}):a.length>0?(0,n.jsxs)(n.Fragment,{children:[0===c.length&&(0,n.jsx)("div",{className:"px-3 py-2 text-xs text-[#768894] border-b border-[#2b3d4d]",children:"Popular mentions"}),a.map(((e,t)=>(0,n.jsxs)("div",{className:"px-3 py-2 cursor-pointer flex items-center space-x-3 hover:bg-[#2b3d4d] ".concat(t===s?"bg-[#fa4454]/10":""),onClick:()=>i(e),children:[e.avatar?(0,n.jsx)("img",{src:(0,r.V)(e.avatar),alt:e.display_name,className:"w-6 h-6 rounded-full object-cover"}):u(e.type),(0,n.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,n.jsx)("div",{className:"text-sm font-medium text-white truncate",children:e.display_name}),(0,n.jsx)("div",{className:"text-xs text-[#768894] truncate",children:e.subtitle})]}),(0,n.jsx)("div",{className:"text-xs text-[#768894] font-mono",children:e.mention_text})]},"".concat(e.type,"-").concat(e.id))))]}):c.length>0?(0,n.jsxs)("div",{className:"p-3 text-center text-[#768894] text-sm",children:['No results found for "',c,'"']}):null})}},4085:(e,t,a)=>{a.d(t,{A:()=>o});var r=a(9950),n=a(5150),s=a(4414);const o=function(e){let{value:t,onChange:a,placeholder:o="Write your message...",className:l="",rows:i=4,maxLength:c=1e4,disabled:d=!1}=e;const{api:u}=(0,n.As)(),[m,x]=(0,r.useState)(!1),[g,h]=(0,r.useState)([]),[p,y]=(0,r.useState)(""),[b,f]=(0,r.useState)("user"),[v,w]=(0,r.useState)(0),[j,k]=(0,r.useState)(0),[N,S]=(0,r.useState)(!1),[C,A]=(0,r.useState)({top:0,left:0}),E=(0,r.useRef)(null),M=(0,r.useRef)(null);(0,r.useEffect)((()=>{const e=setTimeout((()=>{p.length>=1?I(p,b):(h([]),x(!1))}),300);return()=>clearTimeout(e)}),[p,b]);const I=async(e,t)=>{if(!("string"===typeof e?e:"").trim())return;S(!0);const a=new AbortController;try{let r=[];"user"===t?r=[u.get("/public/search/teams?q=".concat(encodeURIComponent(e),"&limit=8"),{signal:a.signal}).catch((()=>({data:[]}))),u.get("/public/search/players?q=".concat(encodeURIComponent(e),"&limit=8"),{signal:a.signal}).catch((()=>({data:[]})))]:"team"===t?r=[u.get("/public/search/teams?q=".concat(encodeURIComponent(e),"&limit=10"),{signal:a.signal})]:"player"===t&&(r=[u.get("/public/search/players?q=".concat(encodeURIComponent(e),"&limit=10"),{signal:a.signal})]);const n=await Promise.all(r);if(!a.signal.aborted){let e=[];n.forEach((t=>{const a=(null===t||void 0===t?void 0:t.data)||t||[];Array.isArray(a)&&(e=e.concat(a))})),e.sort(((e,t)=>{const a={team:0,player:1};return(a[e.type]||2)-(a[t.type]||2)})),e=e.slice(0,15),h(e),x(e.length>0),k(0)}}catch(r){"AbortError"===r.name||a.signal.aborted||(console.error("Error searching mentions:",r),h([]),x(!1))}finally{a.signal.aborted||S(!1)}},T=e=>{if(!e)return;const r=t||"",n=E.current?E.current.selectionStart:v+p.length+1,s=r.substring(0,v),o=r.substring(n);let l="";if("string"===typeof e.mention_text&&e.mention_text)l=e.mention_text;else{const t=R(e);l="@".concat(t)}"function"===typeof a&&a(s+l+" "+o);const i=v+l.length+1;setTimeout((()=>{E.current&&(E.current.focus(),E.current.setSelectionRange(i,i))}),0),x(!1),y("")},R=e=>{const t=e=>"string"===typeof e?e:"object"===typeof e&&null!==e?e.name&&"string"===typeof e.name?e.name:e.username&&"string"===typeof e.username?e.username:e.display_name&&"string"===typeof e.display_name?e.display_name:"":e?String(e):"",a=t(e.display_name);return a||("user"===e.type?t(e.name)||t(e.username)||"":"team"===e.type?t(e.name)||t(e.short_name)||"":"player"===e.type?t(e.real_name)||t(e.username)||t(e.name)||"":t(e.name)||t(e.username)||"Unknown")};(0,r.useEffect)((()=>{m&&A(U())}),[m]),(0,r.useEffect)((()=>{const e=e=>{M.current&&!M.current.contains(e.target)&&E.current&&!E.current.contains(e.target)&&x(!1)},t=()=>{m&&A(U())};return document.addEventListener("mousedown",e),window.addEventListener("scroll",t),window.addEventListener("resize",t),()=>{document.removeEventListener("mousedown",e),window.removeEventListener("scroll",t),window.removeEventListener("resize",t)}}),[m]);const U=()=>{if(!E.current)return{top:0,left:0,minWidth:300,maxWidth:400};try{const e=E.current.getBoundingClientRect(),t=window.innerHeight,a=window.innerWidth,r=a>=768&&a<1024;if(a<768){const e=260,a=t-e,r=Math.min(200,.4*a);return{position:"fixed",bottom:"".concat(e+10,"px"),left:"0.5rem",right:"0.5rem",maxHeight:"".concat(r,"px"),width:"auto",minWidth:"auto",maxWidth:"none",zIndex:9999,borderRadius:"12px",backdropFilter:"blur(10px)",background:"rgba(255, 255, 255, 0.95)",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)"}}if(r)return{position:"fixed",top:Math.min(e.bottom+8,t-280),left:Math.max(16,Math.min(e.left,a-320)),width:"300px",maxHeight:"240px",zIndex:9999,borderRadius:"8px",background:"white",boxShadow:"0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05)"};let n=e.bottom+4,s=e.left;n+240>t&&(n=e.top-244);const o=Math.max(e.width,300);return s+o>a&&(s=a-o-10),{top:Math.max(0,n),left:Math.max(0,s),minWidth:Math.max(e.width,300),maxWidth:400,zIndex:9999}}catch(e){return console.error("Error calculating dropdown position:",e),{top:0,left:0,minWidth:300,maxWidth:400,zIndex:9999}}};return(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("textarea",{ref:E,value:t||"",onChange:e=>{let t="",r=0;if("string"===typeof e)t=e,r=e.length;else{if(!e||!e.target)return void console.warn("ForumMentionAutocomplete: Unexpected input type:",typeof e);t=e.target.value,r=e.target.selectionStart}"function"===typeof a&&a(t);const n=t.substring(0,r).match(/@(team:|player:)?(\w*)$/);if(n){const[e,t,a]=n,s="team:"===t?"team":"player:"===t?"player":"user";w(r-e.length),y(a),f(s),a.length>=1&&x(!0)}else x(!1),y("")},onKeyDown:e=>{m&&g.length>0&&("ArrowDown"===e.key?(e.preventDefault(),k((e=>(e+1)%g.length))):"ArrowUp"===e.key?(e.preventDefault(),k((e=>(e-1+g.length)%g.length))):"Enter"===e.key||"Tab"===e.key?(e.preventDefault(),T(g[j])):"Escape"===e.key&&x(!1))},placeholder:o,className:l,rows:i,maxLength:c,disabled:d,autoComplete:"off",spellCheck:"false",style:{fontSize:"16px"}}),m&&(0,s.jsxs)("div",{ref:M,className:"fixed z-[9999] bg-white dark:bg-gray-800 border-2 border-gray-300 dark:border-gray-600 rounded-lg shadow-2xl max-h-60 overflow-y-auto backdrop-blur-sm",style:C,children:[N?(0,s.jsx)("div",{className:"px-3 py-2 text-sm text-gray-500 dark:text-gray-400",children:"Searching..."}):g&&g.length>0?(0,s.jsxs)("div",{className:"py-1",children:[(0,s.jsx)("div",{className:"px-3 py-1 text-xs text-gray-500 dark:text-gray-400 bg-gray-50 dark:bg-gray-700",children:"Search Results"}),g.map(((e,t)=>(0,s.jsxs)("button",{onClick:()=>T(e),className:"w-full px-3 py-3 text-left text-sm hover:bg-gray-100 dark:hover:bg-gray-700 active:bg-gray-200 dark:active:bg-gray-600 flex items-center space-x-3 transition-colors duration-150 touch-manipulation ".concat(t===j?"bg-blue-100 dark:bg-blue-900/20":""),style:{minHeight:"56px",WebkitTapHighlightColor:"rgba(59, 130, 246, 0.1)"},children:[(0,s.jsx)("div",{className:"flex-shrink-0",children:e.avatar||e.logo?(0,s.jsx)("img",{src:e.avatar||e.logo,alt:R(e),className:"w-8 h-8 rounded-full object-cover"}):(0,s.jsx)("div",{className:"w-8 h-8 rounded-full bg-gray-300 dark:bg-gray-600 flex items-center justify-center text-xs font-bold",children:R(e).charAt(0).toUpperCase()})}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsx)("div",{className:"font-medium text-gray-900 dark:text-white truncate",children:R(e)}),e.subtitle&&(0,s.jsx)("div",{className:"text-xs text-gray-500 dark:text-gray-400 truncate",children:e.subtitle})]}),(0,s.jsx)("div",{className:"flex-shrink-0 text-xs text-gray-400 dark:text-gray-500",children:R(e)})]},"".concat(e.type,"-").concat(e.id))))]}):(0,s.jsxs)("div",{className:"px-3 py-2 text-sm text-gray-500 dark:text-gray-400",children:['No results found for "',p,'"']}),(0,s.jsx)("div",{className:"px-3 py-2 text-xs text-gray-400 dark:text-gray-500 border-t border-gray-200 dark:border-gray-600",children:(0,s.jsx)("div",{children:"Type @ to mention teams and players"})})]})]})}},5920:(e,t,a)=>{a.d(t,{V:()=>r});const r=e=>e?e.startsWith("http://")||e.startsWith("https://")?e:e.startsWith("/storage/")||e.startsWith("/images/")?"".concat("https://staging.mrvl.net").concat(e):(e.includes("/")&&e.startsWith("/"),"".concat("https://staging.mrvl.net","/storage/").concat(e)):null},7571:(e,t,a)=>{a.d(t,{G:()=>s});var r=a(9950),n=a(5150);const s=e=>{const[t,a]=(0,r.useState)(!1),[s,o]=(0,r.useState)([]),[l,i]=(0,r.useState)(0),[c,d]=(0,r.useState)(""),[u,m]=(0,r.useState)(-1),[x,g]=(0,r.useState)(!1),[h,p]=(0,r.useState)({top:0,left:0}),y=(0,r.useRef)(null),b=(0,r.useRef)(null),{api:f}=(0,n.As)(),v=(0,r.useCallback)(function(e,t){let a;return function(){for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];const o=()=>{clearTimeout(a),e(...n)};clearTimeout(a),a=setTimeout(o,t)}}((async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"all";if(e.length<1)return o([]),void g(!1);try{let r;g(!0),console.log("[Mention] Searching for:",e,"type:",t),console.log("[Mention] API object:",f);try{r=await f.get("/public/mentions/search?q=".concat(encodeURIComponent(e),"&type=").concat(t,"&limit=8"))}catch(a){console.log("[Mention] API call failed, trying direct fetch:",a);const n=await fetch("https://staging.mrvl.net/api/public/mentions/search?q=".concat(encodeURIComponent(e),"&type=").concat(t,"&limit=8"));r={data:await n.json()}}console.log("[Mention] Search response:",r.data),(r.data.success||r.data.data)&&(o(r.data.data||[]),i(0))}catch(r){console.error("Error searching mentions:",r),o([])}finally{g(!1)}}),300),[f]),w=(0,r.useCallback)((async()=>{try{let t;g(!0),console.log("[Mention] Getting popular mentions"),console.log("[Mention] API object:",f);try{t=await f.get("/public/mentions/popular?limit=6")}catch(e){console.log("[Mention] API call failed, trying direct fetch:",e);const a=await fetch("https://staging.mrvl.net/api/public/mentions/popular?limit=6");t={data:await a.json()}}console.log("[Mention] Popular response:",t.data),(t.data||t.data.data)&&(o(t.data.data||t.data||[]),i(0))}catch(t){console.error("Error fetching popular mentions:",t),o([])}finally{g(!1)}}),[f]),j=()=>{if(!y.current)return{top:0,left:0};const e=y.current.getBoundingClientRect(),t={top:e.bottom+window.scrollY+5,left:e.left+window.scrollX};return console.log("[Mention] Dropdown position calculated:",t,"rect:",e),t};return(0,r.useEffect)((()=>{const e=e=>{b.current&&!b.current.contains(e.target)&&y.current&&!y.current.contains(e.target)&&a(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)}),[]),{textareaRef:y,dropdownRef:b,showDropdown:t,mentionResults:s,selectedIndex:l,loading:x,dropdownPosition:h,handleInputChange:(e,t)=>{const r=e.target.value,n=e.target.selectionStart;t&&t(e);const s=r.substring(0,n),l=s.match(/@([a-zA-Z0-9_]*)$/);if(l){const e=l[1],t=n-l[0].length;console.log("[Mention] @ detected at position:",t,"query:",e),console.log("[Mention] Setting dropdown visible"),m(t),d(e),a(!0);const r=j();return console.log("[Mention] Setting dropdown position:",r),p(r),void(0===e.length?(console.log("[Mention] Calling getPopularMentions"),w()):(console.log("[Mention] Calling searchMentions with query:",e),v(e)))}const i=s.match(/@team:([a-zA-Z0-9_]*)$/);if(i){const e=i[1],t=n-i[0].length;return m(t),d(e),a(!0),p(j()),void v(e,"team")}const c=s.match(/@player:([a-zA-Z0-9_]*)$/);if(c){const e=c[1],t=n-c[0].length;return m(t),d(e),a(!0),p(j()),void v(e,"player")}a(!1),o([]),m(-1)},handleKeyDown:(e,r)=>{if(r&&r(e),t&&0!==s.length){switch(e.key){case"ArrowDown":e.preventDefault(),i((e=>(e+1)%s.length));break;case"ArrowUp":e.preventDefault(),i((e=>0===e?s.length-1:e-1));break;case"Enter":case"Tab":if(t&&s[l])return e.preventDefault(),{selectMention:s[l]};break;case"Escape":a(!1),o([])}return null}},selectMention:(t,r,n)=>{if(-1===u||!y.current)return;const s=n.substring(0,u),l=n.substring(y.current.selectionStart),i=s+t.mention_text+" "+l,c=s.length+t.mention_text.length+1;r(i),setTimeout((()=>{y.current&&(y.current.setSelectionRange(c,c),y.current.focus())}),0),a(!1),o([]),m(-1),e&&e(t)},setShowDropdown:a,setSelectedIndex:i}}},7838:(e,t,a)=>{a.d(t,{A:()=>r});const r=(0,a(6230).A)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])}}]);