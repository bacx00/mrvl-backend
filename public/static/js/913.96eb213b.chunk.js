"use strict";(self.webpackChunkmrvl_frontend=self.webpackChunkmrvl_frontend||[]).push([[913],{6913:(e,s,r)=>{r.r(s),r.d(s,{default:()=>d});var a=r(2555),t=r(9950),o=r(5150),n=r(4414);const d=function(e){let{navigateTo:s,params:r}=e;const{api:d}=(0,o.As)(),[l,i]=(0,t.useState)({email:(null===r||void 0===r?void 0:r.email)||"",password:"",password_confirmation:"",token:(null===r||void 0===r?void 0:r.token)||""}),[c,m]=(0,t.useState)(!1),[x,u]=(0,t.useState)(""),[h,w]=(0,t.useState)(""),[p,g]=(0,t.useState)(!1),[b,k]=(0,t.useState)(!1),[y,v]=(0,t.useState)({score:0,message:""});(0,t.useEffect)((()=>{if(null!==r&&void 0!==r&&r.token&&null!==r&&void 0!==r&&r.email&&i((e=>(0,a.A)((0,a.A)({},e),{},{token:r.token,email:r.email}))),null===r||void 0===r||!r.token||null===r||void 0===r||!r.email){const e=new URLSearchParams(window.location.search),r=e.get("token"),t=e.get("email");r&&t?i((e=>(0,a.A)((0,a.A)({},e),{},{token:r,email:t}))):r||t||(u("Invalid or missing reset link. Please request a new password reset."),setTimeout((()=>{window.history.replaceState({},document.title,window.location.origin),window.location.hash="",s("home")}),3e3))}}),[r,s]);const f=e=>{i((0,a.A)((0,a.A)({},l),{},{[e.target.name]:e.target.value})),"password"===e.target.name&&v((e=>{let s=0,r="";return e?(e.length>=8&&s++,e.length>=12&&s++,/[a-z]/.test(e)&&s++,/[A-Z]/.test(e)&&s++,/[0-9]/.test(e)&&s++,/[@$!%*#?&^_\-+=]/.test(e)&&s++,r=s<=2?"Weak":s<=4?"Fair":s<=5?"Good":"Strong",{score:s,message:r}):{score:0,message:""}})(e.target.value)),u(""),w("")};return(0,n.jsx)("div",{className:"animate-fade-in max-w-md mx-auto mt-8",children:(0,n.jsxs)("div",{className:"card p-8",children:[(0,n.jsxs)("div",{className:"text-center mb-8",children:[(0,n.jsx)("div",{className:"logo-professional text-3xl font-bold mb-4",children:"MRVL"}),(0,n.jsx)("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"Reset Your Password"}),(0,n.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"Enter your new password below"})]}),h&&(0,n.jsx)("div",{className:"mb-6 p-4 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-xl",children:(0,n.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,n.jsx)("span",{className:"text-green-600 dark:text-green-400",children:"\u2705"}),(0,n.jsx)("span",{className:"text-sm text-green-700 dark:text-green-300",children:h})]})}),x&&(0,n.jsx)("div",{className:"mb-6 p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-xl",children:(0,n.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,n.jsx)("span",{className:"text-red-600 dark:text-red-400",children:"\u26a0\ufe0f"}),(0,n.jsx)("span",{className:"text-sm text-red-700 dark:text-red-300",children:x})]})}),(0,n.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),m(!0),u(""),w(""),l.email.trim()?l.token.trim()?l.password?l.password.length<8?(u("Password must be at least 8 characters"),0):/[A-Z]/.test(l.password)?/[a-z]/.test(l.password)?/[0-9]/.test(l.password)?/[@$!%*#?&^_\-+=]/.test(l.password)?l.password_confirmation?l.password===l.password_confirmation||(u("Passwords do not match"),0):(u("Please confirm your password"),0):(u("Password must contain at least one special character (@$!%*#?&^-_+=)"),0):(u("Password must contain at least one number"),0):(u("Password must contain at least one lowercase letter"),0):(u("Password must contain at least one uppercase letter"),0):(u("Password is required"),0):(u("Invalid reset token"),0):(u("Email is required"),0))try{const e=await d.post("/auth/reset-password",{email:l.email,password:l.password,password_confirmation:l.password_confirmation,token:l.token});if(e.success){w("Password reset successfully! You can now sign in with your new password.");const e=window.location.origin+window.location.pathname;window.history.replaceState({},document.title,e),setTimeout((()=>{window.location.hash="",s("home")}),3e3)}else u(e.message||"Failed to reset password")}catch(t){var r,a;console.error("Password reset error:",t);const e=(null===(r=t.response)||void 0===r||null===(a=r.data)||void 0===a?void 0:a.message)||"Failed to reset password. Please try again.";u(e)}finally{m(!1)}else m(!1)},className:"space-y-6",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-semibold text-gray-900 dark:text-white mb-2",children:"Email Address"}),(0,n.jsx)("input",{type:"email",name:"email",value:l.email,readOnly:!0,className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-xl bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300"})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-semibold text-gray-900 dark:text-white mb-2",children:"New Password *"}),(0,n.jsxs)("div",{className:"relative",children:[(0,n.jsx)("input",{type:p?"text":"password",name:"password",value:l.password,onChange:f,required:!0,disabled:c,autoComplete:"new-password",className:"w-full px-4 py-3 pr-12 border border-gray-300 dark:border-gray-600 rounded-xl bg-white dark:bg-gray-800 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-transparent transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed",placeholder:"Min 8 chars, uppercase, lowercase, number, special char"}),(0,n.jsx)("button",{type:"button",onClick:()=>g(!p),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 transition-colors",tabIndex:-1,children:p?(0,n.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"})}):(0,n.jsxs)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})]}),l.password&&(0,n.jsxs)("div",{className:"mt-2",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,n.jsx)("span",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Password Strength:"}),(0,n.jsx)("span",{className:"text-xs font-semibold ".concat(y.score<=2?"text-red-500":y.score<=4?"text-yellow-500":y.score<=5?"text-blue-500":"text-green-500"),children:y.message})]}),(0,n.jsx)("div",{className:"h-1.5 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden",children:(0,n.jsx)("div",{className:"h-full transition-all duration-300 ".concat(y.score<=2?"bg-red-500":y.score<=4?"bg-yellow-500":y.score<=5?"bg-blue-500":"bg-green-500"),style:{width:"".concat(y.score/6*100,"%")}})})]})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-semibold text-gray-900 dark:text-white mb-2",children:"Confirm New Password *"}),(0,n.jsxs)("div",{className:"relative",children:[(0,n.jsx)("input",{type:b?"text":"password",name:"password_confirmation",value:l.password_confirmation,onChange:f,required:!0,disabled:c,autoComplete:"new-password",className:"w-full px-4 py-3 pr-12 border border-gray-300 dark:border-gray-600 rounded-xl bg-white dark:bg-gray-800 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-transparent transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed",placeholder:"Confirm your new password"}),(0,n.jsx)("button",{type:"button",onClick:()=>k(!b),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 transition-colors",tabIndex:-1,children:b?(0,n.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"})}):(0,n.jsxs)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})]})]}),(0,n.jsx)("button",{type:"submit",disabled:c,className:"w-full px-6 py-3 bg-gradient-to-r from-red-500 to-red-600 hover:from-red-600 hover:to-red-700 disabled:from-gray-400 disabled:to-gray-500 text-white font-semibold rounded-xl shadow-lg shadow-red-500/30 transition-all duration-300 hover:scale-105 disabled:hover:scale-100 disabled:cursor-not-allowed flex items-center justify-center space-x-2",children:c?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}),(0,n.jsx)("span",{children:"Resetting Password..."})]}):(0,n.jsx)("span",{children:"Reset Password"})})]}),(0,n.jsx)("div",{className:"mt-6 text-center",children:(0,n.jsx)("button",{onClick:()=>s("home"),className:"text-sm text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300 transition-colors duration-300",children:"Back to Home"})})]})})}}}]);