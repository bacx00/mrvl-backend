"use strict";(self.webpackChunkmrvl_frontend=self.webpackChunkmrvl_frontend||[]).push([[959],{2393:(e,a,t)=>{t.d(a,{A:()=>n});t(9950);var s=t(5920),l=t(4414);const n=e=>{let{show:a,results:t,selectedIndex:n,loading:r,position:o,onSelect:i,query:c="",dropdownRef:d}=e;if(console.log("[MentionDropdown] Render - show:",a,"results:",null===t||void 0===t?void 0:t.length,"position:",o),!a)return null;const m=e=>{switch(e){case"user":return(0,l.jsx)("div",{className:"w-6 h-6 bg-[#4ade80]/20 text-[#4ade80] rounded-full flex items-center justify-center text-xs font-medium",children:"U"});case"team":return(0,l.jsx)("div",{className:"w-6 h-6 bg-[#fa4454]/20 text-[#fa4454] rounded-full flex items-center justify-center text-xs font-medium",children:"T"});case"player":return(0,l.jsx)("div",{className:"w-6 h-6 bg-[#3b82f6]/20 text-[#3b82f6] rounded-full flex items-center justify-center text-xs font-medium",children:"P"});default:return null}};return(0,l.jsx)("div",{ref:d,className:"absolute bg-[#1a2332] border border-[#2b3d4d] rounded-lg shadow-xl max-h-64 overflow-y-auto min-w-[280px]",style:{top:o.top||0,left:o.left||0,zIndex:99999,position:"fixed",display:a?"block":"none"},children:r?(0,l.jsxs)("div",{className:"p-3 text-center text-[#768894]",children:[(0,l.jsx)("div",{className:"animate-spin w-4 h-4 border-2 border-[#fa4454] border-t-transparent rounded-full mx-auto"}),(0,l.jsx)("span",{className:"text-sm mt-1 block",children:"Searching..."})]}):t.length>0?(0,l.jsxs)(l.Fragment,{children:[0===c.length&&(0,l.jsx)("div",{className:"px-3 py-2 text-xs text-[#768894] border-b border-[#2b3d4d]",children:"Popular mentions"}),t.map(((e,a)=>(0,l.jsxs)("div",{className:"px-3 py-2 cursor-pointer flex items-center space-x-3 hover:bg-[#2b3d4d] ".concat(a===n?"bg-[#fa4454]/10":""),onClick:()=>i(e),children:[e.avatar?(0,l.jsx)("img",{src:(0,s.V)(e.avatar),alt:e.display_name,className:"w-6 h-6 rounded-full object-cover"}):m(e.type),(0,l.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,l.jsx)("div",{className:"text-sm font-medium text-white truncate",children:e.display_name}),(0,l.jsx)("div",{className:"text-xs text-[#768894] truncate",children:e.subtitle})]}),(0,l.jsx)("div",{className:"text-xs text-[#768894] font-mono",children:e.mention_text})]},"".concat(e.type,"-").concat(e.id))))]}):c.length>0?(0,l.jsxs)("div",{className:"p-3 text-center text-[#768894] text-sm",children:['No results found for "',c,'"']}):null})}},2959:(e,a,t)=>{t.r(a),t.d(a,{default:()=>c});var s=t(2555),l=t(9950),n=t(5150),r=(t(7571),t(6243)),o=t(4758),i=(t(2393),t(4414));const c=function(e){let{teamId:a,navigateTo:t}=e;const[c,d]=(0,l.useState)({name:"",shortName:"",region:"",logo:"",country:"",earnings:0,elo_rating:1e3,wins:"",losses:"",matches_played:"",achievements:"",captain:"",status:"Active",coach:{name:"",avatar:"",country:"US"},socialLinks:{twitter:"",instagram:"",youtube:"",website:"",discord:"",tiktok:""}}),[m,u]=(0,l.useState)(!1),[g,x]=(0,l.useState)(!1),[h,p]=(0,l.useState)(null),[b,v]=(0,l.useState)(null),[f,y]=(0,l.useState)(null),[k,j]=(0,l.useState)(null),{api:N}=(0,n.As)(),w=Boolean(a);(0,l.useEffect)((()=>{(async()=>{if(w)try{u(!0);const e=await N.get("/admin/teams/".concat(a)),t=e.data||e;console.log("TeamForm - Fetched team data:",t),d({name:t.name||"",shortName:t.short_name||t.shortName||"",region:t.region||"",logo:t.logo_url||t.logo||"",flag:t.flag_url||t.flag||"",country:t.country||"",earnings:t.earnings||0,elo_rating:t.elo_rating||t.rating||1e3,peak_elo:t.peak_elo||"",wins:t.wins||"",losses:t.losses||"",matches_played:t.matches_played||"",achievements:t.achievements||"",captain:t.captain||"",status:t.status||"Active",coach:{name:t.coach_name||t.coach||"",avatar:t.coach_image||"",country:t.coach_country||"US"},socialLinks:t.social_links||t.socialLinks||{twitter:"",instagram:"",youtube:"",website:"",discord:"",tiktok:""}})}catch(k){console.error("Error fetching team:",k),j("Error loading team data: "+k.message)}finally{u(!1)}})()}),[a,w]);const A=e=>{const{name:a,value:t}=e.target;if(a.startsWith("social_")){const e=a.replace("social_","");d((a=>(0,s.A)((0,s.A)({},a),{},{socialLinks:(0,s.A)((0,s.A)({},a.socialLinks),{},{[e]:t})})))}else if(a.startsWith("coach_")){const e=a.replace("coach_","");d((a=>(0,s.A)((0,s.A)({},a),{},{coach:(0,s.A)((0,s.A)({},a.coach),{},{[e]:t})})))}else d((e=>(0,s.A)((0,s.A)({},e),{},{[a]:t})))},S=async(e,a,t)=>{if(!e)return null;try{console.log("TeamForm - Uploading ".concat(t," for team ").concat(a,":"),e.name);const s=new FormData;"logo"===t?s.append("logo",e):"flag"===t?s.append("flag",e):"coach_avatar"===t&&s.append("coach_avatar",e);const l="/upload/team/".concat(a,"logo"===t?"/logo":"flag"===t?"/flag":"/coach-avatar");console.log("TeamForm - Upload endpoint: ".concat(l));const n=await N.postFile(l,s);console.log("TeamForm - ".concat(t," upload response:"),n);const r=n.data||n;let o;if(o=r.data?r.data.logo_url||r.data.flag_url||r.data.logo||r.data.flag:r.logo_url||r.flag_url||r.url||r.logo||r.flag,console.log("TeamForm - Extracted ".concat(t," URL:"),o),!o)throw console.error("TeamForm - No ".concat(t," URL found in response:"),r),new Error("No ".concat(t," URL returned from upload"));return o}catch(k){throw console.error("TeamForm - Error uploading ".concat(t,":"),k),k}};return m?(0,i.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,i.jsxs)("div",{className:"text-center",children:[(0,i.jsx)("div",{className:"loading-spinner mx-auto mb-4"}),(0,i.jsx)("div",{className:"text-gray-600 dark:text-gray-400",children:"Loading team data..."})]})}):(0,i.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("h2",{className:"text-2xl md:text-3xl font-bold text-gray-900 dark:text-white",children:w?"Edit Team":"Create New Team"}),(0,i.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:w?"Update team information and social links":"Add a new team to the database"})]}),(0,i.jsx)("button",{onClick:()=>t&&t("admin-dashboard"),className:"px-4 py-2 text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white transition-colors",children:"\u2190 Back to Dashboard"})]}),(0,i.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),c.name.trim())if(c.shortName.trim())if(c.region){x(!0),j(null);try{console.log("TeamForm - Starting save process...");const e={name:c.name.trim(),short_name:c.shortName.trim(),region:c.region,country:c.country,rating:parseInt(c.elo_rating)||1e3,earnings:parseFloat(c.earnings)||0,elo_rating:c.elo_rating?parseInt(c.elo_rating):1e3,peak_elo:c.peak_elo?parseInt(c.peak_elo):null,wins:c.wins?parseInt(c.wins):null,losses:c.losses?parseInt(c.losses):null,matches_played:c.matches_played?parseInt(c.matches_played):null,achievements:c.achievements||null,captain:c.captain||null,status:c.status||"Active",coach:c.coach.name||"",coach_name:c.coach.name||"",coach_country:c.coach.country||"US",social_links:{twitter:c.socialLinks.twitter||"",instagram:c.socialLinks.instagram||"",youtube:c.socialLinks.youtube||"",website:c.socialLinks.website||"",discord:c.socialLinks.discord||"",tiktok:c.socialLinks.tiktok||""}};console.log("TeamForm - Submit data prepared:",e);let l=a;if(w)console.log("Updating existing team with ID:",a),await N.put("/admin/teams/".concat(a),e),console.log("Team updated successfully");else{console.log("Creating new team first to get ID...");const a=await N.post("/admin/teams",e);l=(a.data||a).id,console.log("New team created with ID:",l)}let n=c.logo,i=c.flag,m=c.coach.avatar;try{h&&(console.log("TeamForm - Uploading logo..."),n=await S(h,l,"logo"),n&&console.log("TeamForm - Logo uploaded successfully:",n)),b&&(console.log("TeamForm - Uploading flag..."),i=await S(b,l,"flag"),i&&console.log("TeamForm - Flag uploaded successfully:",i)),f&&(console.log("TeamForm - Uploading coach avatar..."),m=await S(f,l,"coach_avatar"),m&&console.log("TeamForm - Coach avatar uploaded successfully:",m))}catch(o){console.error("TeamForm - Image upload failed:",o),alert("Team saved but image upload failed: "+o.message)}if(h&&n||b&&i||f&&m){console.log("TeamForm - Updating team with image URLs...");const a=(0,s.A)((0,s.A)({},e),{},{logo:n&&n.includes("storage/")?n.replace("".concat(r.i.BASE_URL,"/storage/"),""):n,flag:i&&i.includes("storage/")?i.replace("".concat(r.i.BASE_URL,"/storage/"),""):i,coach_data:(0,s.A)((0,s.A)({},e.coach_data),{},{avatar:m&&m.includes("storage/")?m.replace("".concat(r.i.BASE_URL,"/storage/"),""):m})});await N.put("/admin/teams/".concat(l),a),console.log("TeamForm - Team updated with images")}d((e=>(0,s.A)((0,s.A)({},e),{},{logo:n,flag:i,coach:(0,s.A)((0,s.A)({},e.coach),{},{avatar:m})}))),alert("Team ".concat(w?"updated":"created"," successfully!")),setTimeout((()=>{t&&t("admin-dashboard")}),1500)}catch(k){var l,n;if(console.error("TeamForm - Error saving team:",k),k.message.includes("500")?j("BACKEND ISSUE: Server error. Please check backend team validation and database constraints."):k.message.includes("422")?k.message.includes("name")&&k.message.includes("unique")?j("BACKEND ISSUE: Team name already exists. Check unique constraints."):k.message.includes("social_links")?j("BACKEND ISSUE: Social links validation failed. Check backend social_links field format."):j("BACKEND ISSUE: Validation error. Check backend validation rules for team fields."):k.message.includes("404")?j("BACKEND ISSUE: Team API endpoint not found. Implement /api/admin/teams routes."):j("Failed to save team: ".concat(k.message)),console.log("TeamForm - Form data preserved for retry"),null!==(l=k.response)&&void 0!==l&&null!==(n=l.data)&&void 0!==n&&n.data){const a=k.response.data.data;d((e=>(0,s.A)((0,s.A)((0,s.A)({},e),a),{},{socialLinks:(0,s.A)((0,s.A)({},e.socialLinks),a.social_links||a.socialLinks||{})})))}}finally{x(!1)}}else j("Region is required");else j("Short name is required");else j("Team name is required")},className:"space-y-6",children:[k&&(0,i.jsxs)("div",{className:"border px-4 py-3 rounded mb-4 ".concat(k.includes("BACKEND ISSUE")?"bg-red-100 border-red-400 text-red-700":"bg-yellow-100 border-yellow-400 text-yellow-700"),children:[k,k.includes("BACKEND ISSUE")&&(0,i.jsxs)("div",{className:"mt-2 text-sm",children:[(0,i.jsx)("strong",{children:"For Backend Developer:"})," Please check Laravel team model validation and API routes."]})]}),(0,i.jsxs)("div",{className:"card p-6",children:[(0,i.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Basic Information"}),(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-900 dark:text-gray-100 mb-2",children:"Team Logo"}),(0,i.jsx)(o.A,{onImageSelect:(e,a)=>{console.log("TeamForm - Logo selected:",null===e||void 0===e?void 0:e.name,a),p(e),d((e=>(0,s.A)((0,s.A)({},e),{},{logo:a||""})))},currentImage:c.logo,placeholder:"Upload Team Logo",className:"w-full max-w-md"}),c.logo&&(0,i.jsx)("div",{className:"mt-2",children:(0,i.jsx)("img",{src:c.logo,alt:"Current logo",className:"w-16 h-16 object-cover rounded",onError:e=>{e.target.style.display="none"}})})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-900 dark:text-gray-100 mb-2",children:"Team Name *"}),(0,i.jsx)("input",{type:"text",name:"name",value:c.name,onChange:A,className:"form-input",placeholder:"e.g., Team Stark Industries",required:!0})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-900 dark:text-gray-100 mb-2",children:"Short Name *"}),(0,i.jsx)("input",{type:"text",name:"shortName",value:c.shortName,onChange:A,className:"form-input",placeholder:"e.g., STARK",maxLength:"8",required:!0}),(0,i.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Maximum 8 characters"})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-900 dark:text-gray-100 mb-2",children:"Region *"}),(0,i.jsxs)("select",{name:"region",value:c.region,onChange:A,className:"form-input",required:!0,children:[(0,i.jsx)("option",{value:"",children:"Select Region"}),(0,i.jsx)("option",{value:"NA",children:"North America"}),(0,i.jsx)("option",{value:"EU",children:"Europe"}),(0,i.jsx)("option",{value:"APAC",children:"Asia-Pacific"}),(0,i.jsx)("option",{value:"SA",children:"South America"}),(0,i.jsx)("option",{value:"MENA",children:"Middle East & North Africa"}),(0,i.jsx)("option",{value:"OCE",children:"Oceania"})]})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-900 dark:text-gray-100 mb-2",children:"Country"}),(0,i.jsx)("input",{type:"text",name:"country",value:c.country,onChange:A,className:"form-input",placeholder:"e.g., United States"})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-900 dark:text-gray-100 mb-2",children:"Current ELO Rating"}),(0,i.jsx)("input",{type:"number",name:"elo_rating",value:c.elo_rating,onChange:A,className:"form-input",placeholder:"2400",min:"0",max:"5000",step:"1"}),(0,i.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Current team ELO rating (0-5000)"})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-900 dark:text-gray-100 mb-2",children:"Total Earnings (USD)"}),(0,i.jsx)("input",{type:"number",name:"earnings",value:c.earnings,onChange:e=>{const{name:a,value:t}=e.target,l="earnings"===a?parseFloat(t):parseInt(t);d((e=>(0,s.A)((0,s.A)({},e),{},{[a]:l||0})))},className:"form-input",placeholder:"0",min:"0",step:"0.01"}),(0,i.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Total prize earnings in USD. Example: 50000.00"})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-900 dark:text-gray-100 mb-2",children:"Team Status"}),(0,i.jsxs)("select",{name:"status",value:c.status,onChange:A,className:"form-input",children:[(0,i.jsx)("option",{value:"Active",children:"Active"}),(0,i.jsx)("option",{value:"Inactive",children:"Inactive"}),(0,i.jsx)("option",{value:"Disbanded",children:"Disbanded"}),(0,i.jsx)("option",{value:"Suspended",children:"Suspended"})]})]}),(0,i.jsxs)("div",{className:"md:col-span-2",children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-900 dark:text-gray-100 mb-2",children:"Achievements"}),(0,i.jsx)("textarea",{name:"achievements",value:c.achievements,onChange:A,className:"form-input",rows:"3",placeholder:"Major tournament wins, championships, notable accomplishments..."})]})]})]}),(0,i.jsxs)("div",{className:"card p-6",children:[(0,i.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Team Statistics"}),(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-900 dark:text-gray-100 mb-2",children:"Wins"}),(0,i.jsx)("input",{type:"number",name:"wins",value:c.wins,onChange:A,className:"form-input",placeholder:"100",min:"0",step:"1"})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-900 dark:text-gray-100 mb-2",children:"Losses"}),(0,i.jsx)("input",{type:"number",name:"losses",value:c.losses,onChange:A,className:"form-input",placeholder:"30",min:"0",step:"1"})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-900 dark:text-gray-100 mb-2",children:"Matches Played"}),(0,i.jsx)("input",{type:"number",name:"matches_played",value:c.matches_played,onChange:A,className:"form-input",placeholder:"130",min:"0",step:"1"})]})]})]}),(0,i.jsxs)("div",{className:"card p-6",children:[(0,i.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Coach Information"}),(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,i.jsxs)("div",{className:"md:col-span-2",children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-900 dark:text-gray-100 mb-2",children:"Coach Avatar"}),(0,i.jsx)(o.A,{onImageSelect:(e,a)=>{console.log("TeamForm - Coach avatar selected:",null===e||void 0===e?void 0:e.name,a),y(e),d((e=>(0,s.A)((0,s.A)({},e),{},{coach:(0,s.A)((0,s.A)({},e.coach),{},{avatar:a||""})})))},currentImage:c.coach.avatar,placeholder:"Upload Coach Avatar",className:"w-full max-w-md"}),c.coach.avatar&&(0,i.jsx)("div",{className:"mt-2",children:(0,i.jsx)("img",{src:c.coach.avatar,alt:"Current coach avatar",className:"w-16 h-16 object-cover rounded",onError:e=>{e.target.style.display="none"}})})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-900 dark:text-gray-100 mb-2",children:"Coach Name"}),(0,i.jsx)("input",{type:"text",name:"coach_name",value:c.coach.name,onChange:A,className:"form-input",placeholder:"e.g., John 'Coach' Smith"})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-900 dark:text-gray-100 mb-2",children:"Coach Country"}),(0,i.jsx)("select",{name:"coach_country",value:c.coach.country,onChange:A,className:"form-input",children:[{value:"US",label:"\ud83c\uddfa\ud83c\uddf8 United States"},{value:"CA",label:"\ud83c\udde8\ud83c\udde6 Canada"},{value:"MX",label:"\ud83c\uddf2\ud83c\uddfd Mexico"},{value:"BR",label:"\ud83c\udde7\ud83c\uddf7 Brazil"},{value:"AR",label:"\ud83c\udde6\ud83c\uddf7 Argentina"},{value:"UK",label:"\ud83c\uddec\ud83c\udde7 United Kingdom"},{value:"DE",label:"\ud83c\udde9\ud83c\uddea Germany"},{value:"FR",label:"\ud83c\uddeb\ud83c\uddf7 France"},{value:"ES",label:"\ud83c\uddea\ud83c\uddf8 Spain"},{value:"IT",label:"\ud83c\uddee\ud83c\uddf9 Italy"},{value:"NL",label:"\ud83c\uddf3\ud83c\uddf1 Netherlands"},{value:"SE",label:"\ud83c\uddf8\ud83c\uddea Sweden"},{value:"DK",label:"\ud83c\udde9\ud83c\uddf0 Denmark"},{value:"FI",label:"\ud83c\uddeb\ud83c\uddee Finland"},{value:"NO",label:"\ud83c\uddf3\ud83c\uddf4 Norway"},{value:"PL",label:"\ud83c\uddf5\ud83c\uddf1 Poland"},{value:"RU",label:"\ud83c\uddf7\ud83c\uddfa Russia"},{value:"UA",label:"\ud83c\uddfa\ud83c\udde6 Ukraine"},{value:"KR",label:"\ud83c\uddf0\ud83c\uddf7 South Korea"},{value:"JP",label:"\ud83c\uddef\ud83c\uddf5 Japan"},{value:"CN",label:"\ud83c\udde8\ud83c\uddf3 China"},{value:"TW",label:"\ud83c\uddf9\ud83c\uddfc Taiwan"},{value:"HK",label:"\ud83c\udded\ud83c\uddf0 Hong Kong"},{value:"SG",label:"\ud83c\uddf8\ud83c\uddec Singapore"},{value:"MY",label:"\ud83c\uddf2\ud83c\uddfe Malaysia"},{value:"TH",label:"\ud83c\uddf9\ud83c\udded Thailand"},{value:"VN",label:"\ud83c\uddfb\ud83c\uddf3 Vietnam"},{value:"PH",label:"\ud83c\uddf5\ud83c\udded Philippines"},{value:"ID",label:"\ud83c\uddee\ud83c\udde9 Indonesia"},{value:"IN",label:"\ud83c\uddee\ud83c\uddf3 India"},{value:"AU",label:"\ud83c\udde6\ud83c\uddfa Australia"},{value:"NZ",label:"\ud83c\uddf3\ud83c\uddff New Zealand"},{value:"ZA",label:"\ud83c\uddff\ud83c\udde6 South Africa"},{value:"AE",label:"\ud83c\udde6\ud83c\uddea UAE"},{value:"SA",label:"\ud83c\uddf8\ud83c\udde6 Saudi Arabia"},{value:"INTL",label:"\ud83c\udf0d International"}].map((e=>(0,i.jsx)("option",{value:e.value,children:e.label},e.value)))})]})]})]}),(0,i.jsxs)("div",{className:"card p-6",children:[(0,i.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Social Links"}),(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-900 dark:text-gray-100 mb-2",children:"Twitter"}),(0,i.jsx)("input",{type:"url",name:"social_twitter",value:c.socialLinks.twitter,onChange:A,className:"form-input",placeholder:"https://twitter.com/teamname"}),(0,i.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Full Twitter URL"})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-900 dark:text-gray-100 mb-2",children:"Instagram"}),(0,i.jsx)("input",{type:"url",name:"social_instagram",value:c.socialLinks.instagram,onChange:A,className:"form-input",placeholder:"https://instagram.com/teamname"}),(0,i.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Full Instagram URL"})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-900 dark:text-gray-100 mb-2",children:"YouTube"}),(0,i.jsx)("input",{type:"url",name:"social_youtube",value:c.socialLinks.youtube,onChange:A,className:"form-input",placeholder:"https://youtube.com/c/teamname"}),(0,i.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Full YouTube URL"})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-900 dark:text-gray-100 mb-2",children:"Website"}),(0,i.jsx)("input",{type:"url",name:"social_website",value:c.socialLinks.website,onChange:A,className:"form-input",placeholder:"https://teamname.com"}),(0,i.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Official team website"})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-900 dark:text-gray-100 mb-2",children:"Discord"}),(0,i.jsx)("input",{type:"text",name:"social_discord",value:c.socialLinks.discord,onChange:A,className:"form-input",placeholder:"Discord server invite or team handle"}),(0,i.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Team Discord server"})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-900 dark:text-gray-100 mb-2",children:"TikTok"}),(0,i.jsx)("input",{type:"url",name:"social_tiktok",value:c.socialLinks.tiktok,onChange:A,className:"form-input",placeholder:"https://tiktok.com/teamname"}),(0,i.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Team TikTok account"})]})]}),(c.socialLinks.twitter||c.socialLinks.instagram||c.socialLinks.youtube||c.socialLinks.website||c.socialLinks.discord||c.socialLinks.tiktok)&&(0,i.jsxs)("div",{className:"mt-6 p-4 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[(0,i.jsx)("h4",{className:"text-sm font-medium text-gray-900 dark:text-white mb-3",children:"Social Links Preview:"}),(0,i.jsxs)("div",{className:"flex flex-wrap gap-2",children:[c.socialLinks.twitter&&(0,i.jsx)("a",{href:c.socialLinks.twitter,target:"_blank",rel:"noopener noreferrer",className:"text-blue-500 hover:text-blue-700 text-sm",children:"Twitter"}),c.socialLinks.instagram&&(0,i.jsx)("a",{href:c.socialLinks.instagram,target:"_blank",rel:"noopener noreferrer",className:"text-pink-500 hover:text-pink-700 text-sm",children:"Instagram"}),c.socialLinks.youtube&&(0,i.jsx)("a",{href:c.socialLinks.youtube,target:"_blank",rel:"noopener noreferrer",className:"text-red-500 hover:text-red-700 text-sm",children:"YouTube"}),c.socialLinks.website&&(0,i.jsx)("a",{href:c.socialLinks.website,target:"_blank",rel:"noopener noreferrer",className:"text-green-500 hover:text-green-700 text-sm",children:"Website"}),c.socialLinks.discord&&(0,i.jsxs)("span",{className:"text-indigo-500 text-sm",children:["Discord: ",c.socialLinks.discord]}),c.socialLinks.tiktok&&(0,i.jsx)("a",{href:c.socialLinks.tiktok,target:"_blank",rel:"noopener noreferrer",className:"text-purple-500 hover:text-purple-700 text-sm",children:"TikTok"})]})]})]}),(0,i.jsxs)("div",{className:"flex justify-end space-x-4",children:[(0,i.jsx)("button",{type:"button",onClick:()=>t&&t("admin-dashboard"),className:"px-6 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-md hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:"Cancel"}),(0,i.jsx)("button",{type:"submit",disabled:g,className:"px-6 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:g?(0,i.jsxs)("span",{className:"flex items-center",children:[(0,i.jsx)("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),w?"Updating...":"Creating..."]}):w?"Update Team":"Create Team"})]})]})]})}},4758:(e,a,t)=>{t.d(a,{A:()=>n});var s=t(9950),l=t(4414);const n=function(e){let{onImageSelect:a,currentImage:t,placeholder:n="Upload Image",accept:r="image/*",maxSize:o=5242880,className:i=""}=e;const[c,d]=(0,s.useState)(!1),[m,u]=(0,s.useState)(!1),[g,x]=(0,s.useState)(t||null),[h,p]=(0,s.useState)(null),b=(0,s.useRef)(null);(0,s.useEffect)((()=>{x(t||null)}),[t]);const v=async e=>{const t=e[0];if(t)if(p(null),t.type.startsWith("image/"))if(t.size>o)p("File size must be less than ".concat(Math.round(o/1024/1024),"MB"));else{u(!0);try{const e=URL.createObjectURL(t);x(e),a&&"function"===typeof a&&a(t,e)}catch(s){console.error("Error processing image:",s),p("Error processing image. Please try again."),x(null)}finally{u(!1)}}else p("Please select an image file")},f=e=>{e.preventDefault(),e.stopPropagation(),"dragenter"===e.type||"dragover"===e.type?d(!0):"dragleave"===e.type&&d(!1)},y=()=>{var e;null===(e=b.current)||void 0===e||e.click()};return(0,l.jsxs)("div",{className:"relative ".concat(i),children:[(0,l.jsx)("input",{ref:b,type:"file",accept:r,onChange:e=>{e.target.files&&e.target.files[0]&&v(e.target.files)},className:"hidden"}),g?(0,l.jsxs)("div",{className:"relative group",children:[(0,l.jsx)("img",{src:g,alt:"Preview",className:"w-full h-32 object-cover rounded-lg border border-gray-300 dark:border-gray-600"}),(0,l.jsxs)("div",{className:"absolute inset-0 bg-black bg-opacity-50 opacity-0 group-hover:opacity-100 transition-opacity rounded-lg flex items-center justify-center space-x-2",children:[(0,l.jsx)("button",{type:"button",onClick:y,className:"px-3 py-1 bg-white text-gray-900 text-sm rounded hover:bg-gray-100 transition-colors",children:"Change"}),(0,l.jsx)("button",{type:"button",onClick:()=>{x(null),p(null),a&&"function"===typeof a&&a(null,null),b.current&&(b.current.value="")},className:"px-3 py-1 bg-red-600 text-white text-sm rounded hover:bg-red-700 transition-colors",children:"Remove"})]})]}):(0,l.jsx)("div",{onClick:y,onDragEnter:f,onDragLeave:f,onDragOver:f,onDrop:e=>{e.preventDefault(),e.stopPropagation(),d(!1),e.dataTransfer.files&&e.dataTransfer.files[0]&&v(e.dataTransfer.files)},className:"\n            w-full h-32 border-2 border-dashed rounded-lg cursor-pointer transition-all\n            flex flex-col items-center justify-center text-center p-4\n            ".concat(c?"border-red-500 bg-red-50 dark:bg-red-900/20":"border-gray-300 dark:border-gray-600 hover:border-red-400 hover:bg-gray-50 dark:hover:bg-gray-700/50","\n          "),children:m?(0,l.jsxs)("div",{className:"flex flex-col items-center",children:[(0,l.jsx)("div",{className:"w-6 h-6 border-2 border-red-500 border-t-transparent rounded-full animate-spin mb-2"}),(0,l.jsx)("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Processing..."})]}):(0,l.jsxs)("div",{className:"flex flex-col items-center",children:[(0,l.jsx)("svg",{className:"w-8 h-8 text-gray-400 mb-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),(0,l.jsx)("span",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:n}),(0,l.jsx)("span",{className:"text-xs text-gray-500 dark:text-gray-500 mt-1",children:"Drag & drop or click to select"}),(0,l.jsxs)("span",{className:"text-xs text-gray-400 dark:text-gray-600 mt-1",children:["Max ",Math.round(o/1024/1024),"MB"]})]})}),h&&(0,l.jsx)("div",{className:"mt-2 text-sm text-red-600 dark:text-red-400",children:h})]})}},5920:(e,a,t)=>{t.d(a,{V:()=>s});const s=e=>e?e.startsWith("http://")||e.startsWith("https://")?e:e.startsWith("/storage/")||e.startsWith("/images/")?"".concat("https://staging.mrvl.net").concat(e):(e.includes("/")&&e.startsWith("/"),"".concat("https://staging.mrvl.net","/storage/").concat(e)):null},7571:(e,a,t)=>{t.d(a,{G:()=>n});var s=t(9950),l=t(5150);const n=e=>{const[a,t]=(0,s.useState)(!1),[n,r]=(0,s.useState)([]),[o,i]=(0,s.useState)(0),[c,d]=(0,s.useState)(""),[m,u]=(0,s.useState)(-1),[g,x]=(0,s.useState)(!1),[h,p]=(0,s.useState)({top:0,left:0}),b=(0,s.useRef)(null),v=(0,s.useRef)(null),{api:f}=(0,l.As)(),y=(0,s.useCallback)(function(e,a){let t;return function(){for(var s=arguments.length,l=new Array(s),n=0;n<s;n++)l[n]=arguments[n];const r=()=>{clearTimeout(t),e(...l)};clearTimeout(t),t=setTimeout(r,a)}}((async function(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"all";if(e.length<1)return r([]),void x(!1);try{let s;x(!0),console.log("[Mention] Searching for:",e,"type:",a),console.log("[Mention] API object:",f);try{s=await f.get("/public/mentions/search?q=".concat(encodeURIComponent(e),"&type=").concat(a,"&limit=8"))}catch(t){console.log("[Mention] API call failed, trying direct fetch:",t);const l=await fetch("https://staging.mrvl.net/api/public/mentions/search?q=".concat(encodeURIComponent(e),"&type=").concat(a,"&limit=8"));s={data:await l.json()}}console.log("[Mention] Search response:",s.data),(s.data.success||s.data.data)&&(r(s.data.data||[]),i(0))}catch(s){console.error("Error searching mentions:",s),r([])}finally{x(!1)}}),300),[f]),k=(0,s.useCallback)((async()=>{try{let a;x(!0),console.log("[Mention] Getting popular mentions"),console.log("[Mention] API object:",f);try{a=await f.get("/public/mentions/popular?limit=6")}catch(e){console.log("[Mention] API call failed, trying direct fetch:",e);const t=await fetch("https://staging.mrvl.net/api/public/mentions/popular?limit=6");a={data:await t.json()}}console.log("[Mention] Popular response:",a.data),(a.data||a.data.data)&&(r(a.data.data||a.data||[]),i(0))}catch(a){console.error("Error fetching popular mentions:",a),r([])}finally{x(!1)}}),[f]),j=()=>{if(!b.current)return{top:0,left:0};const e=b.current.getBoundingClientRect(),a={top:e.bottom+window.scrollY+5,left:e.left+window.scrollX};return console.log("[Mention] Dropdown position calculated:",a,"rect:",e),a};return(0,s.useEffect)((()=>{const e=e=>{v.current&&!v.current.contains(e.target)&&b.current&&!b.current.contains(e.target)&&t(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)}),[]),{textareaRef:b,dropdownRef:v,showDropdown:a,mentionResults:n,selectedIndex:o,loading:g,dropdownPosition:h,handleInputChange:(e,a)=>{const s=e.target.value,l=e.target.selectionStart;a&&a(e);const n=s.substring(0,l),o=n.match(/@([a-zA-Z0-9_]*)$/);if(o){const e=o[1],a=l-o[0].length;console.log("[Mention] @ detected at position:",a,"query:",e),console.log("[Mention] Setting dropdown visible"),u(a),d(e),t(!0);const s=j();return console.log("[Mention] Setting dropdown position:",s),p(s),void(0===e.length?(console.log("[Mention] Calling getPopularMentions"),k()):(console.log("[Mention] Calling searchMentions with query:",e),y(e)))}const i=n.match(/@team:([a-zA-Z0-9_]*)$/);if(i){const e=i[1],a=l-i[0].length;return u(a),d(e),t(!0),p(j()),void y(e,"team")}const c=n.match(/@player:([a-zA-Z0-9_]*)$/);if(c){const e=c[1],a=l-c[0].length;return u(a),d(e),t(!0),p(j()),void y(e,"player")}t(!1),r([]),u(-1)},handleKeyDown:(e,s)=>{if(s&&s(e),a&&0!==n.length){switch(e.key){case"ArrowDown":e.preventDefault(),i((e=>(e+1)%n.length));break;case"ArrowUp":e.preventDefault(),i((e=>0===e?n.length-1:e-1));break;case"Enter":case"Tab":if(a&&n[o])return e.preventDefault(),{selectMention:n[o]};break;case"Escape":t(!1),r([])}return null}},selectMention:(a,s,l)=>{if(-1===m||!b.current)return;const n=l.substring(0,m),o=l.substring(b.current.selectionStart),i=n+a.mention_text+" "+o,c=n.length+a.mention_text.length+1;s(i),setTimeout((()=>{b.current&&(b.current.setSelectionRange(c,c),b.current.focus())}),0),t(!1),r([]),u(-1),e&&e(a)},setShowDropdown:t,setSelectedIndex:i}}}}]);