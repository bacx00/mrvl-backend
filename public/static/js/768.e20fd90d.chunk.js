"use strict";(self.webpackChunkmrvl_frontend=self.webpackChunkmrvl_frontend||[]).push([[768],{52:(e,t,n)=>{n.d(t,{yW:()=>r});n(9950);var a=n(1368),o=n(4414);const r=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(!e||0===t.length)return e;const r={};t.forEach((e=>{const t=e.mention_text,n=e.name,a=e.display_name;t&&(r[t]=e),"team"===e.type?(r["@team:".concat(n)]=e,r["@team:".concat(e.id)]=e,a&&(r["@team:".concat(a)]=e)):"player"===e.type&&(r["@player:".concat(n)]=e,r["@player:".concat(e.id)]=e,a&&(r["@player:".concat(a)]=e)),r["@".concat(n)]=e,a&&a!==n&&(r["@".concat(a)]=e)}));let i=[{type:"text",content:e}];return[/@team:([a-zA-Z0-9_\-\s]+)/g,/@player:([a-zA-Z0-9_\-\s]+)/g,/@([a-zA-Z0-9_]+)/g].forEach((e=>{const t=[];i.forEach((n=>{if("text"!==n.type)return void t.push(n);const a=n.content;let o,i=0;for(e.lastIndex=0;null!==(o=e.exec(a));){const e=o[0],n=o.index,s=n+e.length;n>i&&t.push({type:"text",content:a.slice(i,n)});let l=r[e];if(!l){const e=o[1];Object.keys(r).forEach((t=>{const n=r[t];!n||n.name!==e&&n.display_name!==e&&n.id!==e&&n.id!==parseInt(e)||(l=n)}))}l&&"user"!==l.type?t.push({type:"mention",content:e,mention:l,key:"mention-".concat(n,"-").concat(s)}):t.push({type:"text",content:e}),i=s}i<a.length&&t.push({type:"text",content:a.slice(i)})})),i=t})),i.map(((e,t)=>"mention"===e.type?(0,o.jsx)(a.A,{mention:e.mention,navigateTo:n},e.key||"mention-".concat(t)):e.content))}},294:(e,t,n)=>{n.d(t,{AZ:()=>r,CL:()=>o,EB:()=>p,vg:()=>s});var a=n(2555);const o=function(e){var t,n;let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"organic";if(!e)return;const o={event_category:"News",event_label:e.title,article_id:e.id,article_title:e.title,article_category:(null===(t=e.category)||void 0===t?void 0:t.name)||"Uncategorized",author:(null===(n=e.author)||void 0===n?void 0:n.name)||"MRVL Team",view_source:a,reading_time_estimate:d(e.content),article_age_days:c(e.published_at||e.created_at),user_agent:navigator.userAgent,viewport_width:window.innerWidth,viewport_height:window.innerHeight,timestamp:(new Date).toISOString()};var r,i;window.gtag&&(window.gtag("event","view_item",{item_category:"news_article",item_id:e.id,item_name:e.title,content_type:"news",custom_parameters:o}),window.gtag("event","page_view",{page_title:"".concat(e.title," | MRVL"),page_location:window.location.href,content_group1:"News",content_group2:(null===(r=e.category)||void 0===r?void 0:r.name)||"Uncategorized",custom_parameters:{article_id:e.id,author:(null===(i=e.author)||void 0===i?void 0:i.name)||"MRVL Team"}}));window.analytics&&"function"===typeof window.analytics.track&&window.analytics.track("News Article Viewed",o),g("news_view",o)},r=function(e,t){var n,o;let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!e)return;const i=(0,a.A)({event_category:"News Engagement",event_label:"".concat(t," - ").concat(e.title),article_id:e.id,article_title:e.title,article_category:(null===(n=e.category)||void 0===n?void 0:n.name)||"Uncategorized",engagement_type:t,author:(null===(o=e.author)||void 0===o?void 0:o.name)||"MRVL Team",timestamp:(new Date).toISOString()},r);window.gtag&&window.gtag("event",t,{content_type:"news_article",item_id:e.id,custom_parameters:i}),window.analytics&&"function"===typeof window.analytics.track&&window.analytics.track("News Engagement",i),g("news_engagement",i)},i=(e,t,n)=>{if(!e)return;const a={article_id:e.id,article_title:e.title,scroll_percentage:Math.round(t),time_on_page_seconds:Math.round(n/1e3),estimated_reading_progress:m(t,n,e.content),device_type:u(),timestamp:(new Date).toISOString()};[25,50,75,90,100].includes(Math.round(t))&&(window.gtag&&window.gtag("event","scroll",{content_type:"news_article",item_id:e.id,scroll_percentage:Math.round(t),custom_parameters:a}),window.analytics&&"function"===typeof window.analytics.track&&window.analytics.track("Reading Progress",a)),Math.round(t)%10===0&&g("reading_behavior",a)},s=(e,t,n)=>{const a={event_category:"News Search",search_term:e,filters_applied:t,result_count:n,timestamp:(new Date).toISOString()};window.gtag&&window.gtag("event","search",{search_term:e,content_type:"news",custom_parameters:a}),window.analytics&&"function"===typeof window.analytics.track&&window.analytics.track("News Search",a),g("news_search",a)},l=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"news";window.performance&&window.addEventListener("load",(()=>{setTimeout((()=>{var t,n;const a=performance.getEntriesByType("navigation")[0],o=performance.getEntriesByType("paint"),r={page_name:e,dom_content_loaded:(null===a||void 0===a?void 0:a.domContentLoadedEventEnd)-(null===a||void 0===a?void 0:a.domContentLoadedEventStart),load_time:(null===a||void 0===a?void 0:a.loadEventEnd)-(null===a||void 0===a?void 0:a.loadEventStart),first_contentful_paint:null===(t=o.find((e=>"first-contentful-paint"===e.name)))||void 0===t?void 0:t.startTime,largest_contentful_paint:null,cumulative_layout_shift:null,first_input_delay:null,connection_type:(null===(n=navigator.connection)||void 0===n?void 0:n.effectiveType)||"unknown",device_memory:navigator.deviceMemory||"unknown",timestamp:(new Date).toISOString()};"PerformanceObserver"in window&&(new PerformanceObserver((e=>{const t=e.getEntries(),n=t[t.length-1];r.largest_contentful_paint=n.startTime,v(r)})).observe({entryTypes:["largest-contentful-paint"]}),new PerformanceObserver((e=>{let t=0;for(const n of e.getEntries())n.hadRecentInput||(t+=n.value);r.cumulative_layout_shift=t,v(r)})).observe({entryTypes:["layout-shift"]}),new PerformanceObserver((e=>{for(const t of e.getEntries())r.first_input_delay=t.processingStart-t.startTime,v(r)})).observe({entryTypes:["first-input"]})),v(r)}),0)}))},d=e=>{if(!e)return 0;const t=e.split(/\s+/).length;return Math.ceil(t/200)},c=e=>{if(!e)return 0;const t=new Date,n=new Date(e),a=Math.abs(t-n);return Math.ceil(a/864e5)},m=(e,t,n)=>{if(!n)return 0;const a=60*d(n)*1e3,o=Math.min(t/a*100,100),r=e;return Math.round(.6*r+.4*o)},u=()=>{const e=window.innerWidth;return e<768?"mobile":e<1024?"tablet":"desktop"},g=async(e,t)=>{},v=e=>{window.gtag&&(e.largest_contentful_paint&&window.gtag("event","web_vital",{name:"LCP",value:Math.round(e.largest_contentful_paint),event_category:"Performance"}),null!==e.cumulative_layout_shift&&window.gtag("event","web_vital",{name:"CLS",value:Math.round(1e3*e.cumulative_layout_shift),event_category:"Performance"}),null!==e.first_input_delay&&window.gtag("event","web_vital",{name:"FID",value:Math.round(e.first_input_delay),event_category:"Performance"})),g("performance_metrics",e)},p=()=>{let e;l("news");let t=0,n=Date.now();const a=()=>{clearTimeout(e);const a=window.pageYOffset||document.documentElement.scrollTop,o=window.innerHeight,r=document.documentElement.scrollHeight,s=Math.min((a+o)/r*100,100);t=Math.max(t,s),e=setTimeout((()=>{const e=h();e&&i(e,t,Date.now()-n)}),100)};return window.addEventListener("scroll",a,{passive:!0}),document.addEventListener("visibilitychange",(()=>{if(document.hidden){const e=h();e&&i(e,t,Date.now()-n)}else n=Date.now()})),()=>{window.removeEventListener("scroll",a)}},h=()=>{if(window.__CURRENT_ARTICLE__)return window.__CURRENT_ARTICLE__;const e=window.location.pathname.match(/\/news\/(\d+)/);return e?{id:e[1]}:null}},631:(e,t,n)=>{n.d(t,{GF:()=>o,Ni:()=>r,rQ:()=>i});const a=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3e3,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"top-right";document.querySelectorAll(".mrvl-toast").forEach((e=>{document.body.contains(e)&&document.body.removeChild(e)}));const o=document.createElement("div"),r={"top-right":"top-4 right-4","top-left":"top-4 left-4","top-center":"top-4 left-1/2 transform -translate-x-1/2","bottom-right":"bottom-4 right-4","bottom-left":"bottom-4 left-4","bottom-center":"bottom-4 left-1/2 transform -translate-x-1/2"},i={success:"bg-green-500 text-white border-green-600",error:"bg-red-500 text-white border-red-600",warning:"bg-yellow-500 text-white border-yellow-600",info:"bg-blue-500 text-white border-blue-600",achievement:"bg-gradient-to-r from-yellow-500 to-orange-500 text-white border-orange-600"},s={success:"\u2705",error:"\u274c",warning:"\u26a0\ufe0f",info:"\u2139\ufe0f",achievement:"\ud83c\udfc6"},l=r[a]||r["top-right"],d=i[t]||i.info,c=s[t]||s.info;return o.className="mrvl-toast fixed ".concat(l," z-[9999] px-4 py-3 rounded-lg shadow-lg border-l-4 ").concat(d," font-medium max-w-sm transform transition-all duration-300 ease-in-out translate-x-full opacity-0"),o.innerHTML='\n    <div class="flex items-center space-x-2">\n      <span class="text-lg">'.concat(c,'</span>\n      <span class="flex-1">').concat(e,'</span>\n      <button class="ml-2 text-white/80 hover:text-white transition-colors" onclick="this.parentElement.parentElement.remove()">\n        \xd7\n      </button>\n    </div>\n  '),document.body.appendChild(o),requestAnimationFrame((()=>{o.classList.remove("translate-x-full","opacity-0"),o.classList.add("translate-x-0","opacity-100")})),setTimeout((()=>{document.body.contains(o)&&(o.classList.add("translate-x-full","opacity-0"),setTimeout((()=>{document.body.contains(o)&&document.body.removeChild(o)}),300))}),n),o},o=function(e){return a(e,"success",arguments.length>1&&void 0!==arguments[1]?arguments[1]:3e3)},r=function(e){return a(e,"error",arguments.length>1&&void 0!==arguments[1]?arguments[1]:4e3)},i=function(e){return a(e,"warning",arguments.length>1&&void 0!==arguments[1]?arguments[1]:3500)}},2768:(e,t,n)=>{n.r(t),n.d(t,{default:()=>N});var a=n(2555),o=n(9950),r=n(5150),i=n(8091),s=n(1453),l=n(8574),d=n(4085),c=n(1368),m=n(4843),u=n(4414);const g=function(e){let{type:t,id:n,url:a,mobileOptimized:r=!0,lazyLoad:i=!0,className:s="",inline:l=!0,showTitle:d=!1,autoplay:c=!1,muted:g=!1,startTime:v=null,width:p="100%",height:h="auto"}=e;const[x,y]=(0,o.useState)(!1),[w,b]=(0,o.useState)(""),[f,_]=(0,o.useState)(!i),[j,N]=(0,o.useState)("undefined"!==typeof window&&window.innerWidth<768),[k,E]=(0,o.useState)("undefined"!==typeof window&&(window.innerWidth>=768&&window.innerWidth<=1024)),A=(0,o.useRef)(null);if((0,o.useEffect)((()=>{const e=()=>{N(window.innerWidth<768),E(window.innerWidth>=768&&window.innerWidth<=1024)};return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)}),[]),(0,o.useEffect)((()=>{if(!i||f)return;const e=new IntersectionObserver((t=>{let[n]=t;n.isIntersecting&&(_(!0),e.disconnect())}),{threshold:.1,rootMargin:"50px"});return A.current&&e.observe(A.current),()=>e.disconnect()}),[i,f]),(0,o.useEffect)((()=>{if(f)if(a&&!n){const e=(0,m.dB)(a);if(e.isValid){const a=(0,m.qC)(e.video.type,e.video.id,{isMobile:j,isTablet:k,autoplay:c,muted:g||j,startTime:v,domain:"undefined"!==typeof window?window.location.hostname:"staging.mrvl.net"});console.log("\ud83c\udfa5 VideoEmbed - Generated embed URL:",a,"for type:",t,"id:",n),b(a)}else y(!0)}else if(n){const e=(0,m.qC)(t,n,{isMobile:j,isTablet:k,autoplay:c,muted:g||j,startTime:v,domain:"undefined"!==typeof window?window.location.hostname:"staging.mrvl.net"});console.log("\ud83c\udfa5 VideoEmbed - Generated embed URL:",e,"for type:",t,"id:",n),b(e)}}),[t,n,a,f,j,k,c,g,v]),(0,o.useEffect)((()=>{"twitter"!==t&&"tweet"!==t||!n&&!a||"undefined"===typeof window||!window.twttr||window.twttr.widgets.load()}),[t,n,a]),"twitter"===t||"tweet"===t||"x"===t){const e=n||(e=>{const t=(0,m.dB)(e);return t.isValid?t.video.id:null})(a);return!e||x?(0,u.jsx)("div",{className:"bg-gray-100 dark:bg-gray-800 rounded-lg p-6 text-center ".concat(l?"my-4":"my-6"," ").concat(s),children:(0,u.jsxs)("div",{className:"text-gray-500 dark:text-gray-400",children:[(0,u.jsx)("div",{className:"text-3xl mb-3",children:"\ud83d\udc26"}),(0,u.jsx)("p",{className:"mb-2",children:"Content unavailable"}),a&&(0,u.jsx)("a",{href:a,target:"_blank",rel:"noopener noreferrer",className:"text-blue-500 hover:text-blue-600 text-sm transition-colors",children:"View on X (Twitter) \u2192"})]})}):(0,u.jsx)("div",{className:"tweet-embed ".concat(l?"my-4":"my-6"," ").concat(j?"px-2":"px-4"," ").concat(s),children:(0,u.jsxs)("div",{className:"".concat(l?"":"flex justify-center"," ").concat(j?"max-w-full":"max-w-2xl mx-auto"),children:[d&&(0,u.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400 mb-2 font-medium",children:"Post from X (Twitter)"}),(0,u.jsx)("blockquote",{className:"twitter-tweet","data-theme":"undefined"!==typeof document&&document.documentElement.classList.contains("dark")?"dark":"light","data-dnt":"true","data-width":j?"100%":void 0,children:(0,u.jsx)("a",{href:"https://twitter.com/x/status/".concat(e),children:"Loading content from X..."})})]})})}if(x||!w){const e=(0,m.Uq)(t);return(0,u.jsx)("div",{className:"group bg-gradient-to-br from-gray-100 to-gray-200 dark:from-gray-800 dark:to-gray-900 rounded-xl p-8 text-center border border-gray-300 dark:border-gray-600 shadow-lg hover:shadow-xl transition-all duration-300 ".concat(l?"my-6":"my-8"," ").concat(s),style:{width:p,height:"auto"!==h?h:void 0},children:(0,u.jsxs)("div",{className:"text-gray-600 dark:text-gray-300",children:[(0,u.jsxs)("div",{className:"relative inline-block mb-4",children:[(0,u.jsx)("div",{className:"text-4xl opacity-75 group-hover:opacity-100 transition-opacity",children:"youtube"===t?"\ud83d\udd34":t.includes("twitch")?"\ud83d\udfe3":"twitter"===t||"x"===t?"\ud83d\udc26":"\ud83c\udfae"}),(0,u.jsx)("div",{className:"absolute -top-1 -right-1 w-3 h-3 bg-red-500 rounded-full border-2 border-white dark:border-gray-800"})]}),(0,u.jsxs)("h3",{className:"text-lg font-bold mb-2 text-gray-800 dark:text-gray-200",children:[e," Content Unavailable"]}),(0,u.jsxs)("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4 max-w-md mx-auto",children:["This ",e.toLowerCase()," video couldn't be loaded. The content may be private, removed, or temporarily unavailable."]}),a&&(0,u.jsxs)("a",{href:a,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center space-x-2 bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white px-6 py-3 rounded-lg font-semibold text-sm transition-all duration-300 shadow-lg hover:shadow-xl transform hover:scale-105",children:[(0,u.jsxs)("span",{children:["Watch on ",e]}),(0,u.jsx)("span",{children:"\u2192"})]}),(0,u.jsxs)("div",{className:"mt-4 text-xs text-gray-500 dark:text-gray-500 flex items-center justify-center space-x-2",children:[(0,u.jsx)("span",{className:"w-2 h-2 bg-red-500 rounded-full animate-pulse"}),(0,u.jsx)("span",{children:"Content Error"})]})]})})}if(!f){const e=(0,m.tW)(t,j);return(0,u.jsx)("div",{ref:A,className:"video-embed ".concat(t,"-embed group cursor-pointer hover:scale-[1.02] transition-all duration-300 ").concat(l?"my-6":"my-8"," ").concat(j?"mobile-video-embed":""," ").concat(k?"tablet-video-embed":""," ").concat(s),style:{width:p,height:"auto"!==h?h:void 0},onClick:()=>_(!0),children:(0,u.jsxs)("div",{className:"relative ".concat("auto"===e?"h-auto min-h-[240px]":e," ").concat("auto"!==e?"h-0":""," bg-gradient-to-br from-gray-200 via-gray-100 to-gray-300 dark:from-gray-800 dark:via-gray-900 dark:to-gray-700 rounded-xl overflow-hidden shadow-xl border border-gray-300 dark:border-gray-600 group-hover:border-red-400/30 flex items-center justify-center"),children:[(0,u.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent animate-pulse"}),(0,u.jsxs)("div",{className:"absolute top-3 left-3 bg-black/70 backdrop-blur-sm text-white px-3 py-1.5 rounded-lg text-xs font-bold flex items-center space-x-1.5 shadow-lg",children:[(0,u.jsx)("span",{className:"w-2 h-2 rounded-full ".concat("youtube"===t?"bg-red-500":t.includes("twitch")?"bg-purple-500":"twitter"===t||"x"===t?"bg-blue-500":"bg-green-500"," animate-pulse")}),(0,u.jsx)("span",{children:(0,m.Uq)(t).toUpperCase()})]}),(0,u.jsxs)("div",{className:"absolute inset-0 flex flex-col items-center justify-center text-gray-600 dark:text-gray-300 group-hover:text-gray-800 dark:group-hover:text-gray-100 transition-colors",children:[(0,u.jsxs)("div",{className:"relative mb-4",children:[(0,u.jsx)("div",{className:"text-5xl opacity-80 group-hover:opacity-100 transition-opacity",children:"youtube"===t?"\ud83d\udd34":t.includes("twitch")?"\ud83d\udfe3":"twitter"===t||"x"===t?"\ud83d\udc26":"\ud83c\udfae"}),(0,u.jsx)("div",{className:"absolute inset-0 bg-gradient-to-t from-red-500/20 to-transparent rounded-full blur-lg"})]}),(0,u.jsxs)("div",{className:"text-center space-y-2",children:[(0,u.jsxs)("div",{className:"text-lg font-bold",children:["Loading ",(0,m.Uq)(t)," Content"]}),(0,u.jsx)("div",{className:"text-sm opacity-75 max-w-xs",children:j?"Tap to load video content":"Click to load high-quality video"}),(0,u.jsxs)("div",{className:"flex items-center justify-center space-x-1 mt-3",children:[(0,u.jsx)("div",{className:"w-2 h-2 bg-red-500 rounded-full animate-bounce",style:{animationDelay:"0ms"}}),(0,u.jsx)("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-bounce",style:{animationDelay:"150ms"}}),(0,u.jsx)("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-bounce",style:{animationDelay:"300ms"}})]})]}),d&&(0,u.jsx)("div",{className:"absolute bottom-4 left-4 right-4 text-center",children:(0,u.jsxs)("div",{className:"bg-black/50 backdrop-blur-sm text-white px-3 py-1.5 rounded-lg text-xs font-medium",children:[(0,m.Uq)(t)," Video Ready to Play"]})})]}),(0,u.jsx)("div",{className:"absolute bottom-0 right-0 w-20 h-20 bg-gradient-to-tl from-red-600/20 to-transparent opacity-40 group-hover:opacity-60 transition-opacity"})]})})}const C=(0,m.tW)(t,j);return(0,u.jsxs)("div",{ref:A,className:"video-embed ".concat(t,"-embed group transition-all duration-300 ").concat(l?"my-6":"my-8"," ").concat(j?"mobile-video-embed":""," ").concat(k?"tablet-video-embed":""," ").concat(s),style:{width:p,height:"auto"!==h?h:void 0},children:[d&&(0,u.jsxs)("div",{className:"text-sm text-gray-600 dark:text-gray-400 mb-3 font-semibold flex items-center group-hover:text-gray-800 dark:group-hover:text-gray-200 transition-colors",children:[(0,u.jsx)("span",{className:"mr-2 text-base",children:"youtube"===t?"\ud83d\udd34":t.includes("twitch")?"\ud83d\udfe3":"twitter"===t||"x"===t?"\ud83d\udc26":"\ud83c\udfae"}),(0,m.Uq)(t)," Video",(0,u.jsx)("div",{className:"ml-auto text-xs opacity-70 group-hover:opacity-100 transition-opacity",children:"youtube"===t?"HD Quality":t.includes("twitch")?"Live Stream":"twitter"===t||"x"===t?"Social Media":"Gaming"})]}),(0,u.jsxs)("div",{className:"relative ".concat("auto"===C?"h-auto":C," ").concat("auto"!==C?"h-0":""," bg-gradient-to-br from-gray-900 via-black to-gray-800 rounded-xl overflow-hidden shadow-2xl border border-gray-300 dark:border-gray-600 group-hover:shadow-red-500/20 group-hover:border-red-400/30 transition-all duration-300 transform group-hover:scale-[1.02]"),children:[(0,u.jsxs)("div",{className:"absolute top-3 left-3 z-20 bg-black/80 backdrop-blur-sm text-white px-3 py-1.5 rounded-lg text-xs font-bold flex items-center space-x-1.5 shadow-lg",children:[(0,u.jsx)("span",{className:"w-2 h-2 rounded-full ".concat("youtube"===t?"bg-red-500":t.includes("twitch")?"bg-purple-500":"twitter"===t||"x"===t?"bg-blue-500":"bg-green-500"," animate-pulse")}),(0,u.jsx)("span",{children:(0,m.Uq)(t).toUpperCase()})]}),j&&r&&(0,u.jsx)("div",{className:"absolute top-3 right-3 z-20 bg-green-600/90 backdrop-blur-sm text-white px-2.5 py-1 rounded-lg text-xs font-semibold shadow-lg",children:"\ud83d\udcf1 Mobile"}),(0,u.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-red-600/10 to-blue-600/10 opacity-0 group-hover:opacity-100 transition-opacity duration-300 pointer-events-none z-10"}),(0,u.jsx)("iframe",{src:w,title:"".concat((0,m.Uq)(t)," video player"),frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share",allowFullScreen:!0,className:"".concat("auto"===C?"w-full h-full":"absolute top-0 left-0 w-full h-full"," rounded-xl transition-transform duration-300"),onError:()=>{y(!0)},loading:"lazy",style:{maxWidth:"100%",height:"auto"===C?j?"280px":"450px":j?"auto":"100%",minHeight:"auto"===C?"240px":void 0}}),(0,u.jsx)("div",{className:"absolute bottom-0 right-0 w-16 h-16 bg-gradient-to-tl from-red-600/30 to-transparent opacity-60 group-hover:opacity-80 transition-opacity"})]}),(j||k)&&!l&&(0,u.jsx)("div",{className:"mt-3 text-center",children:(0,u.jsxs)("div",{className:"inline-flex items-center space-x-2 bg-gray-100 dark:bg-gray-800 px-4 py-2 rounded-full text-xs text-gray-600 dark:text-gray-400 border border-gray-200 dark:border-gray-700 group-hover:border-red-400/30 transition-colors",children:[(0,u.jsx)("span",{children:"\ud83c\udfae"}),(0,u.jsx)("span",{className:"font-medium",children:j?"Tap to play \u2022 Pinch to zoom \u2022 Fullscreen available":"Click to play \u2022 Enhanced controls"})]})}),l&&(j||k)&&(0,u.jsx)("div",{className:"mt-2 text-center",children:(0,u.jsxs)("div",{className:"inline-flex items-center space-x-1 text-xs text-gray-500 dark:text-gray-400 opacity-75 group-hover:opacity-100 transition-opacity",children:[(0,u.jsx)("span",{className:"w-1.5 h-1.5 bg-red-500 rounded-full animate-pulse"}),(0,u.jsx)("span",{className:"font-medium",children:"Tap to play"})]})})]})};n(8132);var v=n(52),p=n(1990),h=n(6225);const x=e=>{var t,n,a,o;if(!e)return{};const r=e.title||"Latest News - MRVL",i=e.excerpt||(null===(t=e.content)||void 0===t?void 0:t.substring(0,160))||"Stay updated with the latest Marvel Rivals news and updates.",s=(0,h.G8)(e)||"/images/news-placeholder.svg",l="".concat(window.location.origin,"/news/").concat(e.id),d=e.published_at||e.created_at,c=e.updated_at;return{title:"".concat(r," | MRVL"),description:i,keywords:["Marvel Rivals","MRVL","esports","gaming news","competitive gaming",...e.tags||[]].join(", "),"og:title":r,"og:description":i,"og:image":s,"og:url":l,"og:type":"article","og:site_name":"MRVL - Marvel Rivals Platform","og:locale":"en_US","article:published_time":d,"article:modified_time":c,"article:author":(null===(n=e.author)||void 0===n?void 0:n.name)||"MRVL Team","article:section":(null===(a=e.category)||void 0===a?void 0:a.name)||"News","article:tag":(e.tags||[]).join(","),"twitter:card":"summary_large_image","twitter:title":r,"twitter:description":i,"twitter:image":s,"twitter:site":"@MRVLPlatform","twitter:creator":(null===(o=e.author)||void 0===o?void 0:o.twitter)||"@MRVLPlatform",news_keywords:(e.tags||[]).join(","),robots:"index,follow",canonical:l}},y=e=>{var t,n,a,o,r,i;if(!e)return null;const s={"@context":"https://schema.org","@type":"NewsArticle",headline:e.title,description:e.excerpt||(null===(t=e.content)||void 0===t?void 0:t.substring(0,300)),image:(0,h.G8)(e),datePublished:e.published_at||e.created_at,dateModified:e.updated_at||e.published_at||e.created_at,author:{"@type":"Person",name:(null===(n=e.author)||void 0===n?void 0:n.name)||"MRVL Team",url:(null===(a=e.author)||void 0===a?void 0:a.profile_url)||"".concat(window.location.origin,"/author/").concat((null===(o=e.author)||void 0===o?void 0:o.id)||"mrvl-team")},publisher:{"@type":"Organization",name:"MRVL",logo:{"@type":"ImageObject",url:"".concat(window.location.origin,"/logo.svg"),width:240,height:240}},mainEntityOfPage:{"@type":"WebPage","@id":"".concat(window.location.origin,"/news/").concat(e.id)},articleSection:(null===(r=e.category)||void 0===r?void 0:r.name)||"News",keywords:(e.tags||[]).join(","),wordCount:(null===(i=e.content)||void 0===i?void 0:i.split(" ").length)||0,url:"".concat(window.location.origin,"/news/").concat(e.id)};return e.videos&&e.videos.length>0&&(s.video=e.videos.map((t=>({"@type":"VideoObject",name:t.title||e.title,description:t.description||e.excerpt,thumbnailUrl:t.thumbnail||(0,h.G8)(e),uploadDate:t.created_at||e.created_at,contentUrl:t.url})))),s},w=e=>{Object.entries(e).forEach((e=>{let t,n,[a,o]=e;if(!o)return;if("title"===a)return;if(a.startsWith("og:"))t='meta[property="'.concat(a,'"]'),n="content";else if(a.startsWith("twitter:"))t='meta[name="'.concat(a,'"]'),n="content";else if(a.startsWith("article:"))t='meta[property="'.concat(a,'"]'),n="content";else{if("canonical"===a){let e=document.querySelector('link[rel="canonical"]');return e||(e=document.createElement("link"),e.rel="canonical",document.head.appendChild(e)),void(e.href=o)}t='meta[name="'.concat(a,'"]'),n="content"}let r=document.querySelector(t);r||(r=document.createElement("meta"),a.startsWith("og:")||a.startsWith("article:")?r.setAttribute("property",a):r.setAttribute("name",a),document.head.appendChild(r)),r.setAttribute(n,o)}))},b=e=>{if(!e)return;const t=document.querySelector('script[type="application/ld+json"][data-schema="NewsArticle"]');t&&t.remove();const n=document.createElement("script");n.type="application/ld+json",n.setAttribute("data-schema","NewsArticle"),n.textContent=JSON.stringify(e),document.head.appendChild(n)},f=e=>{if(!e)return 0;const t=e.split(/\s+/).length;return Math.ceil(t/200)};var _=n(294),j=n(631);const N=function(e){var t,n,N,k,E;let{params:A,navigateTo:C}=e;const{triggerComment:M}=(0,i.VJ)(),[T,S]=(0,o.useState)(null),[V,L]=(0,o.useState)([]),[D,P]=(0,o.useState)(!0),[U,R]=(0,o.useState)(""),z=e=>{const t=(0,p.nr)(e);R(t)},[I,O]=(0,o.useState)(null),[F,W]=(0,o.useState)(!1),[q,B]=(0,o.useState)(null),[H,G]=(0,o.useState)(""),J=e=>{const t=(0,p.nr)(e);G(t)},[Y,Z]=(0,o.useState)([]),{api:$,user:Q,isAuthenticated:X}=(0,r.As)(),K=null===A||void 0===A?void 0:A.id;(0,o.useEffect)((()=>{let e=!0;return(async()=>{K&&e&&await ee()})(),()=>{e=!1}}),[K]),(0,o.useEffect)((()=>{if(T){const e=x(T);w(e);const t=y(T);b(t),(0,_.CL)(T,"direct"),window.__CURRENT_ARTICLE__=T;return(0,_.EB)()}}),[T]);const ee=async()=>{try{var e;P(!0),console.log("\ud83d\udd0d NewsDetailPage: Fetching article ID:",K);const n=await $.get("/news/".concat(K)),a=(null===(e=n.data)||void 0===e?void 0:e.data)||n.data||n;console.log("\u2705 Article loaded:",a),S(a),L(a.comments||[]),await te();try{await $.post("/news/".concat(K,"/view"))}catch(t){console.log("View count failed (likely not logged in)")}}catch(t){console.error("\u274c Error fetching article:",t),S(null)}finally{P(!1)}},te=async()=>{try{var e,t;const n=await $.get("/mentions/search?limit=50");null!==(e=n.data)&&void 0!==e&&e.success&&null!==(t=n.data)&&void 0!==t&&t.data&&Z(n.data.data)}catch(n){console.error("Error fetching mentions data:",n),Z([])}},ne=async e=>{if(e.preventDefault(),!X)return void alert("Please log in to comment");const t=(0,p.nr)(U);if(!t.trim())return;const n=[...V];W(!0);try{const e={id:"temp-".concat(Date.now()),content:(0,p.nr)(t.trim()),author:(0,a.A)((0,a.A)({},Q),{},{name:(0,p.nr)(null===Q||void 0===Q?void 0:Q.name),username:(0,p.nr)(null===Q||void 0===Q?void 0:Q.username),email:(0,p.nr)(null===Q||void 0===Q?void 0:Q.email),id:(null===Q||void 0===Q?void 0:Q.id)||null,avatar_url:(0,p.nr)(null===Q||void 0===Q?void 0:Q.avatar_url)}),meta:{created_at:(new Date).toISOString()},is_temp:!0,stats:{upvotes:0,downvotes:0},user_vote:null,mentions:[],replies:[]};L(I?t=>t.map((t=>t.id===I?(0,a.A)((0,a.A)({},t),{},{replies:[...t.replies||[],e]}):t)):t=>[...t,e]);const c=await $.post("/news/".concat(K,"/comments"),{content:(0,p.nr)(t.trim()),parent_id:I}),m=!0===(null===c||void 0===c?void 0:c.success)||(null===c||void 0===c?void 0:c.data)||(null===c||void 0===c?void 0:c.comment);if(console.log("Comment submission response:",{response:c,success:null===c||void 0===c?void 0:c.success,hasData:!(null===c||void 0===c||!c.data),isSuccess:m}),m){z(""),O(null),(0,_.AZ)(T,"comment",{comment_type:I?"reply":"top_level",parent_comment_id:I});const t=c.data.data||c.data.comment;if(t&&(0,p.nr)(t.content)){var o,r,i,s,l;const n=(0,a.A)((0,a.A)({},t),{},{content:(0,p.nr)(t.content),author:(0,a.A)((0,a.A)({},t.author),{},{name:(0,p.nr)(null===(o=t.author)||void 0===o?void 0:o.name),username:(0,p.nr)(null===(r=t.author)||void 0===r?void 0:r.username),id:(null===(i=t.author)||void 0===i?void 0:i.id)||null,email:(0,p.nr)(null===(s=t.author)||void 0===s?void 0:s.email),avatar_url:(0,p.nr)(null===(l=t.author)||void 0===l?void 0:l.avatar_url)}),mentions:Array.isArray(t.mentions)?t.mentions.map((e=>"object"===typeof e&&null!==e?(0,a.A)((0,a.A)({},e),{},{mention_text:(0,p.nr)(e.mention_text),name:(0,p.nr)(e.name),display_name:(0,p.nr)(e.display_name),type:(0,p.nr)(e.type),id:e.id||null,username:(0,p.nr)(e.username),team_name:(0,p.nr)(e.team_name),player_name:(0,p.nr)(e.player_name)}):{mention_text:(0,p.nr)(e),name:(0,p.nr)(e),display_name:(0,p.nr)(e),type:"user",id:null})):[],meta:t.meta||{},stats:t.stats||{},user_vote:t.user_vote||null,replies:Array.isArray(t.replies)?t.replies:[]});L(I?t=>t.map((t=>t.id===I?(0,a.A)((0,a.A)({},t),{},{replies:t.replies.map((t=>t.id===e.id?n:t))}):t)):t=>t.map((t=>t.id===e.id?n:t)))}else await ee();(0,j.GF)("Comment posted successfully!")}else{var d;L(n);const e=(null===(d=c.data)||void 0===d?void 0:d.message)||"Failed to post comment. Please try again.";(0,j.Ni)(e)}}catch(E){var c,m,u,g,v,h,x,y;console.error("Error posting comment:",E);if((200===(null===(c=E.response)||void 0===c?void 0:c.status)||201===(null===(m=E.response)||void 0===m?void 0:m.status))&&(!0===(null===(u=E.response)||void 0===u||null===(g=u.data)||void 0===g?void 0:g.success)||"true"===(null===(v=E.response)||void 0===v||null===(h=v.data)||void 0===h?void 0:h.success))){z(""),O(null);const e=E.response.data.comment||E.response.data.data;if(e&&(0,p.nr)(e.content)){var w,b,f,N,k;const t=(0,a.A)((0,a.A)({},e),{},{content:(0,p.nr)(e.content),author:(0,a.A)((0,a.A)({},e.author),{},{name:(0,p.nr)(null===(w=e.author)||void 0===w?void 0:w.name),username:(0,p.nr)(null===(b=e.author)||void 0===b?void 0:b.username),id:(null===(f=e.author)||void 0===f?void 0:f.id)||null,email:(0,p.nr)(null===(N=e.author)||void 0===N?void 0:N.email),avatar_url:(0,p.nr)(null===(k=e.author)||void 0===k?void 0:k.avatar_url)}),mentions:Array.isArray(e.mentions)?e.mentions.map((e=>"object"===typeof e&&null!==e?(0,a.A)((0,a.A)({},e),{},{mention_text:(0,p.nr)(e.mention_text),name:(0,p.nr)(e.name),display_name:(0,p.nr)(e.display_name),type:(0,p.nr)(e.type),id:e.id||null,username:(0,p.nr)(e.username),team_name:(0,p.nr)(e.team_name),player_name:(0,p.nr)(e.player_name)}):{mention_text:(0,p.nr)(e),name:(0,p.nr)(e),display_name:(0,p.nr)(e),type:"user",id:null})):[],meta:e.meta||{},stats:e.stats||{},user_vote:e.user_vote||null,replies:Array.isArray(e.replies)?e.replies:[]});L(I?e=>e.map((e=>e.id===I?(0,a.A)((0,a.A)({},e),{},{replies:e.replies.map((e=>e.id===tempComment.id?t:e))}):e)):e=>e.map((e=>e.id===tempComment.id?t:e)))}else await ee();return(0,j.GF)("Comment posted successfully!"),void M()}L(n);let e="Failed to post comment. Please try again.";const t=(0,p.Jo)(E);t.includes("401")||401===(null===(x=E.response)||void 0===x?void 0:x.status)?e="Please log in again to post comments.":t.includes("403")||403===(null===(y=E.response)||void 0===y?void 0:y.status)?e="You do not have permission to comment on this article.":"An unknown error occurred"!==t&&(e=t),(0,j.Ni)(e)}finally{W(!1)}},ae=async e=>{if(!window.confirm("Are you sure you want to delete this comment?"))return;const t=[...V];try{var n;const o=V.map((t=>{if(t.id===e)return null;if(t.replies&&t.replies.length>0){const n=t.replies.filter((t=>t.id!==e));return(0,a.A)((0,a.A)({},t),{},{replies:n})}return t})).filter((e=>null!==e));L(o);const r=await $.delete("/news/comments/".concat(e));200===r.status||204===r.status||!0===(null===r||void 0===r?void 0:r.success)||!0===(null===r||void 0===r||null===(n=r.data)||void 0===n?void 0:n.success)||(null===r||void 0===r?void 0:r.message)&&r.message.toLowerCase().includes("success")?(console.log("\u2705 Comment deleted successfully"),(0,j.GF)("Comment deleted successfully!")):(console.warn("\u26a0\ufe0f Delete request did not return success, rolling back"),L(t),alert("Failed to delete comment. Please try again."))}catch(s){var o,r,i;console.error("Error deleting comment:",s),L(t);let e="Failed to delete comment. Please try again.";const n=(0,p.Jo)(s);n.includes("403")||403===(null===(o=s.response)||void 0===o?void 0:o.status)?e="You do not have permission to delete this comment.":n.includes("404")||404===(null===(r=s.response)||void 0===r?void 0:r.status)?e="Comment not found or already deleted.":n.includes("401")||401===(null===(i=s.response)||void 0===i?void 0:i.status)?e="Please log in again to delete comments.":"An unknown error occurred"!==n&&(e=n),(0,j.Ni)(e)}},oe=()=>{B(null),J("")},re=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(!e)return{processedContent:e,detectedVideos:[]};console.log("\ud83c\udfa5 Processing article content for videos...",{contentLength:e.length,existingVideos:t.length});const n=(0,m.ww)(e);console.log("\ud83c\udfa5 Detected videos:",n);const o=[...t];n.forEach((e=>{if(o.some((t=>t.originalUrl===e.originalUrl||t.url===e.originalUrl||(t.video_id||t.id)===e.id)))console.log("\ud83c\udfa5 Skipping duplicate video:",e.originalUrl);else{const t=(0,a.A)((0,a.A)({},e),{},{url:e.originalUrl,video_id:e.id,platform:e.platform,type:e.type,platformName:e.platformName,thumbnail:e.thumbnail,embedUrl:e.embedUrl,isValid:!1!==e.isValid});o.push(t),console.log("\ud83c\udfa5 Added video to embed list:",t)}}));let r=e;return r=r.replace(/\[VIDEO_EMBED_(\d+)\]/g,"\x3c!-- VIDEO_EMBEDDED_$1 --\x3e"),n.forEach(((e,t)=>{const n=new RegExp("^\\s*".concat(e.originalUrl.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"\\s*$"),"gm");r=r.replace(n,"\x3c!-- VIDEO_EMBEDDED_".concat(t," --\x3e"))})),console.log("\ud83c\udfa5 Final processed content:",{originalLength:e.length,processedLength:r.length,totalVideos:o.length}),{processedContent:r,detectedVideos:o}},ie=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];const n=(0,p.nr)(e);if(!n||"string"!==typeof n)return null;if(!t||0===t.length)return n;const a=[...t].sort(((e,t)=>(e.position_start||0)-(t.position_start||0))),o=[];let r=0;return a.forEach((e=>{const t=e.mention_text,a=n.indexOf(t,r);-1!==a&&(a>r&&o.push(n.slice(r,a)),o.push((0,u.jsx)(c.A,{mention:e,navigateTo:C},"mention-".concat(a,"-").concat(e.id))),r=a+t.length)})),r<n.length&&o.push(n.slice(r)),o.length>0?o:n},se=e=>{const t=new Date(e),n=new Date,a=Math.floor((n-t)/36e5);if(a<1)return"Just now";if(a<24)return"".concat(a,"h ago");if(a<48)return"Yesterday";const o=Math.floor(a/24);return o<7?"".concat(o,"d ago"):t.toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})},le=function(e){var t,n,a,o,r,i,c,m;let g=arguments.length>1&&void 0!==arguments[1]&&arguments[1],v=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const h=g?{marginLeft:"".concat(Math.min(2*v,6),"rem")}:{};return(0,u.jsx)("div",{className:"".concat(g?"pl-4 border-l-2 border-gray-200 dark:border-gray-700":""," py-4"),style:h,children:(0,u.jsx)("div",{className:"flex items-start space-x-3",children:(0,u.jsxs)("div",{className:"flex-1",children:[(0,u.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,u.jsx)(s.A,{user:e.author,showAvatar:!0,showHeroFlair:!0,showTeamFlair:!0,size:"sm",clickable:!1}),(0,u.jsx)("span",{className:"text-xs text-gray-500 dark:text-gray-500",children:se(null===(t=e.meta)||void 0===t?void 0:t.created_at)}),(null===(n=e.meta)||void 0===n?void 0:n.edited)&&(0,u.jsx)("span",{className:"text-xs text-gray-400 dark:text-gray-600",children:"(edited)"}),!e.is_temp&&(0,u.jsx)(l.A,{itemType:"news_comment",itemId:e.id,parentId:K,initialUpvotes:(null===(a=e.stats)||void 0===a?void 0:a.upvotes)||0,initialDownvotes:(null===(o=e.stats)||void 0===o?void 0:o.downvotes)||0,userVote:e.user_vote,direction:"horizontal",size:"xs"})]}),q===e.id?(0,u.jsxs)("div",{className:"mb-2",children:[(0,u.jsx)(d.A,{value:H,onChange:J,placeholder:"Edit your comment...",rows:3,className:"w-full px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-lg resize-none focus:ring-2 focus:ring-red-500 focus:border-transparent dark:bg-gray-700 dark:text-white"}),(0,u.jsxs)("div",{className:"flex justify-end space-x-2 mt-2",children:[(0,u.jsx)("button",{onClick:oe,className:"px-3 py-1.5 text-xs text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200 transition-colors border border-gray-300 dark:border-gray-600 rounded",children:"Cancel"}),(0,u.jsx)("button",{onClick:()=>(async e=>{const t=(0,p.nr)(H);if(t.trim())try{(await $.put("/news/comments/".concat(e),{content:t.trim()})).data.success?(B(null),J(""),await ee()):(0,j.Ni)("Failed to update comment. Please try again.")}catch(o){var n,a;console.error("Error updating comment:",o);let e="Failed to update comment. Please try again.";const t=(0,p.Jo)(o);t.includes("403")||403===(null===(n=o.response)||void 0===n?void 0:n.status)?e="You do not have permission to edit this comment.":t.includes("401")||401===(null===(a=o.response)||void 0===a?void 0:a.status)?e="Please log in again to edit comments.":"An unknown error occurred"!==t&&(e=t),(0,j.Ni)(e)}})(e.id),className:"px-3 py-1.5 text-xs bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors",children:"Save"})]})]}):(0,u.jsx)("div",{className:"text-gray-900 dark:text-white mb-2",children:ie((0,p.Vm)(e.content),e.mentions||[])}),(0,u.jsxs)("div",{className:"flex items-center justify-between",children:[(0,u.jsxs)("div",{className:"flex items-center space-x-4 text-xs text-gray-500 dark:text-gray-500",children:[X&&(0,u.jsx)("button",{onClick:()=>O(I===e.id?null:e.id),className:"hover:text-red-600 dark:hover:text-red-400 transition-colors font-medium",children:I===e.id?"Cancel Reply":"Reply"}),(null===(r=e.author)||void 0===r?void 0:r.id)===(null===Q||void 0===Q?void 0:Q.id)&&q!==e.id&&(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("button",{onClick:()=>(e=>{B(e.id),J(e.content)})(e),className:"hover:text-blue-600 dark:hover:text-blue-400 transition-colors",children:"Edit"}),(0,u.jsx)("button",{onClick:()=>ae(e.id),className:"hover:text-red-500 dark:hover:text-red-400 transition-colors",children:"Delete"})]}),("admin"===(null===Q||void 0===Q?void 0:Q.role)||"moderator"===(null===Q||void 0===Q?void 0:Q.role))&&(null===(i=e.author)||void 0===i?void 0:i.id)!==(null===Q||void 0===Q?void 0:Q.id)&&(0,u.jsx)("button",{onClick:()=>ae(e.id),className:"hover:text-red-500 dark:hover:text-red-400 transition-colors",children:"Moderate"})]}),(0,u.jsxs)("div",{className:"flex items-center space-x-2 text-xs text-gray-400 dark:text-gray-500",children:[e.mentions&&e.mentions.length>0&&(0,u.jsxs)("span",{className:"flex items-center space-x-1",children:[(0,u.jsx)("span",{children:"@"}),(0,u.jsx)("span",{children:e.mentions.length})]}),e.replies&&e.replies.length>0&&(0,u.jsxs)("span",{children:[e.replies.length," replies"]})]})]}),I===e.id&&(0,u.jsx)("div",{className:"mt-4 p-4 bg-gray-50 dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700",children:(0,u.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,u.jsx)(s.A,{user:Q,showAvatar:!0,showTeamFlair:!1,size:"xs"}),(0,u.jsxs)("div",{className:"flex-1",children:[(0,u.jsxs)("div",{className:"text-xs text-gray-500 dark:text-gray-500 mb-2",children:["Replying to ",(0,u.jsx)("span",{className:"font-medium text-red-600 dark:text-red-400",children:null===(c=e.author)||void 0===c?void 0:c.name})]}),(0,u.jsxs)("form",{onSubmit:ne,children:[(0,u.jsx)(d.A,{value:U,onChange:z,placeholder:"Reply to ".concat(null===(m=e.author)||void 0===m?void 0:m.name,"... (Type @ to mention teams and players)"),rows:3,className:"w-full px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-lg resize-none focus:ring-2 focus:ring-red-500 focus:border-transparent dark:bg-gray-700 dark:text-white",autoFocus:!0}),(0,u.jsxs)("div",{className:"flex justify-end space-x-2 mt-3",children:[(0,u.jsx)("button",{type:"button",onClick:()=>{O(null),z("")},className:"px-3 py-1.5 text-xs text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200 transition-colors border border-gray-300 dark:border-gray-600 rounded",children:"Cancel"}),(0,u.jsx)("button",{type:"submit",disabled:F||!(0,p.nr)(U).trim(),className:"px-3 py-1.5 text-xs bg-red-600 text-white rounded hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:F?(0,u.jsxs)("span",{className:"flex items-center",children:[(0,u.jsx)("div",{className:"w-3 h-3 border border-white border-t-transparent rounded-full animate-spin mr-1"}),"Posting..."]}):"Post Reply"})]})]})]})]})}),e.replies&&e.replies.length>0&&(0,u.jsx)("div",{className:"mt-4 space-y-2",children:e.replies.map((e=>le(e,!0,v+1)))})]})})},e.id)};return D?(0,u.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,u.jsxs)("div",{className:"text-center",children:[(0,u.jsx)("div",{className:"loading-spinner mx-auto mb-4"}),(0,u.jsx)("div",{className:"text-gray-600 dark:text-gray-400",children:"Loading article..."})]})}):T?(0,u.jsxs)("div",{className:"max-w-4xl mx-auto space-y-6",children:[(0,u.jsxs)("div",{className:"flex items-center space-x-2 text-sm text-gray-500 dark:text-gray-500",children:[(0,u.jsx)("button",{onClick:()=>C&&C("home"),className:"hover:text-red-600 dark:hover:text-red-400 transition-colors",children:"Home"}),(0,u.jsx)("span",{children:"\u203a"}),(0,u.jsx)("button",{onClick:()=>C&&C("news"),className:"hover:text-red-600 dark:hover:text-red-400 transition-colors",children:"News"}),(0,u.jsx)("span",{children:"\u203a"}),(0,u.jsx)("span",{className:"text-gray-900 dark:text-white",children:T.title})]}),(0,u.jsxs)("article",{className:"card overflow-hidden",children:[(0,u.jsxs)("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:[(0,u.jsxs)("div",{className:"flex items-center space-x-3 mb-4",children:[T.category&&(0,u.jsxs)("span",{className:"px-3 py-1 text-xs font-bold rounded-full text-white",style:{backgroundColor:T.category.color||"#6b7280"},children:[T.category.icon||"\ud83d\udcf0"," ",T.category.name]}),(null===(t=T.meta)||void 0===t?void 0:t.featured)&&(0,u.jsx)("span",{className:"px-3 py-1 text-xs font-bold rounded-full bg-yellow-500 text-white",children:"FEATURED"}),(0,u.jsx)("span",{className:"text-xs text-gray-500 dark:text-gray-500",children:T.region||"INTL"})]}),(0,u.jsx)("h1",{className:"text-3xl md:text-4xl font-bold text-gray-900 dark:text-white mb-4",children:ie((0,p.nr)(T.title),Y)}),(0,u.jsxs)("div",{className:"flex items-center justify-between",children:[(0,u.jsx)(s.A,{user:T.author,showAvatar:!0,showTeamFlair:!0,size:"md",clickable:!1}),(0,u.jsxs)("div",{className:"flex items-center space-x-4 text-sm text-gray-500 dark:text-gray-500",children:[(0,u.jsx)("span",{children:se((null===(n=T.meta)||void 0===n?void 0:n.published_at)||(null===(N=T.meta)||void 0===N?void 0:N.created_at))}),(e=>{const t=f(T.content)||(null===(e=T.meta)||void 0===e?void 0:e.read_time);return t?(0,u.jsxs)("span",{children:["\ud83d\udcd6 ",t," min read"]}):null})(),(()=>{const{detectedVideos:e}=re(T.content,T.videos||[]),t=e.length;return t>0?(0,u.jsxs)("span",{className:"text-blue-600 dark:text-blue-400",children:["\ud83d\udcfa ",t," video",1!==t?"s":""]}):null})()]})]})]}),(0,u.jsx)("div",{className:"aspect-video overflow-hidden bg-gray-100 dark:bg-gray-800",children:(0,u.jsx)("img",{src:(0,h.G8)(T),alt:T.title,className:"w-full h-full object-cover",onError:e=>{e.target.onerror=null,e.target.src="https://staging.mrvl.net/images/news-placeholder.svg"}})}),(0,u.jsxs)("div",{className:"p-6",children:[T.excerpt&&(0,u.jsx)("div",{className:"text-lg text-gray-700 dark:text-gray-300 mb-6 font-medium",children:ie((0,p.nr)(T.excerpt),Y)}),!1,function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(!e)return null;const{processedContent:n,detectedVideos:a}=re(e,t),o=a.filter((e=>!1!==e.isValid));console.log("\ud83c\udfa5 Rendering content with embeds:",{totalVideos:o.length,contentHasVideos:o.length>0});(0,v.yW)(n,Y,C);if(!o||0===o.length)return(0,u.jsx)("div",{className:"prose prose-lg dark:prose-invert max-w-none",children:(0,u.jsx)("div",{className:"whitespace-pre-wrap leading-relaxed",children:ie((0,p.nr)(n),Y)})});const r=n.split(/\n\s*\n/).filter((e=>e.trim()));let i=0;const s=r.length,l=[];if(1===o.length)l.push(Math.min(1,Math.floor(s/2)));else if(2===o.length)l.push(1,Math.floor(.7*s));else for(let d=0;d<o.length;d++){const e=Math.floor(s/(o.length+1)*(d+1));l.push(Math.max(1,e))}return console.log("\ud83c\udfa5 Video placement strategy:",{totalParagraphs:s,videoPlacementPoints:l,videosToPlace:o.length}),(0,u.jsxs)("div",{className:"prose prose-lg dark:prose-invert max-w-none",children:[r.map(((e,t)=>{const n=[],a=e.match(/<!-- VIDEO_EMBEDDED_(\d+) -->/);if(a){const e=parseInt(a[1]),t=o[e];t&&(console.log("\ud83c\udfa5 Found video placeholder for video",e,":",t),n.push((0,u.jsx)("div",{className:"not-prose my-8",children:(0,u.jsx)(g,{type:t.platform||t.type,id:t.video_id||t.id,url:t.embedUrl||t.embed_url||t.original_url||t.url||t.originalUrl,mobileOptimized:!0,lazyLoad:!0,inline:!0,showTitle:!1,className:"rounded-lg overflow-hidden shadow-lg border border-gray-200 dark:border-gray-700"})},"video-".concat(e))))}else e.trim()&&!e.includes("\x3c!-- VIDEO_EMBEDDED")&&n.push((0,u.jsx)("div",{className:"whitespace-pre-wrap leading-relaxed mb-6 text-gray-900 dark:text-gray-100",children:ie((0,p.nr)(e),Y)},"p-".concat(t)));if(i<o.length&&l.includes(t)){const e=o[i];console.log("\ud83c\udfa5 Placing video at position",t,":",e),n.push((0,u.jsx)("div",{className:"not-prose my-8",children:(0,u.jsx)(g,{type:e.platform||e.type,id:e.video_id||e.id,url:e.embedUrl||e.embed_url||e.original_url||e.url||e.originalUrl,mobileOptimized:!0,lazyLoad:!0,inline:!0,showTitle:!1,className:"rounded-lg overflow-hidden shadow-lg border border-gray-200 dark:border-gray-700"})},"video-".concat(i))),i++}return n})),i<o.length&&(0,u.jsxs)("div",{className:"not-prose mt-8 space-y-6",children:[(0,u.jsxs)("div",{className:"text-sm font-medium text-gray-600 dark:text-gray-400 mb-4 border-t border-gray-200 dark:border-gray-700 pt-6",children:["\ud83d\udcfa Related Videos (",o.length-i," more)"]}),o.slice(i).map(((e,t)=>(console.log("\ud83c\udfa5 Placing remaining video:",e),(0,u.jsx)(g,{type:e.platform||e.type,id:e.video_id||e.id,url:e.embedUrl||e.embed_url||e.original_url||e.url||e.originalUrl,mobileOptimized:!0,lazyLoad:!0,inline:!0,showTitle:!0,className:"rounded-lg overflow-hidden shadow-lg border border-gray-200 dark:border-gray-700"},"video-remaining-".concat(t)))))]}),o.length>0&&(0,u.jsxs)("div",{className:"mt-8 p-4 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[(0,u.jsx)("h3",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"\ud83d\udcfa Video Content Summary"}),(0,u.jsx)("ul",{className:"text-xs text-gray-600 dark:text-gray-400 space-y-1",children:o.map(((e,t)=>(0,u.jsxs)("li",{className:"flex items-center space-x-2",children:[(0,u.jsx)("span",{children:"\u2022"}),(0,u.jsx)("span",{children:e.platformName||e.platform||e.type}),e.originalUrl&&(0,u.jsx)("a",{href:e.originalUrl,target:"_blank",rel:"noopener noreferrer",className:"text-blue-500 hover:text-blue-600 text-xs",children:"(Open in new tab)"})]},t)))})]})]})}(T.content,T.videos)]}),(0,u.jsx)("div",{className:"p-6 border-t border-gray-200 dark:border-gray-700",children:(0,u.jsx)("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:(0,u.jsx)(l.A,{itemType:"news",itemId:T.id,initialUpvotes:(null===(k=T.stats)||void 0===k?void 0:k.upvotes)||0,initialDownvotes:(null===(E=T.stats)||void 0===E?void 0:E.downvotes)||0,userVote:T.user_vote,direction:"horizontal",onVote:e=>{(0,_.AZ)(T,"up"===e?"upvote":"downvote")}})})})]}),(0,u.jsxs)("div",{className:"card",children:[(0,u.jsx)("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:(0,u.jsxs)("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:["Comments (",V.length,")"]})}),X?(0,u.jsx)("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:(0,u.jsx)("form",{onSubmit:ne,children:(0,u.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,u.jsx)(s.A,{user:Q,showAvatar:!0,showTeamFlair:!1,size:"sm"}),(0,u.jsxs)("div",{className:"flex-1",children:[(0,u.jsx)(d.A,{value:U,onChange:z,placeholder:"Add a comment... Type @ to mention teams and players",rows:4,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg resize-none focus:ring-2 focus:ring-red-500 focus:border-transparent dark:bg-gray-700 dark:text-white"}),(0,u.jsx)("div",{className:"flex justify-end mt-2",children:(0,u.jsx)("button",{type:"submit",disabled:F||!(0,p.nr)(U).trim(),className:"px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed",children:F?"Posting...":"Post Comment"})})]})]})})}):(0,u.jsxs)("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700 text-center",children:[(0,u.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:"Please log in to leave a comment"}),(0,u.jsx)("button",{onClick:()=>window.dispatchEvent(new CustomEvent("mrvl-show-auth-modal")),className:"px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700 transition-colors",children:"Log In"})]}),(0,u.jsx)("div",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:V.length>0?V.map((e=>le(e))):(0,u.jsx)("div",{className:"p-6 text-center",children:(0,u.jsx)("div",{className:"text-gray-500 dark:text-gray-500",children:"No comments yet. Be the first to comment!"})})})]})]}):(0,u.jsxs)("div",{className:"card p-12 text-center",children:[(0,u.jsx)("div",{className:"text-6xl mb-4",children:"\ud83d\udcf0"}),(0,u.jsx)("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-4",children:"Article Not Found"}),(0,u.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"The article you're looking for doesn't exist or may have been removed."}),(0,u.jsx)("button",{onClick:()=>C&&C("news"),className:"px-6 py-2 bg-red-600 text-white rounded hover:bg-red-700 transition-colors",children:"\u2190 Back to News"})]})}},8132:(e,t,n)=>{n(9950),n(4414)},8574:(e,t,n)=>{n.d(t,{A:()=>l});var a=n(9950),o=n(5150),r=n(8091),i=n(631),s=n(4414);const l=function(e){let{itemType:t,itemId:n,parentId:l=null,initialUpvotes:d=0,initialDownvotes:c=0,userVote:m=null,onVoteChange:u=null,size:g="sm",direction:v="horizontal"}=e;const{api:p,user:h,isAuthenticated:x}=(0,o.As)(),{triggerVote:y}=(0,r.VJ)(),[w,b]=(0,a.useState)(d),[f,_]=(0,a.useState)(c),[j,N]=(0,a.useState)(m),[k,E]=(0,a.useState)(!1),A={xs:"p-1 text-xs min-h-[36px] min-w-[36px]",sm:"p-1.5 text-sm min-h-[40px] min-w-[40px]",md:"p-2 text-base min-h-[44px] min-w-[44px]",lg:"p-3 text-lg min-h-[48px] min-w-[48px]"},C=async e=>{if(!x)return void(0,i.Ni)("Please log in to vote");if(k)return;if(n&&n.toString().startsWith("temp-"))return void(0,i.rQ)("Please wait for the post to be created before voting");j===e&&console.log("User removing existing vote:",e),E(!0);const a=w,o=f,r=j;j===e?("upvote"===e?b((e=>Math.max(0,e-1))):_((e=>Math.max(0,e-1))),N(null)):j?("upvote"===e?(b((e=>e+1)),_((e=>Math.max(0,e-1)))):(_((e=>e+1)),b((e=>Math.max(0,e-1)))),N(e)):("upvote"===e?b((e=>e+1)):_((e=>e+1)),N(e));try{var s,d,c,m,g,v;const x={votable_type:t,votable_id:n,vote_type:e,parent_id:l||null};let k;if(console.log("Sending vote request:",x),"news"===t)k=await p.post("/news/".concat(n,"/vote"),{vote_type:e});else if("news_comment"===t)try{k=await p.post("/news/comments/".concat(n,"/vote"),{vote_type:e})}catch(z){console.log("News comment vote failed, using fallback:",z.message),k=await p.post("/user/votes/",x)}else k=await p.post("/user/votes/",x);console.log("\ud83d\udcc4 Raw Response:",k),console.log("\u2705 API Success:",k.data||k);const E=k&&(!0===k.success||!0===(null===(s=k.data)||void 0===s?void 0:s.success)||k.status>=200&&k.status<300&&!1!==(null===(d=k.data)||void 0===d?void 0:d.success)&&!1!==k.success);var h,A,C;if(console.log("Vote response validation:",{responseSuccess:null===(c=k)||void 0===c?void 0:c.success,dataSuccess:null===(m=k)||void 0===m||null===(g=m.data)||void 0===g?void 0:g.success,status:null===(v=k)||void 0===v?void 0:v.status,isSuccess:E}),!E)throw console.warn("Vote request returned success=false:",null===(h=k)||void 0===h?void 0:h.data),new Error((null===(A=k)||void 0===A||null===(C=A.data)||void 0===C?void 0:C.message)||"Vote request failed");{var M,T,S,V;const t=k.data||k,n=(null===t||void 0===t?void 0:t.vote_counts)||(null===t||void 0===t||null===(M=t.data)||void 0===M?void 0:M.vote_counts)||(null===t||void 0===t?void 0:t.updated_stats),s=void 0!==(null===t||void 0===t?void 0:t.user_vote)?null===t||void 0===t?void 0:t.user_vote:void 0!==(null===t||void 0===t||null===(T=t.data)||void 0===T?void 0:T.user_vote)?null===t||void 0===t||null===(S=t.data)||void 0===S?void 0:S.user_vote:null===t||void 0===t?void 0:t.vote_type,l=(null===t||void 0===t?void 0:t.action)||(null===t||void 0===t||null===(V=t.data)||void 0===V?void 0:V.action);console.log("Vote response:",{voteCounts:n,newUserVote:s,action:l}),n?(b(Math.max(0,n.upvotes||0)),_(Math.max(0,n.downvotes||0))):l&&("removed"===l?(N(null),"upvote"===r&&b(Math.max(0,a-1)),"downvote"===r&&_(Math.max(0,o-1))):"created"===l?(N(e),"upvote"===e&&b(a+1),"downvote"===e&&_(o+1)):"updated"===l&&(N(e),"upvote"===r&&"downvote"===e?(b(Math.max(0,a-1)),_(o+1)):"downvote"===r&&"upvote"===e&&(_(Math.max(0,o-1)),b(a+1)))),void 0!==s&&N(s);const d="removed"===l?"Vote removed":"updated"===l?"Vote updated":"Vote recorded";(0,i.GF)(d,2e3),y(),u&&u({action:l||"created",vote_counts:n||{upvotes:w,downvotes:f},user_vote:j,score:w-f})}}catch(I){var L,D,P,U,R;console.error("Error voting:",I);let e="Failed to record vote";409===(null===(L=I.response)||void 0===L?void 0:L.status)?e="You have already voted. Please refresh the page.":401===(null===(D=I.response)||void 0===D?void 0:D.status)?e="Please log in again to vote":403===(null===(P=I.response)||void 0===P?void 0:P.status)?e="You do not have permission to vote on this item":null!==(U=I.response)&&void 0!==U&&null!==(R=U.data)&&void 0!==R&&R.message?e=I.response.data.message:I.message&&"Network Error"!==I.message&&(e=I.message),b(a),_(o),N(r),(0,i.Ni)(e,4e3)}finally{E(!1)}},M=()=>w-f,T=()=>{const e=M();return e>0?"text-green-600 dark:text-green-400":e<0?"text-red-600 dark:text-red-400":"text-gray-600 dark:text-gray-400"};return"vertical"===v?(0,s.jsxs)("div",{className:"flex flex-col items-center space-y-1",children:[(0,s.jsx)("button",{onClick:()=>C("upvote"),disabled:k,className:"".concat(A[g]," rounded transition-all duration-200 flex items-center justify-center touch-manipulation ").concat("upvote"===j?"bg-green-100 text-green-700 dark:bg-green-900/20 dark:text-green-400 transform scale-110":"text-gray-500 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 hover:text-green-600 dark:hover:text-green-400 active:scale-95"," ").concat(k?"opacity-50 cursor-not-allowed":""),style:{WebkitTapHighlightColor:"rgba(34, 197, 94, 0.1)"},children:"\ud83d\udc4d"}),(0,s.jsx)("span",{className:"text-xs font-medium ".concat(T()),children:M()}),(0,s.jsx)("button",{onClick:()=>C("downvote"),disabled:k,className:"".concat(A[g]," rounded transition-all duration-200 flex items-center justify-center touch-manipulation ").concat("downvote"===j?"bg-red-100 text-red-700 dark:bg-red-900/20 dark:text-red-400 transform scale-110":"text-gray-500 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 hover:text-red-600 dark:hover:text-red-400 active:scale-95"," ").concat(k?"opacity-50 cursor-not-allowed":""),style:{WebkitTapHighlightColor:"rgba(239, 68, 68, 0.1)"},children:"\ud83d\udc4e"})]}):(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsxs)("button",{onClick:()=>C("upvote"),disabled:k,className:"".concat(A[g]," rounded transition-all duration-200 flex items-center justify-center space-x-1 touch-manipulation ").concat("upvote"===j?"bg-green-100 text-green-700 dark:bg-green-900/20 dark:text-green-400 transform scale-105":"text-gray-500 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 hover:text-green-600 dark:hover:text-green-400 active:scale-95"," ").concat(k?"opacity-50 cursor-not-allowed":""),style:{WebkitTapHighlightColor:"rgba(34, 197, 94, 0.1)"},children:[(0,s.jsx)("span",{children:"\ud83d\udc4d"}),(0,s.jsx)("span",{className:"text-xs font-medium",children:w})]}),(0,s.jsxs)("button",{onClick:()=>C("downvote"),disabled:k,className:"".concat(A[g]," rounded transition-all duration-200 flex items-center justify-center space-x-1 touch-manipulation ").concat("downvote"===j?"bg-red-100 text-red-700 dark:bg-red-900/20 dark:text-red-400 transform scale-105":"text-gray-500 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 hover:text-red-600 dark:hover:text-red-400 active:scale-95"," ").concat(k?"opacity-50 cursor-not-allowed":""),style:{WebkitTapHighlightColor:"rgba(239, 68, 68, 0.1)"},children:[(0,s.jsx)("span",{children:"\ud83d\udc4e"}),(0,s.jsx)("span",{className:"text-xs font-medium",children:f})]})]})}}}]);