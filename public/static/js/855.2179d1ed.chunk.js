"use strict";(self.webpackChunkmrvl_frontend=self.webpackChunkmrvl_frontend||[]).push([[855],{2393:(e,t,s)=>{s.d(t,{A:()=>r});s(9950);var n=s(5920),a=s(4414);const r=e=>{let{show:t,results:s,selectedIndex:r,loading:l,position:o,onSelect:i,query:c="",dropdownRef:d}=e;if(console.log("[MentionDropdown] Render - show:",t,"results:",null===s||void 0===s?void 0:s.length,"position:",o),!t)return null;const u=e=>{switch(e){case"user":return(0,a.jsx)("div",{className:"w-6 h-6 bg-[#4ade80]/20 text-[#4ade80] rounded-full flex items-center justify-center text-xs font-medium",children:"U"});case"team":return(0,a.jsx)("div",{className:"w-6 h-6 bg-[#fa4454]/20 text-[#fa4454] rounded-full flex items-center justify-center text-xs font-medium",children:"T"});case"player":return(0,a.jsx)("div",{className:"w-6 h-6 bg-[#3b82f6]/20 text-[#3b82f6] rounded-full flex items-center justify-center text-xs font-medium",children:"P"});default:return null}};return(0,a.jsx)("div",{ref:d,className:"absolute bg-[#1a2332] border border-[#2b3d4d] rounded-lg shadow-xl max-h-64 overflow-y-auto min-w-[280px]",style:{top:o.top||0,left:o.left||0,zIndex:99999,position:"fixed",display:t?"block":"none"},children:l?(0,a.jsxs)("div",{className:"p-3 text-center text-[#768894]",children:[(0,a.jsx)("div",{className:"animate-spin w-4 h-4 border-2 border-[#fa4454] border-t-transparent rounded-full mx-auto"}),(0,a.jsx)("span",{className:"text-sm mt-1 block",children:"Searching..."})]}):s.length>0?(0,a.jsxs)(a.Fragment,{children:[0===c.length&&(0,a.jsx)("div",{className:"px-3 py-2 text-xs text-[#768894] border-b border-[#2b3d4d]",children:"Popular mentions"}),s.map(((e,t)=>(0,a.jsxs)("div",{className:"px-3 py-2 cursor-pointer flex items-center space-x-3 hover:bg-[#2b3d4d] ".concat(t===r?"bg-[#fa4454]/10":""),onClick:()=>i(e),children:[e.avatar?(0,a.jsx)("img",{src:(0,n.V)(e.avatar),alt:e.display_name,className:"w-6 h-6 rounded-full object-cover"}):u(e.type),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("div",{className:"text-sm font-medium text-white truncate",children:e.display_name}),(0,a.jsx)("div",{className:"text-xs text-[#768894] truncate",children:e.subtitle})]}),(0,a.jsx)("div",{className:"text-xs text-[#768894] font-mono",children:e.mention_text})]},"".concat(e.type,"-").concat(e.id))))]}):c.length>0?(0,a.jsxs)("div",{className:"p-3 text-center text-[#768894] text-sm",children:['No results found for "',c,'"']}):null})}},2713:(e,t,s)=>{s.d(t,{A:()=>i});var n=s(9950),a=s(4843),r=s(5189),l=s(4414);function o(e){var t;let{video:s}=e;const[a,o]=(0,n.useState)(null),[i,c]=(0,n.useState)(!1),[d,u]=(0,n.useState)(null),[m,x]=(0,n.useState)(!1);(0,n.useEffect)((()=>{s.thumbnail&&!i&&o(s.thumbnail)}),[s.thumbnail,i]),(0,n.useEffect)((()=>{"vlrgg"!==s.type||d||m||(x(!0),(0,r.KZ)(s.originalUrl).then((e=>{if(e){u(e);const t=(0,r.bm)(e);null!==t&&void 0!==t&&t.thumbnail&&o(t.thumbnail)}})).catch((e=>{console.error("Error fetching VLR data:",e)})).finally((()=>{x(!1)})))}),[s.type,s.originalUrl,d,m]);const h=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;switch(e){case"youtube":return"\u25b6\ufe0f";case"twitch-clip":case"twitch-video":return"\ud83c\udfae";case"twitter":return"\ud83d\udc26";case"vlrgg":switch(t){case"match":return"\u2694\ufe0f";case"team":return"\ud83d\udc65";case"event":return"\ud83c\udfc6";case"player":return"\ud83d\udc64";default:return"\ud83c\udfaf"}default:return"\ud83d\udcfa"}};return(0,l.jsxs)("div",{className:"flex items-start space-x-3 p-3 bg-white dark:bg-gray-800/50 rounded-md border border-gray-200 dark:border-gray-700",children:[(0,l.jsx)("div",{className:"flex-shrink-0",children:a&&!i?(0,l.jsx)("img",{src:a,alt:"Video thumbnail",className:"w-16 h-12 object-cover rounded",onError:()=>{c(!0),o(null)}}):(0,l.jsxs)("div",{className:"w-16 h-12 bg-gray-200 dark:bg-gray-700 rounded flex items-center justify-center text-2xl relative",children:[h(s.type,s.contentType),m&&"vlrgg"===s.type&&(0,l.jsx)("div",{className:"absolute inset-0 bg-gray-200/80 dark:bg-gray-700/80 rounded flex items-center justify-center",children:(0,l.jsx)("div",{className:"w-3 h-3 border-2 border-orange-600 border-t-transparent rounded-full animate-spin"})})]})}),(0,l.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,l.jsxs)("div",{className:"flex items-center space-x-2 mb-1",children:[(0,l.jsxs)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ".concat((e=>{switch(e){case"youtube":return"bg-red-100 dark:bg-red-900/30 text-red-800 dark:text-red-200";case"twitch-clip":case"twitch-video":return"bg-purple-100 dark:bg-purple-900/30 text-purple-800 dark:text-purple-200";case"twitter":return"bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-200";case"vlrgg":return"bg-orange-100 dark:bg-orange-900/30 text-orange-800 dark:text-orange-200";default:return"bg-gray-100 dark:bg-gray-800 text-gray-800 dark:text-gray-200"}})(s.type)),children:[h(s.type,s.contentType)," ",s.platformName,s.contentType&&"vlrgg"===s.type&&(0,l.jsxs)("span",{className:"ml-1 opacity-75",children:["(",s.contentType,")"]})]}),s.isValid?(0,l.jsx)("span",{className:"text-green-600 dark:text-green-400 text-xs",children:"\u2713 Valid"}):(0,l.jsx)("span",{className:"text-red-600 dark:text-red-400 text-xs",children:"\u2717 Error"})]}),"vlrgg"===s.type&&d?(0,l.jsxs)("div",{className:"space-y-1",children:[(0,l.jsx)("div",{className:"text-sm text-gray-900 dark:text-gray-100 font-medium",children:d.slug.replace(/-/g," ").replace(/\b\w/g,(e=>e.toUpperCase()))}),d.matchData&&(0,l.jsxs)("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:[(null===(t=d.matchData.event)||void 0===t?void 0:t.name)&&(0,l.jsxs)("div",{children:["\ud83d\udcc5 ",d.matchData.event.name]}),d.matchData.status&&(0,l.jsxs)("div",{children:["\ud83c\udfaf Status: ",d.matchData.status]}),d.matchData.teams&&d.matchData.teams.length>=2&&(0,l.jsxs)("div",{children:["\u2694\ufe0f ",d.matchData.teams.map((e=>e.name)).join(" vs ")]})]}),d.teamData&&(0,l.jsxs)("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:[d.teamData.region&&(0,l.jsxs)("div",{children:["\ud83c\udf0d ",d.teamData.region]}),d.teamData.rank&&(0,l.jsxs)("div",{children:["\ud83c\udfc6 Rank: #",d.teamData.rank]})]})]}):(0,l.jsx)("div",{className:"text-sm text-gray-900 dark:text-gray-100 truncate",title:s.originalUrl,children:"vlrgg"===s.type?"".concat(s.contentType,": ").concat(s.slug):"ID: ".concat(s.id)}),s.error&&(0,l.jsx)("div",{className:"text-xs text-red-600 dark:text-red-400 mt-1",children:s.error}),(0,l.jsx)("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1 truncate",title:s.originalUrl,children:s.displayUrl||s.originalUrl})]}),(0,l.jsx)("div",{className:"flex-shrink-0 flex items-center space-x-2",children:(0,l.jsx)("a",{href:s.originalUrl,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-200 text-xs",title:"Open in new tab",children:"\ud83d\udd17"})})]})}const i=function(e){let{content:t,onVideoDetected:s,className:r=""}=e;const[i,c]=(0,n.useState)([]),[d,u]=(0,n.useState)(!0);return(0,n.useEffect)((()=>{if(!t)return void c([]);const e=(0,a.ww)(t);c(e),s&&s(e)}),[t,s]),i.length&&d?(0,l.jsx)("div",{className:"video-preview-container mt-4 ".concat(r),children:(0,l.jsxs)("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,l.jsxs)("h4",{className:"text-sm font-medium text-blue-900 dark:text-blue-100 flex items-center",children:["\ud83c\udfaf Content Embeds Detected (",i.length,")"]}),(0,l.jsx)("button",{onClick:()=>{u(!1)},className:"text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-200 text-sm",title:"Hide preview",children:"\u2715"})]}),(0,l.jsx)("div",{className:"space-y-3",children:i.map(((e,t)=>(0,l.jsx)(o,{video:e},t)))}),(0,l.jsxs)("div",{className:"mt-3 text-xs text-blue-700 dark:text-blue-300",children:[(0,l.jsx)("strong",{children:"This content will be automatically embedded in your article."}),(0,l.jsx)("br",{}),"Supported platforms: YouTube, Twitch (clips & videos), Twitter/X, VLR.gg (esports content)"]})]})}):null}},3855:(e,t,s)=>{s.r(t),s.d(t,{default:()=>x});var n=s(2555),a=s(9950),r=s(5150),l=s(7571),o=s(2393),i=s(4414);const c=e=>{let{value:t,onChange:s,onSubmit:n,placeholder:a="Type @ to mention users, teams, or players...",loading:r=!1,rows:c=3,className:d=""}=e;const{textareaRef:u,dropdownRef:m,showDropdown:x,mentionResults:h,selectedIndex:p,loading:g,dropdownPosition:f,handleInputChange:b,handleKeyDown:v,selectMention:w}=(0,l.G)();return(0,i.jsxs)("div",{className:"relative",children:[(0,i.jsx)("textarea",{ref:u,value:t,onChange:e=>{s(e.target.value),b(e,null)},onKeyDown:e=>{const a=v(e,null);null!==a&&void 0!==a&&a.selectMention&&w(a.selectMention,s,t),"Enter"===e.key&&e.ctrlKey&&n&&(e.preventDefault(),n())},placeholder:a,rows:c,disabled:r,className:"w-full p-3 bg-[#0f1419] border border-[#2b3d4d] rounded-lg text-white placeholder-[#768894] focus:border-[#fa4454] focus:outline-none resize-none ".concat(r?"opacity-50 cursor-not-allowed":""," ").concat(d)}),(0,i.jsx)(o.A,{show:x,results:h,selectedIndex:p,loading:g,position:f,onSelect:e=>w(e,s,t),dropdownRef:m}),n&&(0,i.jsx)("div",{className:"text-xs text-[#768894] mt-1",children:"Press Ctrl+Enter to submit"})]})};var d=s(2713),u=s(5920),m=s(4843);const x=function(e){let{newsId:t,navigateTo:s}=e;const[x,h]=(0,a.useState)({title:"",excerpt:"",content:"",category:"news",status:"draft",featured:!1,featured_image:"",published_at:(new Date).toISOString().split("T")[0],tags:[]}),[p,g]=(0,a.useState)(!1),[f,b]=(0,a.useState)(!1),[v,w]=(0,a.useState)(null),[y,j]=(0,a.useState)(""),[N,k]=(0,a.useState)([]),[S,D]=(0,a.useState)({words:0,characters:0,videos:0,mentions:0}),{api:A}=(0,r.As)(),{textareaRef:C,dropdownRef:M,showDropdown:_,mentionResults:R,selectedIndex:T,loading:E,dropdownPosition:I,handleInputChange:P,handleKeyDown:U,selectMention:V}=(0,l.G)(),{textareaRef:q,dropdownRef:K,showDropdown:L,mentionResults:W,selectedIndex:G,loading:z,dropdownPosition:F,handleInputChange:B,handleKeyDown:Y,selectMention:Z}=(0,l.G)(),O=Boolean(t);(0,a.useEffect)((()=>{(async()=>{if(O)try{g(!0);const e=await A.get("/admin/news/".concat(t)),s=e.data||e;h({title:s.title||"",excerpt:s.excerpt||"",content:s.content||"",category:s.category||"news",status:s.status||"draft",featured:s.featured||!1,featured_image:s.featured_image||"",published_at:s.published_at?s.published_at.split("T")[0]:(new Date).toISOString().split("T")[0],tags:s.tags||[]}),j(s.featured_image?(0,u.V)(s.featured_image):"")}catch(e){console.error("Error fetching news:",e),alert("Error loading news data")}finally{g(!1)}})()}),[t,O]),(0,a.useEffect)((()=>{X()}),[x.title,x.excerpt,x.content]);const $=e=>{const{name:t,value:s,type:a,checked:r}=e.target;h((e=>(0,n.A)((0,n.A)({},e),{},{[t]:"checkbox"===a?r:s}))),"title"!==t&&"excerpt"!==t&&"content"!==t||setTimeout((()=>X()),300)},X=()=>{const e=x.content||"",t=x.title||"",s=x.excerpt||"",n="".concat(t," ").concat(s," ").concat(e),a=n.trim().split(/\s+/).filter((e=>e.length>0)).length,r=e.length,l=(0,m.ww)(e),o=(n.match(/\w+|team:\w+|player:\w+/g)||[]).length;D({words:a,characters:r,videos:l.length,mentions:o}),k(l)},H=e=>({news:1,esports:1,updates:2,community:3,guides:4,opinion:5,balance:2,content:2,events:1}[e]||1);return p?(0,i.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,i.jsx)("div",{className:"animate-spin w-8 h-8 border-2 border-[#fa4454] border-t-transparent rounded-full"})}):(0,i.jsxs)("div",{className:"max-w-3xl mx-auto",children:[(0,i.jsxs)("div",{className:"mb-8",children:[(0,i.jsx)("button",{onClick:()=>s&&s("admin-news"),className:"text-[#768894] hover:text-white mb-4 inline-flex items-center",children:"\u2190 Back to News"}),(0,i.jsx)("h1",{className:"text-3xl font-bold text-white",children:O?"Edit Article":"Create Article"})]}),(0,i.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),x.title.trim())if(x.content.trim())if(x.content.trim().length<50)alert("Article content must be at least 50 characters long. Please add more details to your article.");else{b(!0);try{var n;const{processedContent:e,videos:l}=(0,m.KR)(x.content.trim()),o={title:x.title.trim(),excerpt:x.excerpt.trim(),content:e,category_id:H(x.category),status:x.status,featured:x.featured,published_at:x.published_at,featured_image:x.featured_image||null,videos:l.map((e=>({platform:e.type,video_id:e.id,embed_url:e.embedUrl||null,original_url:e.originalUrl})))};let i;if(i=O?await A.put("/admin/news/".concat(t),o):await A.post("/admin/news",o),v&&null!==(n=i)&&void 0!==n&&n.data){var a;const e=O?t:(null===(a=i.data.data)||void 0===a?void 0:a.id)||i.data.id,s=new FormData;s.append("featured_image",v);try{await A.postFile("/admin/news/".concat(e,"/featured-image"),s)}catch(r){console.error("Error uploading image:",r),alert("Article saved but image upload failed. You can try uploading the image again.")}}alert("News article ".concat(O?"updated":"created"," successfully!")),s&&s("admin-news")}catch(l){console.error("Error saving news:",l),alert("Error ".concat(O?"updating":"creating"," news article: ").concat(l.message))}finally{b(!1)}}else alert("Content is required");else alert("Title is required")},className:"space-y-6",children:[(0,i.jsxs)("div",{children:[(0,i.jsxs)("div",{className:"relative",children:[(0,i.jsx)("input",{ref:C,type:"text",name:"title",value:x.title,onChange:e=>{$(e),P(e,null)},onKeyDown:e=>{const t=U(e,null);null!==t&&void 0!==t&&t.selectMention&&V(t.selectMention,(e=>{h((t=>(0,n.A)((0,n.A)({},t),{},{title:e})))}),x.title)},className:"w-full px-4 py-3 bg-[#0f1419] border border-[#2b3d4d] rounded-lg text-white placeholder-[#768894] focus:border-[#fa4454] focus:outline-none text-xl",placeholder:"e.g., Team Liquid signs new roster for VCT 2025 (Use  to mention)",required:!0}),(0,i.jsx)(o.A,{show:_,results:R,selectedIndex:T,loading:E,position:I,onSelect:e=>V(e,(e=>{h((t=>(0,n.A)((0,n.A)({},t),{},{title:e})))}),x.title),dropdownRef:M})]}),(0,i.jsxs)("div",{className:"flex items-center justify-between mt-2 text-xs text-[#768894]",children:[(0,i.jsxs)("div",{className:"space-x-4",children:[(0,i.jsxs)("span",{children:[S.words," words"]}),(0,i.jsxs)("span",{className:S.characters<50?"text-red-400":"",children:[S.characters," chars"]})]}),(0,i.jsxs)("div",{className:"space-x-3",children:[S.videos>0&&(0,i.jsxs)("span",{className:"text-blue-400",children:[" ",S.videos]}),S.mentions>0&&(0,i.jsxs)("span",{className:"text-purple-400",children:[" ",S.mentions]})]})]})]}),(0,i.jsxs)("div",{className:"bg-[#1a2332] border border-[#2b3d4d] rounded-lg p-4",children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-[#768894] mb-3",children:"Featured Image"}),y?(0,i.jsxs)("div",{className:"relative",children:[(0,i.jsx)("img",{src:y,alt:"Preview",className:"w-full h-64 object-cover rounded-lg"}),(0,i.jsx)("button",{type:"button",onClick:()=>{w(null),j(""),h((e=>(0,n.A)((0,n.A)({},e),{},{featured_image:""})))},className:"absolute top-2 right-2 bg-[#ef4444] text-white px-3 py-1 rounded text-sm hover:bg-[#dc2626]",children:"Remove"})]}):(0,i.jsxs)("label",{className:"block",children:[(0,i.jsxs)("div",{className:"border-2 border-dashed border-[#2b3d4d] rounded-lg p-8 text-center cursor-pointer hover:border-[#fa4454] transition-colors",children:[(0,i.jsx)("svg",{className:"w-12 h-12 text-[#768894] mx-auto mb-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,i.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),(0,i.jsx)("p",{className:"text-[#768894]",children:"Click to upload image"}),(0,i.jsx)("p",{className:"text-xs text-[#768894] mt-1",children:"PNG, JPG up to 5MB"})]}),(0,i.jsx)("input",{type:"file",accept:"image/*",onChange:e=>{const t=e.target.files[0];if(t){if(!t.type.startsWith("image/"))return void alert("Please select an image file");if(t.size>5242880)return void alert("Image size must be less than 5MB");w(t);const e=new FileReader;e.onloadend=()=>{j(e.result)},e.readAsDataURL(t)}},className:"hidden"})]})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-[#768894] mb-2",children:"Summary (optional)"}),(0,i.jsxs)("div",{className:"relative",children:[(0,i.jsx)("textarea",{ref:q,name:"excerpt",value:x.excerpt,onChange:e=>{$(e),B(e,null)},onKeyDown:e=>{const t=Y(e,null);null!==t&&void 0!==t&&t.selectMention&&Z(t.selectMention,(e=>{h((t=>(0,n.A)((0,n.A)({},t),{},{excerpt:e})))}),x.excerpt)},rows:2,className:"w-full p-3 bg-[#0f1419] border border-[#2b3d4d] rounded-lg text-white placeholder-[#768894] focus:border-[#fa4454] focus:outline-none resize-none",placeholder:"e.g., The European powerhouse completes their roster with two new signings ahead of the upcoming season. (Use  to mention)"}),(0,i.jsx)(o.A,{show:L,results:W,selectedIndex:G,loading:z,position:F,onSelect:e=>Z(e,(e=>{h((t=>(0,n.A)((0,n.A)({},t),{},{excerpt:e})))}),x.excerpt),dropdownRef:K})]})]}),(0,i.jsxs)("div",{children:[(0,i.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,i.jsx)("label",{className:"text-sm font-medium text-[#768894]",children:"Content"}),(0,i.jsxs)("div",{className:"flex items-center space-x-4 text-xs text-[#768894]",children:[(0,i.jsxs)("span",{className:x.content.trim().length<50?"text-red-400":"",children:[x.content.trim().length," / 50 min chars"]}),(0,i.jsxs)("span",{children:[S.words," words"]}),S.videos>0&&(0,i.jsxs)("span",{className:"text-blue-400",children:[" ",S.videos," video",1!==S.videos?"s":""]})]})]}),(0,i.jsx)(c,{value:x.content,onChange:e=>h((t=>(0,n.A)((0,n.A)({},t),{},{content:e}))),placeholder:"Write your article content here (minimum 50 characters). Paste video URLs to auto-embed: YouTube, Twitch clips/videos, Twitter Use  to mention users, teams (team:name), or players (player:name) Include tournament context, team backgrounds, and player performances Add statistics and match analysis for comprehensive coverage Write in professional esports journalism style with engaging storytelling.",rows:15}),x.content&&(0,i.jsx)(d.A,{content:x.content,onVideoDetected:e=>{k(e)},className:"mt-3"}),(0,i.jsxs)("div",{className:"mt-3 text-xs text-[#768894]",children:[(0,i.jsx)("strong",{children:"Writing Tips:"})," Focus on engaging storytelling, include player quotes when possible, provide context for newcomers, and maintain objectivity in analysis."]})]}),(0,i.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-xs font-medium text-[#768894] mb-1",children:"Category"}),(0,i.jsxs)("select",{name:"category",value:x.category,onChange:$,className:"w-full px-3 py-2 bg-[#0f1419] border border-[#2b3d4d] rounded text-white focus:border-[#fa4454] focus:outline-none text-sm",children:[(0,i.jsx)("option",{value:"esports",children:"Esports"}),(0,i.jsx)("option",{value:"news",children:"General News"}),(0,i.jsx)("option",{value:"updates",children:"Game Updates"}),(0,i.jsx)("option",{value:"events",children:"Events"}),(0,i.jsx)("option",{value:"community",children:"Community"})]})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-xs font-medium text-[#768894] mb-1",children:"Status"}),(0,i.jsxs)("select",{name:"status",value:x.status,onChange:$,className:"w-full px-3 py-2 bg-[#0f1419] border border-[#2b3d4d] rounded text-white focus:border-[#fa4454] focus:outline-none text-sm",children:[(0,i.jsx)("option",{value:"draft",children:"Draft"}),(0,i.jsx)("option",{value:"published",children:"Published"})]})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-xs font-medium text-[#768894] mb-1",children:"Publish Date"}),(0,i.jsx)("input",{type:"date",name:"published_at",value:x.published_at,onChange:$,className:"w-full px-3 py-2 bg-[#0f1419] border border-[#2b3d4d] rounded text-white focus:border-[#fa4454] focus:outline-none text-sm"})]}),(0,i.jsx)("div",{className:"flex items-end",children:(0,i.jsxs)("label",{className:"flex items-center space-x-2 cursor-pointer",children:[(0,i.jsx)("input",{type:"checkbox",name:"featured",checked:x.featured,onChange:$,className:"w-4 h-4 text-[#fa4454] bg-[#0f1419] border-[#2b3d4d] rounded focus:ring-[#fa4454] focus:ring-2"}),(0,i.jsx)("span",{className:"text-sm text-[#768894]",children:"Featured"})]})})]}),(0,i.jsxs)("div",{className:"flex items-center justify-between pt-6",children:[(0,i.jsx)("button",{type:"button",onClick:()=>s&&s("admin-news"),className:"px-6 py-2 text-[#768894] hover:text-white transition-colors",children:"Cancel"}),(0,i.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,i.jsx)("button",{type:"submit",name:"status",value:"draft",onClick:e=>{h((e=>(0,n.A)((0,n.A)({},e),{},{status:"draft"})))},className:"px-6 py-2 bg-[#2b3d4d] text-white rounded-lg hover:bg-[#374555] transition-colors",disabled:f,children:"Save as Draft"}),(0,i.jsx)("button",{type:"submit",name:"status",value:"published",onClick:e=>{h((e=>(0,n.A)((0,n.A)({},e),{},{status:"published"})))},className:"px-6 py-2 bg-[#fa4454] text-white rounded-lg hover:bg-[#e03e4e] transition-colors",disabled:f,children:f?"Saving...":O?"Update":"Publish"})]})]})]})]})}},5920:(e,t,s)=>{s.d(t,{V:()=>n});const n=e=>e?e.startsWith("http://")||e.startsWith("https://")?e:e.startsWith("/storage/")||e.startsWith("/images/")?"".concat("https://staging.mrvl.net").concat(e):(e.includes("/")&&e.startsWith("/"),"".concat("https://staging.mrvl.net","/storage/").concat(e)):null},7571:(e,t,s)=>{s.d(t,{G:()=>r});var n=s(9950),a=s(5150);const r=e=>{const[t,s]=(0,n.useState)(!1),[r,l]=(0,n.useState)([]),[o,i]=(0,n.useState)(0),[c,d]=(0,n.useState)(""),[u,m]=(0,n.useState)(-1),[x,h]=(0,n.useState)(!1),[p,g]=(0,n.useState)({top:0,left:0}),f=(0,n.useRef)(null),b=(0,n.useRef)(null),{api:v}=(0,a.As)(),w=(0,n.useCallback)(function(e,t){let s;return function(){for(var n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];const l=()=>{clearTimeout(s),e(...a)};clearTimeout(s),s=setTimeout(l,t)}}((async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"all";if(e.length<1)return l([]),void h(!1);try{let n;h(!0),console.log("[Mention] Searching for:",e,"type:",t),console.log("[Mention] API object:",v);try{n=await v.get("/public/mentions/search?q=".concat(encodeURIComponent(e),"&type=").concat(t,"&limit=8"))}catch(s){console.log("[Mention] API call failed, trying direct fetch:",s);const a=await fetch("https://staging.mrvl.net/api/public/mentions/search?q=".concat(encodeURIComponent(e),"&type=").concat(t,"&limit=8"));n={data:await a.json()}}console.log("[Mention] Search response:",n.data),(n.data.success||n.data.data)&&(l(n.data.data||[]),i(0))}catch(n){console.error("Error searching mentions:",n),l([])}finally{h(!1)}}),300),[v]),y=(0,n.useCallback)((async()=>{try{let t;h(!0),console.log("[Mention] Getting popular mentions"),console.log("[Mention] API object:",v);try{t=await v.get("/public/mentions/popular?limit=6")}catch(e){console.log("[Mention] API call failed, trying direct fetch:",e);const s=await fetch("https://staging.mrvl.net/api/public/mentions/popular?limit=6");t={data:await s.json()}}console.log("[Mention] Popular response:",t.data),(t.data||t.data.data)&&(l(t.data.data||t.data||[]),i(0))}catch(t){console.error("Error fetching popular mentions:",t),l([])}finally{h(!1)}}),[v]),j=()=>{if(!f.current)return{top:0,left:0};const e=f.current.getBoundingClientRect(),t={top:e.bottom+window.scrollY+5,left:e.left+window.scrollX};return console.log("[Mention] Dropdown position calculated:",t,"rect:",e),t};return(0,n.useEffect)((()=>{const e=e=>{b.current&&!b.current.contains(e.target)&&f.current&&!f.current.contains(e.target)&&s(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)}),[]),{textareaRef:f,dropdownRef:b,showDropdown:t,mentionResults:r,selectedIndex:o,loading:x,dropdownPosition:p,handleInputChange:(e,t)=>{const n=e.target.value,a=e.target.selectionStart;t&&t(e);const r=n.substring(0,a),o=r.match(/@([a-zA-Z0-9_]*)$/);if(o){const e=o[1],t=a-o[0].length;console.log("[Mention] @ detected at position:",t,"query:",e),console.log("[Mention] Setting dropdown visible"),m(t),d(e),s(!0);const n=j();return console.log("[Mention] Setting dropdown position:",n),g(n),void(0===e.length?(console.log("[Mention] Calling getPopularMentions"),y()):(console.log("[Mention] Calling searchMentions with query:",e),w(e)))}const i=r.match(/@team:([a-zA-Z0-9_]*)$/);if(i){const e=i[1],t=a-i[0].length;return m(t),d(e),s(!0),g(j()),void w(e,"team")}const c=r.match(/@player:([a-zA-Z0-9_]*)$/);if(c){const e=c[1],t=a-c[0].length;return m(t),d(e),s(!0),g(j()),void w(e,"player")}s(!1),l([]),m(-1)},handleKeyDown:(e,n)=>{if(n&&n(e),t&&0!==r.length){switch(e.key){case"ArrowDown":e.preventDefault(),i((e=>(e+1)%r.length));break;case"ArrowUp":e.preventDefault(),i((e=>0===e?r.length-1:e-1));break;case"Enter":case"Tab":if(t&&r[o])return e.preventDefault(),{selectMention:r[o]};break;case"Escape":s(!1),l([])}return null}},selectMention:(t,n,a)=>{if(-1===u||!f.current)return;const r=a.substring(0,u),o=a.substring(f.current.selectionStart),i=r+t.mention_text+" "+o,c=r.length+t.mention_text.length+1;n(i),setTimeout((()=>{f.current&&(f.current.setSelectionRange(c,c),f.current.focus())}),0),s(!1),l([]),m(-1),e&&e(t)},setShowDropdown:s,setSelectedIndex:i}}}}]);