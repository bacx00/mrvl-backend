"use strict";(self.webpackChunkmrvl_frontend=self.webpackChunkmrvl_frontend||[]).push([[781],{2393:(e,t,a)=>{a.d(t,{A:()=>r});a(9950);var s=a(5920),n=a(4414);const r=e=>{let{show:t,results:a,selectedIndex:r,loading:l,position:i,onSelect:o,query:c="",dropdownRef:d}=e;if(console.log("[MentionDropdown] Render - show:",t,"results:",null===a||void 0===a?void 0:a.length,"position:",i),!t)return null;const u=e=>{switch(e){case"user":return(0,n.jsx)("div",{className:"w-6 h-6 bg-[#4ade80]/20 text-[#4ade80] rounded-full flex items-center justify-center text-xs font-medium",children:"U"});case"team":return(0,n.jsx)("div",{className:"w-6 h-6 bg-[#fa4454]/20 text-[#fa4454] rounded-full flex items-center justify-center text-xs font-medium",children:"T"});case"player":return(0,n.jsx)("div",{className:"w-6 h-6 bg-[#3b82f6]/20 text-[#3b82f6] rounded-full flex items-center justify-center text-xs font-medium",children:"P"});default:return null}};return(0,n.jsx)("div",{ref:d,className:"absolute bg-[#1a2332] border border-[#2b3d4d] rounded-lg shadow-xl max-h-64 overflow-y-auto min-w-[280px]",style:{top:i.top||0,left:i.left||0,zIndex:99999,position:"fixed",display:t?"block":"none"},children:l?(0,n.jsxs)("div",{className:"p-3 text-center text-[#768894]",children:[(0,n.jsx)("div",{className:"animate-spin w-4 h-4 border-2 border-[#fa4454] border-t-transparent rounded-full mx-auto"}),(0,n.jsx)("span",{className:"text-sm mt-1 block",children:"Searching..."})]}):a.length>0?(0,n.jsxs)(n.Fragment,{children:[0===c.length&&(0,n.jsx)("div",{className:"px-3 py-2 text-xs text-[#768894] border-b border-[#2b3d4d]",children:"Popular mentions"}),a.map(((e,t)=>(0,n.jsxs)("div",{className:"px-3 py-2 cursor-pointer flex items-center space-x-3 hover:bg-[#2b3d4d] ".concat(t===r?"bg-[#fa4454]/10":""),onClick:()=>o(e),children:[e.avatar?(0,n.jsx)("img",{src:(0,s.V)(e.avatar),alt:e.display_name,className:"w-6 h-6 rounded-full object-cover"}):u(e.type),(0,n.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,n.jsx)("div",{className:"text-sm font-medium text-white truncate",children:e.display_name}),(0,n.jsx)("div",{className:"text-xs text-[#768894] truncate",children:e.subtitle})]}),(0,n.jsx)("div",{className:"text-xs text-[#768894] font-mono",children:e.mention_text})]},"".concat(e.type,"-").concat(e.id))))]}):c.length>0?(0,n.jsxs)("div",{className:"p-3 text-center text-[#768894] text-sm",children:['No results found for "',c,'"']}):null})}},2713:(e,t,a)=>{a.d(t,{A:()=>o});var s=a(9950),n=a(4843),r=a(5189),l=a(4414);function i(e){var t;let{video:a}=e;const[n,i]=(0,s.useState)(null),[o,c]=(0,s.useState)(!1),[d,u]=(0,s.useState)(null),[m,x]=(0,s.useState)(!1);(0,s.useEffect)((()=>{a.thumbnail&&!o&&i(a.thumbnail)}),[a.thumbnail,o]),(0,s.useEffect)((()=>{"vlrgg"!==a.type||d||m||(x(!0),(0,r.KZ)(a.originalUrl).then((e=>{if(e){u(e);const t=(0,r.bm)(e);null!==t&&void 0!==t&&t.thumbnail&&i(t.thumbnail)}})).catch((e=>{console.error("Error fetching VLR data:",e)})).finally((()=>{x(!1)})))}),[a.type,a.originalUrl,d,m]);const h=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;switch(e){case"youtube":return"\u25b6\ufe0f";case"twitch-clip":case"twitch-video":return"\ud83c\udfae";case"twitter":return"\ud83d\udc26";case"vlrgg":switch(t){case"match":return"\u2694\ufe0f";case"team":return"\ud83d\udc65";case"event":return"\ud83c\udfc6";case"player":return"\ud83d\udc64";default:return"\ud83c\udfaf"}default:return"\ud83d\udcfa"}};return(0,l.jsxs)("div",{className:"flex items-start space-x-3 p-3 bg-white dark:bg-gray-800/50 rounded-md border border-gray-200 dark:border-gray-700",children:[(0,l.jsx)("div",{className:"flex-shrink-0",children:n&&!o?(0,l.jsx)("img",{src:n,alt:"Video thumbnail",className:"w-16 h-12 object-cover rounded",onError:()=>{c(!0),i(null)}}):(0,l.jsxs)("div",{className:"w-16 h-12 bg-gray-200 dark:bg-gray-700 rounded flex items-center justify-center text-2xl relative",children:[h(a.type,a.contentType),m&&"vlrgg"===a.type&&(0,l.jsx)("div",{className:"absolute inset-0 bg-gray-200/80 dark:bg-gray-700/80 rounded flex items-center justify-center",children:(0,l.jsx)("div",{className:"w-3 h-3 border-2 border-orange-600 border-t-transparent rounded-full animate-spin"})})]})}),(0,l.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,l.jsxs)("div",{className:"flex items-center space-x-2 mb-1",children:[(0,l.jsxs)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ".concat((e=>{switch(e){case"youtube":return"bg-red-100 dark:bg-red-900/30 text-red-800 dark:text-red-200";case"twitch-clip":case"twitch-video":return"bg-purple-100 dark:bg-purple-900/30 text-purple-800 dark:text-purple-200";case"twitter":return"bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-200";case"vlrgg":return"bg-orange-100 dark:bg-orange-900/30 text-orange-800 dark:text-orange-200";default:return"bg-gray-100 dark:bg-gray-800 text-gray-800 dark:text-gray-200"}})(a.type)),children:[h(a.type,a.contentType)," ",a.platformName,a.contentType&&"vlrgg"===a.type&&(0,l.jsxs)("span",{className:"ml-1 opacity-75",children:["(",a.contentType,")"]})]}),a.isValid?(0,l.jsx)("span",{className:"text-green-600 dark:text-green-400 text-xs",children:"\u2713 Valid"}):(0,l.jsx)("span",{className:"text-red-600 dark:text-red-400 text-xs",children:"\u2717 Error"})]}),"vlrgg"===a.type&&d?(0,l.jsxs)("div",{className:"space-y-1",children:[(0,l.jsx)("div",{className:"text-sm text-gray-900 dark:text-gray-100 font-medium",children:d.slug.replace(/-/g," ").replace(/\b\w/g,(e=>e.toUpperCase()))}),d.matchData&&(0,l.jsxs)("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:[(null===(t=d.matchData.event)||void 0===t?void 0:t.name)&&(0,l.jsxs)("div",{children:["\ud83d\udcc5 ",d.matchData.event.name]}),d.matchData.status&&(0,l.jsxs)("div",{children:["\ud83c\udfaf Status: ",d.matchData.status]}),d.matchData.teams&&d.matchData.teams.length>=2&&(0,l.jsxs)("div",{children:["\u2694\ufe0f ",d.matchData.teams.map((e=>e.name)).join(" vs ")]})]}),d.teamData&&(0,l.jsxs)("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:[d.teamData.region&&(0,l.jsxs)("div",{children:["\ud83c\udf0d ",d.teamData.region]}),d.teamData.rank&&(0,l.jsxs)("div",{children:["\ud83c\udfc6 Rank: #",d.teamData.rank]})]})]}):(0,l.jsx)("div",{className:"text-sm text-gray-900 dark:text-gray-100 truncate",title:a.originalUrl,children:"vlrgg"===a.type?"".concat(a.contentType,": ").concat(a.slug):"ID: ".concat(a.id)}),a.error&&(0,l.jsx)("div",{className:"text-xs text-red-600 dark:text-red-400 mt-1",children:a.error}),(0,l.jsx)("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1 truncate",title:a.originalUrl,children:a.displayUrl||a.originalUrl})]}),(0,l.jsx)("div",{className:"flex-shrink-0 flex items-center space-x-2",children:(0,l.jsx)("a",{href:a.originalUrl,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-200 text-xs",title:"Open in new tab",children:"\ud83d\udd17"})})]})}const o=function(e){let{content:t,onVideoDetected:a,className:r=""}=e;const[o,c]=(0,s.useState)([]),[d,u]=(0,s.useState)(!0);return(0,s.useEffect)((()=>{if(!t)return void c([]);const e=(0,n.ww)(t);c(e),a&&a(e)}),[t,a]),o.length&&d?(0,l.jsx)("div",{className:"video-preview-container mt-4 ".concat(r),children:(0,l.jsxs)("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,l.jsxs)("h4",{className:"text-sm font-medium text-blue-900 dark:text-blue-100 flex items-center",children:["\ud83c\udfaf Content Embeds Detected (",o.length,")"]}),(0,l.jsx)("button",{onClick:()=>{u(!1)},className:"text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-200 text-sm",title:"Hide preview",children:"\u2715"})]}),(0,l.jsx)("div",{className:"space-y-3",children:o.map(((e,t)=>(0,l.jsx)(i,{video:e},t)))}),(0,l.jsxs)("div",{className:"mt-3 text-xs text-blue-700 dark:text-blue-300",children:[(0,l.jsx)("strong",{children:"This content will be automatically embedded in your article."}),(0,l.jsx)("br",{}),"Supported platforms: YouTube, Twitch (clips & videos), Twitter/X, VLR.gg (esports content)"]})]})}):null}},5920:(e,t,a)=>{a.d(t,{V:()=>s});const s=e=>e?e.startsWith("http://")||e.startsWith("https://")?e:e.startsWith("/storage/")||e.startsWith("/images/")?"".concat("https://staging.mrvl.net").concat(e):(e.includes("/")&&e.startsWith("/"),"".concat("https://staging.mrvl.net","/storage/").concat(e)):null},6781:(e,t,a)=>{a.d(t,{A:()=>m});var s=a(2555),n=a(9950),r=a(5150),l=a(7571),i=a(4758),o=a(2393),c=a(2713),d=a(4843),u=a(4414);const m=function(e){let{newsId:t,navigateTo:a}=e;const[m,x]=(0,n.useState)({title:"",excerpt:"",content:"",category:"updates",status:"draft",featured:!1,image:"",publishedAt:"",tags:[],metaTitle:"",metaDescription:"",slug:"",authorNotes:"",relatedMatches:[],relatedTeams:[],relatedPlayers:[]}),[h,g]=(0,n.useState)(!1),[p,v]=(0,n.useState)(!1),[b,f]=(0,n.useState)(null),[y,w]=(0,n.useState)(""),[j,N]=(0,n.useState)(!1),[k,A]=(0,n.useState)([]),[D,S]=(0,n.useState)([]),[C,T]=(0,n.useState)([]),[I,E]=(0,n.useState)(0),[M,R]=(0,n.useState)([]),[_,U]=(0,n.useState)(!0),[P,V]=(0,n.useState)({words:0,characters:0,videos:0,mentions:0}),{api:q}=(0,r.As)(),{textareaRef:K,dropdownRef:L,showDropdown:W,mentionResults:F,selectedIndex:G,loading:B,dropdownPosition:Y,handleInputChange:z,handleKeyDown:Z,selectMention:O}=(0,l.G)(),{textareaRef:$,dropdownRef:H,showDropdown:X,mentionResults:J,selectedIndex:Q,loading:ee,dropdownPosition:te,handleInputChange:ae,handleKeyDown:se,selectMention:ne}=(0,l.G)(),{textareaRef:re,dropdownRef:le,showDropdown:ie,mentionResults:oe,selectedIndex:ce,loading:de,dropdownPosition:ue,handleInputChange:me,handleKeyDown:xe,selectMention:he}=(0,l.G)(),ge=Boolean(t);(0,n.useEffect)((()=>{(async()=>{if(ge)try{g(!0);const e=await q.get("/admin/news/".concat(t)),a=e.data||e;x({title:a.title||"",excerpt:a.excerpt||"",content:a.content||"",category:a.category||"updates",status:a.status||"draft",featured:a.featured||!1,image:a.featured_image||a.image||"",publishedAt:a.published_at?a.published_at.split("T")[0]:"",tags:a.tags||[]})}catch(e){console.error("Error fetching news:",e),alert("Error loading news data")}finally{g(!1)}})()}),[t,ge]),(0,n.useEffect)((()=>{ve()}),[m.title,m.excerpt,m.content]);const pe=e=>{const{name:t,value:a,type:n,checked:r}=e.target;x((e=>(0,s.A)((0,s.A)({},e),{},{[t]:"checkbox"===n?r:a})))},ve=()=>{const e=m.content||"",t=m.title||"",a=m.excerpt||"",s="".concat(t," ").concat(a," ").concat(e),n=s.trim().split(/\s+/).filter((e=>e.length>0)).length,r=e.length,l=(0,d.ww)(e),i=(s.match(/\w+|team:\w+|player:\w+/g)||[]).length;V({words:n,characters:r,videos:l.length,mentions:i}),R(l)},be=()=>{y.trim()&&!m.tags.includes(y.trim())&&(x((e=>(0,s.A)((0,s.A)({},e),{},{tags:[...e.tags,y.trim()]}))),w(""))};return h?(0,u.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,u.jsxs)("div",{className:"text-center",children:[(0,u.jsx)("div",{className:"loading-spinner mx-auto mb-4"}),(0,u.jsx)("div",{className:"text-gray-600 dark:text-gray-400",children:"Loading news data..."})]})}):(0,u.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,u.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,u.jsxs)("div",{children:[(0,u.jsx)("h2",{className:"text-2xl md:text-3xl font-bold text-gray-900 dark:text-white",children:ge?"Edit News Article":"Create News Article"}),(0,u.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:ge?"Update news article":"Create a new news article"})]}),(0,u.jsx)("button",{onClick:()=>a&&a("admin-news"),className:"px-4 py-2 text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white transition-colors",children:"\u2190 Back to News"})]}),(0,u.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),m.title.trim())if(m.excerpt.trim())if(m.content.trim())if(m.content.trim().length<50)alert("Content must be at least 50 characters long");else{v(!0);try{var n,r,l;const{processedContent:e,videos:g}=(0,d.KR)(m.content.trim()),p={title:m.title.trim(),excerpt:m.excerpt.trim(),content:e,category_id:"updates"===m.category?1:"esports"===m.category?2:"balance"===m.category?3:"community"===m.category?4:"content"===m.category?5:"events"===m.category?6:1,status:m.status,featured:m.featured,featured_image:(b?null:m.image)||null,published_at:m.publishedAt||null,tags:m.tags,videos:g.map((e=>({platform:e.type,video_id:e.id,embed_url:e.embedUrl||null,original_url:e.originalUrl})))};let v;if(v=ge?await q.put("/admin/news/".concat(t),p):await q.post("/admin/news",p),b&&(ge||null!==(n=v)&&void 0!==n&&null!==(r=n.data)&&void 0!==r&&null!==(l=r.data)&&void 0!==l&&l.id)){const e=ge?t:v.data.data.id,a=new FormData;a.append("image",b),a.append("news_id",e);try{var i,o,c;const e=await q.postFile("/admin/news/media/featured-image",a);if(console.log("Featured image upload response:",e),null!==e&&void 0!==e&&null!==(i=e.data)&&void 0!==i&&null!==(o=i.data)&&void 0!==o&&o.path||null!==e&&void 0!==e&&null!==(c=e.data)&&void 0!==c&&c.path){var u;const t=(null===(u=e.data.data)||void 0===u?void 0:u.path)||e.data.path;console.log("Image upload successful, path:",t),x((e=>(0,s.A)((0,s.A)({},e),{},{image:t})))}}catch(h){console.error("Error uploading image:",h),alert("Image uploaded but there was an error updating the article. Please try uploading the image again.")}}alert("News article ".concat(ge?"updated":"created"," successfully!")),a&&a("admin-news")}catch(g){console.error("Error saving news:",g),alert("Error ".concat(ge?"updating":"creating"," news article: ").concat(g.message))}finally{v(!1)}}else alert("Content is required");else alert("Excerpt is required");else alert("Title is required")},className:"space-y-6",children:[(0,u.jsxs)("div",{className:"card p-6",children:[(0,u.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Article Content"}),(0,u.jsxs)("div",{className:"space-y-6",children:[(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-900 dark:text-gray-100 mb-2",children:"Featured Image"}),(0,u.jsx)(i.A,{onImageSelect:(e,t)=>{f(e),x((e=>(0,s.A)((0,s.A)({},e),{},{image:t||""})))},currentImage:m.image,placeholder:"Upload Article Image",className:"w-full max-w-md"})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-900 dark:text-gray-100 mb-2",children:"Title *"}),(0,u.jsxs)("div",{className:"relative",children:[(0,u.jsx)("input",{ref:re,type:"text",name:"title",value:m.title,onChange:e=>{pe(e),me(e,null),ve()},onKeyDown:e=>{const t=xe(e,null);null!==t&&void 0!==t&&t.selectMention&&he(t.selectMention,(e=>{x((t=>(0,s.A)((0,s.A)({},t),{},{title:e})))}),m.title)},className:"form-input",placeholder:"Enter article title... (Type  to mention teams/players)",required:!0}),(0,u.jsx)(o.A,{show:ie,results:oe,selectedIndex:ce,loading:de,position:ue,onSelect:e=>he(e,(e=>{x((t=>(0,s.A)((0,s.A)({},t),{},{title:e})))}),m.title),dropdownRef:le})]})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-900 dark:text-gray-100 mb-2",children:"Excerpt *"}),(0,u.jsxs)("div",{className:"relative",children:[(0,u.jsx)("textarea",{ref:$,name:"excerpt",value:m.excerpt,onChange:e=>{pe(e),ae(e,null),ve()},onKeyDown:e=>{const t=se(e,null);null!==t&&void 0!==t&&t.selectMention&&ne(t.selectMention,(e=>{x((t=>(0,s.A)((0,s.A)({},t),{},{excerpt:e})))}),m.excerpt)},rows:2,className:"form-input",placeholder:"Brief summary of the article... (Type  to mention teams/players)",required:!0}),(0,u.jsx)(o.A,{show:X,results:J,selectedIndex:Q,loading:ee,position:te,onSelect:e=>ne(e,(e=>{x((t=>(0,s.A)((0,s.A)({},t),{},{excerpt:e})))}),m.excerpt),dropdownRef:H})]}),(0,u.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Short description that appears in article previews. Type  to mention teams, players, or users!"})]}),(0,u.jsxs)("div",{children:[(0,u.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,u.jsx)("label",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:"Content *"}),(0,u.jsxs)("div",{className:"flex items-center space-x-4 text-xs text-gray-500 dark:text-gray-400",children:[(0,u.jsxs)("span",{className:P.characters<50?"text-red-500":"",children:[P.characters," chars"]}),(0,u.jsxs)("span",{children:[P.words," words"]}),P.videos>0&&(0,u.jsxs)("span",{className:"text-blue-600 dark:text-blue-400",children:[P.videos," video",1!==P.videos?"s":""]}),P.mentions>0&&(0,u.jsxs)("span",{className:"text-purple-600 dark:text-purple-400",children:[P.mentions," mention",1!==P.mentions?"s":""]})]})]}),(0,u.jsxs)("div",{className:"relative",children:[(0,u.jsx)("textarea",{ref:K,name:"content",value:m.content,onChange:e=>{pe(e),z(e,null),setTimeout((()=>ve()),300)},onKeyDown:e=>{const t=Z(e,null);null!==t&&void 0!==t&&t.selectMention&&O(t.selectMention,(e=>{x((t=>(0,s.A)((0,s.A)({},t),{},{content:e})))}),m.content)},rows:12,className:"form-input",placeholder:"Write your article content here...  Type  to mention teams, players, or users Add video links (YouTube, Twitch, Twitter): \u2022 YouTube: https://youtube.com/watch?v=VIDEO_ID \u2022 Twitch Clips: https://clips.twitch.tv/CLIP_ID   \u2022 Twitch Videos: https://twitch.tv/videos/VIDEO_ID \u2022 Twitter: https://twitter.com/user/status/TWEET_ID Add VLR.gg esports content: \u2022 Matches: https://vlr.gg/12345/match-name \u2022 Teams: https://vlr.gg/team/123/team-name \u2022 Events: https://vlr.gg/event/456/tournament-name \u2022 Players: https://vlr.gg/player/789/player-name All content will auto-embed with rich previews and metadata!",required:!0}),(0,u.jsx)(o.A,{show:W,results:F,selectedIndex:G,loading:B,position:Y,onSelect:e=>O(e,(e=>{x((t=>(0,s.A)((0,s.A)({},t),{},{content:e})))}),m.content),dropdownRef:L})]}),(0,u.jsxs)("div",{className:"mt-2 text-xs text-gray-500 dark:text-gray-400",children:[(0,u.jsx)("strong",{children:"Content Guidelines:"}),(0,u.jsxs)("ul",{className:"list-disc ml-4 mt-1 space-y-1",children:[(0,u.jsx)("li",{children:"Minimum 50 characters required for publication"}),(0,u.jsxs)("li",{children:["Use ",(0,u.jsx)("code",{children:"username"})," to mention users, ",(0,u.jsx)("code",{children:"team:name"})," for teams, ",(0,u.jsx)("code",{children:"player:name"})," for players"]}),(0,u.jsx)("li",{children:"Paste video/content URLs directly - they'll auto-embed! (YouTube, Twitch clips/videos, Twitter, VLR.gg matches/teams/events)"}),(0,u.jsx)("li",{children:"Write in engaging, professional esports journalism style"}),(0,u.jsx)("li",{children:"Include relevant context and background information"})]})]}),m.content&&_&&(0,u.jsx)(c.A,{content:m.content,onVideoDetected:e=>{R(e)},className:"mt-3"})]})]})]}),(0,u.jsxs)("div",{className:"card p-6",children:[(0,u.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Article Settings"}),(0,u.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-900 dark:text-gray-100 mb-2",children:"Category"}),(0,u.jsx)("select",{name:"category",value:m.category,onChange:pe,className:"form-input",children:[{value:"updates",label:"Game Updates"},{value:"esports",label:"Esports"},{value:"balance",label:"Hero Balance"},{value:"community",label:"Community"},{value:"content",label:"Dev Insights"},{value:"events",label:"Analysis"}].map((e=>(0,u.jsx)("option",{value:e.value,children:e.label},e.value)))})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-900 dark:text-gray-100 mb-2",children:"Status"}),(0,u.jsxs)("select",{name:"status",value:m.status,onChange:pe,className:"form-input",children:[(0,u.jsx)("option",{value:"draft",children:"Draft"}),(0,u.jsx)("option",{value:"published",children:"Published"}),(0,u.jsx)("option",{value:"scheduled",children:"Scheduled"}),(0,u.jsx)("option",{value:"archived",children:"Archived"})]})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-900 dark:text-gray-100 mb-2",children:"Publish Date"}),(0,u.jsx)("input",{type:"date",name:"publishedAt",value:m.publishedAt,onChange:pe,className:"form-input"}),(0,u.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Leave blank to publish immediately"})]}),(0,u.jsxs)("div",{className:"flex items-center",children:[(0,u.jsx)("input",{type:"checkbox",name:"featured",checked:m.featured,onChange:pe,className:"mr-2",id:"featured"}),(0,u.jsx)("label",{htmlFor:"featured",className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:"Feature this article"})]})]})]}),(0,u.jsxs)("div",{className:"card p-6",children:[(0,u.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Tags"}),(0,u.jsxs)("div",{className:"space-y-4",children:[(0,u.jsxs)("div",{className:"flex space-x-2",children:[(0,u.jsx)("input",{type:"text",value:y,onChange:e=>w(e.target.value),onKeyPress:e=>"Enter"===e.key&&(e.preventDefault(),be()),className:"form-input flex-1",placeholder:"Add a tag..."}),(0,u.jsx)("button",{type:"button",onClick:be,className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors",children:"Add"})]}),m.tags.length>0&&(0,u.jsx)("div",{className:"flex flex-wrap gap-2",children:m.tags.map((e=>(0,u.jsxs)("span",{className:"px-3 py-1 bg-gray-200 dark:bg-gray-700 text-gray-900 dark:text-gray-100 rounded-full text-sm flex items-center space-x-2",children:[(0,u.jsx)("span",{children:e}),(0,u.jsx)("button",{type:"button",onClick:()=>{return t=e,void x((e=>(0,s.A)((0,s.A)({},e),{},{tags:e.tags.filter((e=>e!==t))})));var t},className:"text-red-500 hover:text-red-700",children:"\xd7"})]},e)))})]})]}),(0,u.jsxs)("div",{className:"flex justify-end space-x-4",children:[(0,u.jsx)("button",{type:"button",onClick:()=>a&&a("admin-news"),className:"px-6 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-md hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:"Cancel"}),(0,u.jsx)("button",{type:"submit",disabled:p,className:"px-6 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:p?(0,u.jsxs)("span",{className:"flex items-center",children:[(0,u.jsx)("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),ge?"Updating...":"Creating..."]}):ge?"Update Article":"Create Article"})]})]})]})}},7571:(e,t,a)=>{a.d(t,{G:()=>r});var s=a(9950),n=a(5150);const r=e=>{const[t,a]=(0,s.useState)(!1),[r,l]=(0,s.useState)([]),[i,o]=(0,s.useState)(0),[c,d]=(0,s.useState)(""),[u,m]=(0,s.useState)(-1),[x,h]=(0,s.useState)(!1),[g,p]=(0,s.useState)({top:0,left:0}),v=(0,s.useRef)(null),b=(0,s.useRef)(null),{api:f}=(0,n.As)(),y=(0,s.useCallback)(function(e,t){let a;return function(){for(var s=arguments.length,n=new Array(s),r=0;r<s;r++)n[r]=arguments[r];const l=()=>{clearTimeout(a),e(...n)};clearTimeout(a),a=setTimeout(l,t)}}((async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"all";if(e.length<1)return l([]),void h(!1);try{let s;h(!0),console.log("[Mention] Searching for:",e,"type:",t),console.log("[Mention] API object:",f);try{s=await f.get("/public/mentions/search?q=".concat(encodeURIComponent(e),"&type=").concat(t,"&limit=8"))}catch(a){console.log("[Mention] API call failed, trying direct fetch:",a);const n=await fetch("https://staging.mrvl.net/api/public/mentions/search?q=".concat(encodeURIComponent(e),"&type=").concat(t,"&limit=8"));s={data:await n.json()}}console.log("[Mention] Search response:",s.data),(s.data.success||s.data.data)&&(l(s.data.data||[]),o(0))}catch(s){console.error("Error searching mentions:",s),l([])}finally{h(!1)}}),300),[f]),w=(0,s.useCallback)((async()=>{try{let t;h(!0),console.log("[Mention] Getting popular mentions"),console.log("[Mention] API object:",f);try{t=await f.get("/public/mentions/popular?limit=6")}catch(e){console.log("[Mention] API call failed, trying direct fetch:",e);const a=await fetch("https://staging.mrvl.net/api/public/mentions/popular?limit=6");t={data:await a.json()}}console.log("[Mention] Popular response:",t.data),(t.data||t.data.data)&&(l(t.data.data||t.data||[]),o(0))}catch(t){console.error("Error fetching popular mentions:",t),l([])}finally{h(!1)}}),[f]),j=()=>{if(!v.current)return{top:0,left:0};const e=v.current.getBoundingClientRect(),t={top:e.bottom+window.scrollY+5,left:e.left+window.scrollX};return console.log("[Mention] Dropdown position calculated:",t,"rect:",e),t};return(0,s.useEffect)((()=>{const e=e=>{b.current&&!b.current.contains(e.target)&&v.current&&!v.current.contains(e.target)&&a(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)}),[]),{textareaRef:v,dropdownRef:b,showDropdown:t,mentionResults:r,selectedIndex:i,loading:x,dropdownPosition:g,handleInputChange:(e,t)=>{const s=e.target.value,n=e.target.selectionStart;t&&t(e);const r=s.substring(0,n),i=r.match(/@([a-zA-Z0-9_]*)$/);if(i){const e=i[1],t=n-i[0].length;console.log("[Mention] @ detected at position:",t,"query:",e),console.log("[Mention] Setting dropdown visible"),m(t),d(e),a(!0);const s=j();return console.log("[Mention] Setting dropdown position:",s),p(s),void(0===e.length?(console.log("[Mention] Calling getPopularMentions"),w()):(console.log("[Mention] Calling searchMentions with query:",e),y(e)))}const o=r.match(/@team:([a-zA-Z0-9_]*)$/);if(o){const e=o[1],t=n-o[0].length;return m(t),d(e),a(!0),p(j()),void y(e,"team")}const c=r.match(/@player:([a-zA-Z0-9_]*)$/);if(c){const e=c[1],t=n-c[0].length;return m(t),d(e),a(!0),p(j()),void y(e,"player")}a(!1),l([]),m(-1)},handleKeyDown:(e,s)=>{if(s&&s(e),t&&0!==r.length){switch(e.key){case"ArrowDown":e.preventDefault(),o((e=>(e+1)%r.length));break;case"ArrowUp":e.preventDefault(),o((e=>0===e?r.length-1:e-1));break;case"Enter":case"Tab":if(t&&r[i])return e.preventDefault(),{selectMention:r[i]};break;case"Escape":a(!1),l([])}return null}},selectMention:(t,s,n)=>{if(-1===u||!v.current)return;const r=n.substring(0,u),i=n.substring(v.current.selectionStart),o=r+t.mention_text+" "+i,c=r.length+t.mention_text.length+1;s(o),setTimeout((()=>{v.current&&(v.current.setSelectionRange(c,c),v.current.focus())}),0),a(!1),l([]),m(-1),e&&e(t)},setShowDropdown:a,setSelectedIndex:o}}}}]);