"use strict";(self.webpackChunkmrvl_frontend=self.webpackChunkmrvl_frontend||[]).push([[523],{2523:(e,t,r)=>{r.r(t),r.d(t,{default:()=>l});var a=r(9950),s=r(5150),n=r(6225),d=r(4414);const l=function(e){let{navigateTo:t}=e;const[r,l]=(0,a.useState)([]),[i,o]=(0,a.useState)(!0),[c,x]=(0,a.useState)("ongoing"),[g,m]=(0,a.useState)(""),[h,u]=(0,a.useState)("all"),{api:v,isAdmin:p,isModerator:y}=(0,s.As)();(0,a.useEffect)((()=>{b()}),[]);const b=async()=>{try{var e;o(!0),console.log("EventsPage: Fetching events from API...");const t="/events?sort=recent",r=await v.get(t),a=(null===(e=r.data)||void 0===e?void 0:e.data)||r.data||[];console.log("Events fetched:",a),l(a)}catch(t){console.error("Error fetching events:",t),l([])}finally{o(!1)}},f=(()=>{let e=r;switch(c){case"upcoming":e=e.filter((e=>"upcoming"===e.status));break;case"ongoing":e=e.filter((e=>"ongoing"===e.status||"live"===e.status));break;case"completed":e=e.filter((e=>"completed"===e.status))}return"all"!==h&&(e=e.filter((e=>e.region===h))),g&&(e=e.filter((e=>e.name.toLowerCase().includes(g.toLowerCase())||e.description&&e.description.toLowerCase().includes(g.toLowerCase())))),e})(),j=e=>{var r,a,s,l,i,o;let{event:c}=e;const x=e=>e&&0!==e?"string"===typeof e?e:"$".concat(e.toLocaleString()):null;return(0,d.jsx)("div",{className:"border-b border-gray-200 dark:border-gray-700 p-4 hover:bg-gray-50 dark:hover:bg-gray-800/50 cursor-pointer transition-colors",onClick:()=>t&&t("event-detail",{id:c.id}),children:(0,d.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,d.jsx)("div",{className:"w-16 h-16 rounded-lg overflow-hidden bg-gray-100 dark:bg-gray-800 flex-shrink-0",children:(0,d.jsx)("img",{src:(0,n.NR)(c),alt:c.name,className:"w-full h-full object-cover",onError:e=>{e.target.style.display="none",e.target.parentNode.innerHTML='<div class="w-full h-full flex items-center justify-center text-2xl font-bold text-gray-500 dark:text-gray-400">?</div>'}})}),(0,d.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,d.jsxs)("div",{className:"flex items-start justify-between mb-1",children:[(0,d.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white truncate pr-2",children:c.name}),(0,d.jsxs)("span",{className:"px-2 py-1 rounded text-xs font-medium flex-shrink-0 ".concat((e=>{switch(e){case"live":case"ongoing":return"bg-red-600 text-white";case"upcoming":return"bg-blue-600 text-white";case"completed":return"bg-gray-600 text-white";default:return"bg-gray-400 text-white"}})(c.status)," ").concat("live"===c.status?"animate-pulse":""),children:["live"===c.status&&(0,d.jsx)("span",{className:"w-2 h-2 bg-white rounded-full mr-1 animate-pulse"}),c.status.toUpperCase()]})]}),(0,d.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("span",{className:"text-gray-500 dark:text-gray-500",children:"Date:"}),(0,d.jsx)("div",{className:"font-medium text-gray-900 dark:text-white",children:(()=>{var e,t;const r=new Date((null===(e=c.schedule)||void 0===e?void 0:e.start_date)||c.start_date),a=new Date((null===(t=c.schedule)||void 0===t?void 0:t.end_date)||c.end_date);return r.toDateString()===a.toDateString()?r.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"".concat(r.toLocaleDateString("en-US",{month:"short",day:"numeric"})," - ").concat(a.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}))})()})]}),x((null===(r=c.details)||void 0===r?void 0:r.prize_pool)||c.prize_pool)&&(0,d.jsxs)("div",{children:[(0,d.jsx)("span",{className:"text-gray-500 dark:text-gray-500",children:"Prize Pool:"}),(0,d.jsx)("div",{className:"font-medium text-green-600 dark:text-green-400",children:x((null===(a=c.details)||void 0===a?void 0:a.prize_pool)||c.prize_pool)})]}),((null===(s=c.details)||void 0===s?void 0:s.region)||c.region)&&(0,d.jsxs)("div",{children:[(0,d.jsx)("span",{className:"text-gray-500 dark:text-gray-500",children:"Region:"}),(0,d.jsx)("div",{className:"font-medium text-gray-900 dark:text-white",children:(null===(l=c.details)||void 0===l?void 0:l.region)||c.region})]}),((null===(i=c.details)||void 0===i?void 0:i.format)||c.format)&&(0,d.jsxs)("div",{children:[(0,d.jsx)("span",{className:"text-gray-500 dark:text-gray-500",children:"Format:"}),(0,d.jsx)("div",{className:"font-medium text-gray-900 dark:text-white",children:(null===(o=c.details)||void 0===o?void 0:o.format)||c.format})]})]})]})]})})};return i?(0,d.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,d.jsxs)("div",{className:"text-center",children:[(0,d.jsx)("div",{className:"loading-spinner mx-auto mb-4"}),(0,d.jsx)("div",{className:"text-gray-600 dark:text-gray-400",children:"Loading events..."})]})}):(0,d.jsxs)("div",{className:"max-w-6xl mx-auto",children:[(0,d.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,d.jsx)("h1",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Events"}),(p()||y())&&(0,d.jsx)("button",{onClick:()=>t&&t("admin-event-create"),className:"px-3 py-1.5 bg-red-600 text-white text-sm rounded hover:bg-red-700 transition-colors",children:"Create Event"})]}),(0,d.jsxs)("div",{className:"card",children:[(0,d.jsxs)("div",{className:"flex border-b border-gray-200 dark:border-gray-700",children:[(0,d.jsxs)("button",{onClick:()=>x("upcoming"),className:"flex-1 px-4 py-3 text-sm font-medium transition-colors ".concat("upcoming"===c?"text-red-600 dark:text-red-400 border-b-2 border-red-600 dark:border-red-400 bg-red-50 dark:bg-red-900/10":"text-gray-700 dark:text-gray-300 hover:text-red-600 dark:hover:text-red-400 hover:bg-gray-50 dark:hover:bg-gray-700/50"),children:["Upcoming (",r.filter((e=>"upcoming"===e.status)).length,")"]}),(0,d.jsx)("button",{onClick:()=>x("ongoing"),className:"flex-1 px-4 py-3 text-sm font-medium transition-colors ".concat("ongoing"===c?"text-red-600 dark:text-red-400 border-b-2 border-red-600 dark:border-red-400 bg-red-50 dark:bg-red-900/10":"text-gray-700 dark:text-gray-300 hover:text-red-600 dark:hover:text-red-400 hover:bg-gray-50 dark:hover:bg-gray-700/50"),children:(0,d.jsxs)("div",{className:"flex items-center justify-center space-x-2",children:[r.filter((e=>"ongoing"===e.status||"live"===e.status)).length>0&&(0,d.jsx)("span",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),(0,d.jsxs)("span",{children:["Ongoing (",r.filter((e=>"ongoing"===e.status||"live"===e.status)).length,")"]})]})}),(0,d.jsxs)("button",{onClick:()=>x("completed"),className:"flex-1 px-4 py-3 text-sm font-medium transition-colors ".concat("completed"===c?"text-red-600 dark:text-red-400 border-b-2 border-red-600 dark:border-red-400 bg-red-50 dark:bg-red-900/10":"text-gray-700 dark:text-gray-300 hover:text-red-600 dark:hover:text-red-400 hover:bg-gray-50 dark:hover:bg-gray-700/50"),children:["Completed (",r.filter((e=>"completed"===e.status)).length,")"]})]}),(0,d.jsx)("div",{className:"p-4",children:(0,d.jsxs)("div",{className:"flex flex-col md:flex-row gap-4",children:[(0,d.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,d.jsx)("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Region:"}),(0,d.jsxs)("select",{value:h,onChange:e=>u(e.target.value),className:"px-3 py-1 text-sm border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[(0,d.jsx)("option",{value:"all",children:"All Regions"}),(0,d.jsx)("option",{value:"NA",children:"North America"}),(0,d.jsx)("option",{value:"EU",children:"Europe"}),(0,d.jsx)("option",{value:"APAC",children:"Asia-Pacific"}),(0,d.jsx)("option",{value:"BR",children:"Brazil"}),(0,d.jsx)("option",{value:"LATAM",children:"LATAM"}),(0,d.jsx)("option",{value:"INTL",children:"International"})]})]}),(0,d.jsxs)("div",{className:"relative flex-1 md:max-w-xs",children:[(0,d.jsx)("input",{type:"text",placeholder:"Search events...",value:g,onChange:e=>m(e.target.value),className:"w-full px-3 py-1 pl-9 text-sm border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400"}),(0,d.jsx)("svg",{className:"absolute left-3 top-1.5 w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]})]})}),f.length>0?(0,d.jsx)("div",{children:f.map((e=>(0,d.jsx)(j,{event:e},e.id)))}):(0,d.jsxs)("div",{className:"py-12 text-center",children:[(0,d.jsx)("div",{className:"text-4xl mb-4"}),(0,d.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:["No ",c," events"]}),(0,d.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:g?'No events matching "'.concat(g,'"'):"upcoming"===c?"No upcoming events scheduled":"ongoing"===c?"No events currently ongoing":"No completed events to show"})]})]})]})}}}]);