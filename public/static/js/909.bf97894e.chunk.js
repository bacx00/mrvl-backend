"use strict";(self.webpackChunkmrvl_frontend=self.webpackChunkmrvl_frontend||[]).push([[909],{3909:(e,s,t)=>{t.r(s),t.d(s,{default:()=>g});var a=t(9950),r=t(5150),n=t(438),i=t(4414);const d=function(e){let{user:s,permission:t,role:a,minRole:r,children:d,fallback:l=null,redirect:c=!1,onUnauthorized:o=null}=e,x=!1;if(t?x=Array.isArray(t)?t.some((e=>(0,n._m)(s,e))):(0,n._m)(s,t):a?x=(0,n.hf)(s,a):r&&(x=(0,n.TD)(s,r)),!x){if(o&&o(),l)return l;const e=(0,n.DF)(s,t||a||r),d=s?(0,n.xI)(s):null;return(0,i.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900",children:(0,i.jsxs)("div",{className:"max-w-md w-full mx-auto text-center p-8",children:[(0,i.jsx)("div",{className:"text-8xl mb-6",children:"\ud83d\udeab"}),(0,i.jsx)("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-4",children:"Access Denied"}),(0,i.jsxs)("div",{className:"space-y-4 mb-8",children:[(0,i.jsx)("p",{className:"text-gray-600 dark:text-gray-400 text-lg",children:e}),s&&d&&(0,i.jsx)("div",{className:"bg-gray-100 dark:bg-gray-800 rounded-lg p-4",children:(0,i.jsxs)("div",{className:"flex items-center justify-center space-x-2 mb-2",children:[(0,i.jsx)("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Your current role:"}),(0,i.jsxs)("span",{className:"px-3 py-1 text-sm font-medium rounded-full ".concat(d.theme.badge),children:[d.icon," ",d.displayName]})]})}),!s&&(0,i.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"You need to be logged in to access this resource."})]}),(0,i.jsxs)("div",{className:"space-y-3",children:[(0,i.jsx)("button",{onClick:()=>window.history.back(),className:"w-full px-6 py-3 bg-gray-600 hover:bg-gray-700 text-white font-semibold rounded-xl transition-colors",children:"Go Back"}),!s&&(0,i.jsx)("button",{onClick:()=>{},className:"w-full px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white font-semibold rounded-xl transition-colors",children:"Sign In"})]})]})})}return(0,i.jsx)(i.Fragment,{children:d})};var l=t(2144),c=t(2730),o=t(6069);function x(e){var s,t;let{navigateTo:d}=e;const[l,x]=(0,a.useState)("overview"),[m,h]=(0,a.useState)({}),[g,p]=(0,a.useState)(!0),{user:y,api:u}=(0,r.As)(),{theme:v,config:j}=(0,c.ZK)();(0,a.useEffect)((()=>{b()}),[]);const b=async()=>{try{p(!0),h({pendingReports:8,resolvedToday:15,activeWarnings:12,forumThreads:1247,flaggedPosts:23,totalUsers:2456,activeUsers:845,banAppeals:3})}catch(e){console.error("Error fetching moderator stats:",e)}finally{p(!1)}},N=[{id:"overview",name:"Overview",icon:"",permission:"moderator_dashboard"},{id:"reports",name:"Reports",icon:"",permission:"content_moderation"},{id:"users",name:"User Moderation",icon:"",permission:"user_warnings"},{id:"content",name:"Content Moderation",icon:"",permission:"content_moderation"},{id:"forums",name:"Forum Management",icon:"",permission:"forum_management"},{id:"matches",name:"Match Verification",icon:"",permission:"match_verification"}],f=N.filter((e=>(0,n._m)(y,e.permission)));return g?(0,i.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,i.jsxs)("div",{className:"text-center",children:[(0,i.jsx)("div",{className:"loading-spinner mx-auto mb-4"}),(0,i.jsx)("div",{className:"text-gray-600 dark:text-gray-400",children:"Loading moderator dashboard..."})]})}):(0,i.jsxs)("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[(0,i.jsx)("header",{className:"bg-white dark:bg-gray-800 shadow-sm border-b border-gray-200 dark:border-gray-700",children:(0,i.jsx)("div",{className:"px-6 py-4",children:(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,i.jsxs)("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:[j.displayName," Dashboard"]}),(0,i.jsx)(o.A,{user:y,size:"md",showIcon:!0,showText:!0})]}),(0,i.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,i.jsxs)("span",{className:"text-gray-600 dark:text-gray-400",children:["Welcome, ",null===y||void 0===y?void 0:y.name]}),(0,i.jsx)("button",{onClick:()=>d("home"),className:"btn btn-secondary",children:"Back to Site"})]})]})})}),(0,i.jsxs)("div",{className:"flex",children:[(0,i.jsx)("nav",{className:"w-64 bg-white dark:bg-gray-800 shadow-sm h-[calc(100vh-73px)] overflow-y-auto",children:(0,i.jsx)("div",{className:"p-4",children:(0,i.jsx)("div",{className:"space-y-2",children:f.map((e=>(0,i.jsxs)("button",{onClick:()=>x(e.id),className:"w-full flex items-center space-x-3 px-4 py-3 rounded-lg text-left transition-all ".concat(l===e.id?"".concat(v.primary," text-white shadow-lg ").concat(v.shadow):"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"),children:[(0,i.jsx)("span",{className:"text-xl",children:e.icon}),(0,i.jsx)("span",{className:"font-medium",children:e.name}),"reports"===e.id&&m.pendingReports>0&&(0,i.jsx)("span",{className:"ml-auto bg-red-500 text-white text-xs rounded-full px-2 py-1",children:m.pendingReports})]},e.id)))})})}),(0,i.jsxs)("main",{className:"flex-1 p-6",children:["overview"===l&&(0,i.jsxs)("div",{className:"space-y-6",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("h2",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:"Moderation Overview"}),(0,i.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"Keep the community safe and engaging"})]}),(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,i.jsxs)("div",{className:"card p-6",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Pending Reports"}),(0,i.jsx)("p",{className:"text-3xl font-bold text-red-600 dark:text-red-400",children:m.pendingReports})]}),(0,i.jsx)("div",{className:"text-4xl"})]}),(0,i.jsx)("div",{className:"mt-2",children:(0,i.jsx)("span",{className:"text-sm text-red-600 dark:text-red-400",children:"Requires attention"})})]}),(0,i.jsxs)("div",{className:"card p-6",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Resolved Today"}),(0,i.jsx)("p",{className:"text-3xl font-bold text-green-600 dark:text-green-400",children:m.resolvedToday})]}),(0,i.jsx)("div",{className:"text-4xl"})]}),(0,i.jsx)("div",{className:"mt-2",children:(0,i.jsx)("span",{className:"text-sm text-green-600 dark:text-green-400",children:"Great work!"})})]}),(0,i.jsxs)("div",{className:"card p-6",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Active Users"}),(0,i.jsx)("p",{className:"text-3xl font-bold text-blue-600 dark:text-blue-400",children:m.activeUsers})]}),(0,i.jsx)("div",{className:"text-4xl"})]}),(0,i.jsx)("div",{className:"mt-2",children:(0,i.jsx)("span",{className:"text-sm text-blue-600 dark:text-blue-400",children:"Online now"})})]}),(0,i.jsxs)("div",{className:"card p-6",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Flagged Posts"}),(0,i.jsx)("p",{className:"text-3xl font-bold text-yellow-600 dark:text-yellow-400",children:m.flaggedPosts})]}),(0,i.jsx)("div",{className:"text-4xl"})]}),(0,i.jsx)("div",{className:"mt-2",children:(0,i.jsx)("span",{className:"text-sm text-yellow-600 dark:text-yellow-400",children:"Needs review"})})]})]}),(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[(0,i.jsxs)("button",{onClick:()=>x("reports"),className:"card p-6 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors text-left",children:[(0,i.jsx)("div",{className:"text-2xl mb-2"}),(0,i.jsx)("h3",{className:"font-semibold text-gray-900 dark:text-white",children:"Review Reports"}),(0,i.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Handle user reports and violations"})]}),(0,i.jsxs)("button",{onClick:()=>x("content"),className:"card p-6 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors text-left",children:[(0,i.jsx)("div",{className:"text-2xl mb-2"}),(0,i.jsx)("h3",{className:"font-semibold text-gray-900 dark:text-white",children:"Moderate Content"}),(0,i.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Review and moderate posts"})]}),(0,i.jsxs)("button",{onClick:()=>x("forums"),className:"card p-6 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors text-left",children:[(0,i.jsx)("div",{className:"text-2xl mb-2"}),(0,i.jsx)("h3",{className:"font-semibold text-gray-900 dark:text-white",children:"Manage Forums"}),(0,i.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Forum threads and discussions"})]})]}),(0,i.jsxs)("div",{className:"card p-6",children:[(0,i.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Recent Moderation Activity"}),(0,i.jsx)("div",{className:"space-y-3",children:[{action:"Resolved spam report",time:"5 minutes ago",type:"resolved"},{action:"Warned user for inappropriate language",time:"12 minutes ago",type:"warning"},{action:"Approved match result submission",time:"25 minutes ago",type:"approved"},{action:"Closed duplicate thread",time:"1 hour ago",type:"closed"},{action:"Banned user for repeated violations",time:"2 hours ago",type:"banned"}].map(((e,s)=>(0,i.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[(0,i.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,i.jsx)("div",{className:"w-2 h-2 rounded-full ".concat("resolved"===e.type?"bg-green-500":"warning"===e.type?"bg-yellow-500":"approved"===e.type?"bg-blue-500":"closed"===e.type?"bg-gray-500":"bg-red-500")}),(0,i.jsx)("span",{className:"text-gray-900 dark:text-white",children:e.action})]}),(0,i.jsx)("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:e.time})]},s)))})]})]}),"reports"===l&&(0,i.jsxs)("div",{className:"space-y-6",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("h2",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:"User Reports"}),(0,i.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"Review and resolve community reports"})]}),(0,i.jsxs)("div",{className:"card p-6",children:[(0,i.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:["Pending Reports (",m.pendingReports,")"]}),(0,i.jsx)("div",{className:"space-y-4",children:[{id:1,type:"Inappropriate Language",reporter:"User123",reported:"ToxicPlayer99",content:"Used offensive language in forum post",priority:"high"},{id:2,type:"Spam",reporter:"ModerateGamer",reported:"SpamBot_X",content:"Multiple duplicate posts advertising external site",priority:"medium"},{id:3,type:"Harassment",reporter:"ProPlayer2024",reported:"AngryUser_01",content:"Repeatedly targeting and insulting in match chat",priority:"high"}].map((e=>(0,i.jsxs)("div",{className:"p-4 border border-gray-200 dark:border-gray-700 rounded-lg",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,i.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,i.jsx)("span",{className:"px-2 py-1 text-xs font-medium rounded ".concat("high"===e.priority?"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400":"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-400"),children:e.priority.toUpperCase()}),(0,i.jsx)("span",{className:"font-medium text-gray-900 dark:text-white",children:e.type})]}),(0,i.jsxs)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Report #",e.id]})]}),(0,i.jsxs)("div",{className:"mb-3",children:[(0,i.jsx)("p",{className:"text-gray-900 dark:text-white",children:e.content}),(0,i.jsxs)("div",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:["Reported by: ",(0,i.jsx)("span",{className:"font-medium",children:e.reporter})," | User: ",(0,i.jsx)("span",{className:"font-medium",children:e.reported})]})]}),(0,i.jsxs)("div",{className:"flex space-x-2",children:[(0,i.jsx)("button",{className:"btn btn-sm bg-green-600 hover:bg-green-700 text-white",children:"Resolve"}),(0,i.jsx)("button",{className:"btn btn-sm bg-yellow-600 hover:bg-yellow-700 text-white",children:"Warn User"}),(0,i.jsx)("button",{className:"btn btn-sm bg-red-600 hover:bg-red-700 text-white",children:"Ban User"}),(0,i.jsx)("button",{className:"btn btn-sm btn-secondary",children:"View Details"})]})]},e.id)))})]})]}),"overview"!==l&&"reports"!==l&&(0,i.jsxs)("div",{className:"card p-12 text-center",children:[(0,i.jsx)("div",{className:"text-6xl mb-4",children:(null===(s=N.find((e=>e.id===l)))||void 0===s?void 0:s.icon)||""}),(0,i.jsxs)("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:[null===(t=N.find((e=>e.id===l)))||void 0===t?void 0:t.name," Section"]}),(0,i.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"This moderation feature is being developed. Full functionality coming soon!"}),(0,i.jsx)("div",{className:"mt-4",children:(0,i.jsx)("span",{className:"inline-block px-3 py-1 text-sm bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-400 rounded-full",children:"Moderator Only"})})]})]})]})]})}const m=function(e){let{navigateTo:s}=e;const{user:t}=(0,r.As)();return(0,i.jsx)(c.Ay,{user:t,children:(0,i.jsx)(x,{navigateTo:s})})};var h=t(6392);const g=function(e){let{navigateTo:s,params:t}=e;const{user:c,isAuthenticated:o}=(0,r.As)(),[x,g]=(0,a.useState)(!0);if((0,a.useEffect)((()=>{const e=setTimeout((()=>{g(!1)}),500);return()=>clearTimeout(e)}),[c]),!o||!c)return(0,i.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,i.jsxs)("div",{className:"text-center",children:[(0,i.jsx)("div",{className:"text-6xl mb-4",children:"\ud83d\udd12"}),(0,i.jsx)("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"Authentication Required"}),(0,i.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"Please log in to access your dashboard"}),(0,i.jsx)("button",{onClick:()=>s("home"),className:"btn btn-primary",children:"Return to Home"})]})});if(x)return(0,i.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,i.jsxs)("div",{className:"text-center",children:[(0,i.jsx)("div",{className:"loading-spinner mx-auto mb-4"}),(0,i.jsx)("div",{className:"text-gray-600 dark:text-gray-400",children:"Loading your dashboard..."})]})});const p=(0,n.o8)(c);return(0,n.xI)(c),console.log("\ud83d\udd0d RoleBasedDashboard: User role check",{user:null===c||void 0===c?void 0:c.name,primaryRole:p,userRole:null===c||void 0===c?void 0:c.role,userRoles:null===c||void 0===c?void 0:c.roles}),p===n.gg.ADMIN?(console.log("\ud83d\udccb Rendering Admin Dashboard for user:",null===c||void 0===c?void 0:c.name),(0,i.jsx)(d,{user:c,role:n.gg.ADMIN,onUnauthorized:()=>{console.warn("Admin dashboard access denied"),s("user-dashboard")},children:(0,i.jsx)(h.default,{navigateTo:s,params:t})})):p===n.gg.MODERATOR?(console.log("\ud83d\udccb Rendering Moderator Dashboard for user:",null===c||void 0===c?void 0:c.name),(0,i.jsx)(d,{user:c,minRole:n.gg.MODERATOR,onUnauthorized:()=>{console.warn("Moderator dashboard access denied"),s("user-dashboard")},children:(0,i.jsx)(m,{navigateTo:s,params:t})})):(console.log("\ud83d\udccb Rendering User Dashboard for user:",null===c||void 0===c?void 0:c.name),(0,i.jsx)(l.default,{navigateTo:s,params:t}))}}}]);