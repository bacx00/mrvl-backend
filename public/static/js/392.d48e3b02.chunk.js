"use strict";(self.webpackChunkmrvl_frontend=self.webpackChunkmrvl_frontend||[]).push([[392],{6392:(e,a,t)=>{t.r(a),t.d(a,{default:()=>S});var r=t(9950),s=t(5150),l=t(2555),d=t(4414);function i(e){let{title:a,value:t,icon:r,color:s,subtitle:l}=e;return(0,d.jsx)("div",{className:"rounded-lg border p-6 ".concat({blue:"bg-blue-50 dark:bg-blue-900/20 border-blue-200 dark:border-blue-800 text-blue-900 dark:text-blue-200",green:"bg-green-50 dark:bg-green-900/20 border-green-200 dark:border-green-800 text-green-900 dark:text-green-200",purple:"bg-purple-50 dark:bg-purple-900/20 border-purple-200 dark:border-purple-800 text-purple-900 dark:text-purple-200",red:"bg-red-50 dark:bg-red-900/20 border-red-200 dark:border-red-800 text-red-900 dark:text-red-200",yellow:"bg-yellow-50 dark:bg-yellow-900/20 border-yellow-200 dark:border-yellow-800 text-yellow-900 dark:text-yellow-200",indigo:"bg-indigo-50 dark:bg-indigo-900/20 border-indigo-200 dark:border-indigo-800 text-indigo-900 dark:text-indigo-200",pink:"bg-pink-50 dark:bg-pink-900/20 border-pink-200 dark:border-pink-800 text-pink-900 dark:text-pink-200",orange:"bg-orange-50 dark:bg-orange-900/20 border-orange-200 dark:border-orange-800 text-orange-900 dark:text-orange-200"}[s]),children:(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("p",{className:"text-sm font-medium opacity-80",children:a}),(0,d.jsx)("p",{className:"text-2xl font-bold",children:t.toLocaleString()}),(0,d.jsx)("p",{className:"text-xs opacity-60 mt-1",children:l})]}),(0,d.jsx)("div",{className:"opacity-60",children:(0,d.jsx)(c,{icon:r,size:24})})]})})}function n(e){let{activity:a}=e;return(0,d.jsxs)("div",{className:"flex items-center space-x-3 py-2",children:[(0,d.jsx)("div",{className:"w-2 h-2 bg-blue-500 rounded-full flex-shrink-0"}),(0,d.jsxs)("div",{className:"flex-1",children:[(0,d.jsx)("p",{className:"text-sm text-gray-900 dark:text-white",children:a.description}),(0,d.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:a.timestamp})]})]})}function o(e){let{label:a,status:t,uptime:r,usage:s,responseTime:l}=e;return(0,d.jsxs)("div",{className:"flex items-center justify-between py-2",children:[(0,d.jsx)("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:a}),(0,d.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,d.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat({healthy:"text-green-600 bg-green-100 dark:bg-green-900/20 dark:text-green-400",warning:"text-yellow-600 bg-yellow-100 dark:bg-yellow-900/20 dark:text-yellow-400",error:"text-red-600 bg-red-100 dark:bg-red-900/20 dark:text-red-400"}[t]),children:t}),r&&(0,d.jsx)("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:r}),s&&(0,d.jsxs)("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:[s,"% used"]}),l&&(0,d.jsxs)("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:[l,"ms"]})]})]})}function c(e){let{icon:a,size:t=24}=e;const r={width:t,height:t,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:2},s={users:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m3 5.197V9a3 3 0 00-3-3m3 12a4 4 0 00-8 0v3h8v-3z"}),user:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"}),activity:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"}),zap:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13 10V3L4 14h7v7l9-11h-7z"}),calendar:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"}),"message-circle":(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"}),newspaper:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 20H5a2 2 0 01-2-2V6a2 2 0 012-2h10a2 2 0 012 2v1m2 13a2 2 0 01-2-2V7m2 13a2 2 0 002-2V9.5a2 2 0 00-2-2h-2m-4-3H9M7 16h6M7 8h6v4H7V8z"}),plus:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4v16m8-8H4"}),edit:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})};return(0,d.jsx)("svg",(0,l.A)((0,l.A)({},r),{},{children:s[a]||s.users}))}const x=function(e){var a;let{navigateTo:t}=e;const{api:l}=(0,s.As)(),[c,x]=(0,r.useState)(null),[m,g]=(0,r.useState)(!0),[u,h]=(0,r.useState)(null);(0,r.useEffect)((()=>{y()}),[]);const y=async()=>{try{g(!0);const e=await l.get("/admin/stats");x(e.data||e)}catch(e){h("Failed to load platform statistics"),console.error("Error fetching admin stats:",e)}finally{g(!1)}};if(m)return(0,d.jsx)("div",{className:"p-6",children:(0,d.jsxs)("div",{className:"animate-pulse",children:[(0,d.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[...Array(8)].map(((e,a)=>(0,d.jsx)("div",{className:"bg-gray-200 dark:bg-gray-700 rounded-lg h-24"},a)))}),(0,d.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,d.jsx)("div",{className:"bg-gray-200 dark:bg-gray-700 rounded-lg h-64"}),(0,d.jsx)("div",{className:"bg-gray-200 dark:bg-gray-700 rounded-lg h-64"})]})]})});if(u)return(0,d.jsx)("div",{className:"p-6",children:(0,d.jsxs)("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-6 text-center",children:[(0,d.jsx)("h3",{className:"text-lg font-semibold text-red-900 dark:text-red-200 mb-2",children:"Error Loading Statistics"}),(0,d.jsx)("p",{className:"text-red-700 dark:text-red-300 mb-4",children:u}),(0,d.jsx)("button",{onClick:y,className:"btn btn-outline-primary",children:"Try Again"})]})});const b=(null===c||void 0===c?void 0:c.overview)||c||{};return(0,d.jsxs)("div",{className:"p-6 space-y-6",children:[(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Platform Overview"}),(0,d.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"Real-time platform statistics and insights"})]}),(0,d.jsx)("button",{onClick:y,className:"btn btn-outline-primary",children:"Refresh Data"})]}),(0,d.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,d.jsx)(i,{title:"Total Teams",value:b.totalTeams||0,icon:"users",color:"blue",subtitle:"Registered teams"}),(0,d.jsx)(i,{title:"Total Players",value:b.totalPlayers||0,icon:"user",color:"green",subtitle:"Active players"}),(0,d.jsx)(i,{title:"Total Matches",value:b.totalMatches||0,icon:"activity",color:"purple",subtitle:"All time matches"}),(0,d.jsx)(i,{title:"Live Matches",value:b.liveMatches||0,icon:"zap",color:"red",subtitle:"Currently live"}),(0,d.jsx)(i,{title:"Total Events",value:b.totalEvents||0,icon:"calendar",color:"yellow",subtitle:"Tournaments & events"}),(0,d.jsx)(i,{title:"Total Users",value:b.totalUsers||0,icon:"users",color:"indigo",subtitle:"Registered users"}),(0,d.jsx)(i,{title:"Forum Threads",value:b.totalThreads||0,icon:"message-circle",color:"pink",subtitle:"Discussion threads"}),(0,d.jsx)(i,{title:"News Articles",value:b.totalNews||0,icon:"newspaper",color:"orange",subtitle:"Published articles"})]}),(0,d.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,d.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[(0,d.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Recent Activity"}),(0,d.jsx)("div",{className:"space-y-3",children:(null===(a=b.recentActivity)||void 0===a?void 0:a.slice(0,5).map(((e,a)=>(0,d.jsx)(n,{activity:e},a))))||(0,d.jsx)("p",{className:"text-gray-500 dark:text-gray-400 text-sm",children:"No recent activity data available"})})]}),(0,d.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[(0,d.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"System Health"}),(0,d.jsxs)("div",{className:"space-y-4",children:[(0,d.jsx)(o,{label:"Database",status:b.dbStatus||"healthy",uptime:b.dbUptime}),(0,d.jsx)(o,{label:"Cache",status:b.cacheStatus||"healthy",uptime:b.cacheUptime}),(0,d.jsx)(o,{label:"Storage",status:b.storageStatus||"healthy",usage:b.storageUsage}),(0,d.jsx)(o,{label:"API Response Time",status:b.apiStatus||"healthy",responseTime:b.avgResponseTime})]})]})]})]})};var m=t(6225);const g=function(e){let{currentPage:a,totalPages:t,totalItems:r,itemsPerPage:s,onPageChange:l,onPageSizeChange:i,pageSizeOptions:n=[10,25,50,100],itemName:o="items",className:c="",showPageSizeSelector:x=!0,showItemInfo:m=!0}=e;if(t<=1&&!x)return null;const g=Math.max(1,(a-1)*s+1),u=Math.min(r,a*s),h=(()=>{if(t<=7)return Array.from({length:t},((e,a)=>a+1));const e=Math.floor(3);return a<=e+1?Array.from({length:7},((e,a)=>a+1)):a>=t-e?Array.from({length:7},((e,a)=>t-7+a+1)):Array.from({length:7},((t,r)=>a-e+r))})();return(0,d.jsxs)("div",{className:"bg-gray-50 dark:bg-gray-800 px-6 py-3 border-t border-gray-200 dark:border-gray-700 ".concat(c),children:[(0,d.jsxs)("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-4",children:[m&&(0,d.jsx)("div",{className:"text-sm text-gray-700 dark:text-gray-300 order-2 sm:order-1",children:r>0?(0,d.jsxs)(d.Fragment,{children:["Showing ",(0,d.jsx)("span",{className:"font-medium",children:g})," to"," ",(0,d.jsx)("span",{className:"font-medium",children:u})," of"," ",(0,d.jsx)("span",{className:"font-medium",children:r})," ",o]}):"No ".concat(o," found")}),x&&i&&(0,d.jsxs)("div",{className:"flex items-center space-x-2 text-sm order-3 sm:order-2",children:[(0,d.jsx)("label",{className:"text-gray-700 dark:text-gray-300",children:"Show:"}),(0,d.jsx)("select",{value:s,onChange:e=>i(Number(e.target.value)),className:"form-input text-sm py-1 px-2 min-w-0 w-auto",children:n.map((e=>(0,d.jsx)("option",{value:e,children:e},e)))}),(0,d.jsx)("span",{className:"text-gray-700 dark:text-gray-300",children:"per page"})]}),t>1&&(0,d.jsxs)("div",{className:"flex items-center space-x-1 order-1 sm:order-3",children:[(0,d.jsx)("button",{onClick:()=>l(Math.max(1,a-1)),disabled:1===a,className:"px-3 py-1 text-sm bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded hover:bg-gray-50 dark:hover:bg-gray-600 disabled:opacity-50 disabled:cursor-not-allowed",title:"Previous page",children:"Previous"}),!h.includes(1)&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("button",{onClick:()=>l(1),className:"px-3 py-1 text-sm bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded hover:bg-gray-50 dark:hover:bg-gray-600",children:"1"}),h[0]>2&&(0,d.jsx)("span",{className:"px-2 text-gray-500",children:"..."})]}),h.map((e=>(0,d.jsx)("button",{onClick:()=>l(e),className:"px-3 py-1 text-sm border rounded transition-colors ".concat(a===e?"bg-blue-600 text-white border-blue-600 shadow-sm":"bg-white dark:bg-gray-700 border-gray-300 dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-600"),children:e},e))),!h.includes(t)&&t>1&&(0,d.jsxs)(d.Fragment,{children:[h[h.length-1]<t-1&&(0,d.jsx)("span",{className:"px-2 text-gray-500",children:"..."}),(0,d.jsx)("button",{onClick:()=>l(t),className:"px-3 py-1 text-sm bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded hover:bg-gray-50 dark:hover:bg-gray-600",children:t})]}),(0,d.jsx)("button",{onClick:()=>l(Math.min(t,a+1)),disabled:a===t,className:"px-3 py-1 text-sm bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded hover:bg-gray-50 dark:hover:bg-gray-600 disabled:opacity-50 disabled:cursor-not-allowed",title:"Next page",children:"Next"})]})]}),(0,d.jsxs)("div",{className:"sm:hidden mt-2 text-center text-xs text-gray-600 dark:text-gray-400",children:["Page ",a," of ",t]})]})};const u=function(e){let{navigateTo:a}=e;const[t,i]=(0,r.useState)([]),[n,o]=(0,r.useState)(!0),[c,x]=(0,r.useState)(1),[u,h]=(0,r.useState)(20),[y,b]=(0,r.useState)({search:"",region:"all",sortBy:"rating"}),[p,v]=(0,r.useState)(new Set),{api:j}=(0,s.As)(),k=(0,r.useCallback)((async()=>{try{var e;o(!0),console.log(" AdminTeams: Fetching teams from real API...");const a=await j.get("/admin/teams");let t=(null===a||void 0===a||null===(e=a.data)||void 0===e?void 0:e.data)||(null===a||void 0===a?void 0:a.data)||a||[];console.log(" AdminTeams: Real teams data received:",t.length,"teams"),console.log(" AdminTeams: Sample team data:",t[0]),Array.isArray(t)||(console.warn(" AdminTeams: Teams data is not an array, using fallback"),t=[]),i(t),console.log(" AdminTeams: Teams loaded successfully")}catch(a){console.error("Error fetching teams:",a),i([])}finally{o(!1)}}),[j]);(0,r.useEffect)((()=>{k()}),[k]);const f=(0,r.useMemo)((()=>{let e=[...t];if(y.search.trim()){const a=y.search.toLowerCase().trim();e=e.filter((e=>{var t,r,s,l;return(null===(t=e.name)||void 0===t?void 0:t.toLowerCase().includes(a))||(null===(r=e.short_name)||void 0===r?void 0:r.toLowerCase().includes(a))||(null===(s=e.region)||void 0===s?void 0:s.toLowerCase().includes(a))||(null===(l=e.country)||void 0===l?void 0:l.toLowerCase().includes(a))}))}return"all"!==y.region&&(e=e.filter((e=>e.region===y.region))),"rating"===y.sortBy?e.sort(((e,a)=>(a.rating||0)-(e.rating||0))):"name"===y.sortBy&&e.sort(((e,a)=>e.name.localeCompare(a.name))),e}),[t,y]),w=(0,r.useMemo)((()=>{const e=(c-1)*u;return f.slice(e,e+u)}),[f,c,u]),N=Math.ceil(f.length/u);(0,r.useEffect)((()=>{x(1)}),[y]);const C=()=>{console.log("\ud83c\udfaf AdminTeams: Navigating to team create form"),a&&a("admin-team-create")};return n?(0,d.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,d.jsxs)("div",{className:"text-center",children:[(0,d.jsx)("div",{className:"loading-spinner mx-auto mb-4"}),(0,d.jsx)("div",{className:"text-gray-600 dark:text-gray-400",children:"Loading teams..."})]})}):(0,d.jsxs)("div",{className:"space-y-6",children:[(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("h2",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Manage Teams"}),(0,d.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"Create, edit, and manage all teams"})]}),(0,d.jsx)("button",{onClick:C,className:"btn btn-primary",children:"Create New Team"})]}),(0,d.jsx)("div",{className:"card p-6",children:(0,d.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium mb-2 text-gray-900 dark:text-gray-100",children:"Search Teams"}),(0,d.jsx)("input",{type:"text",placeholder:"Search by name...",value:y.search,onChange:e=>b((0,l.A)((0,l.A)({},y),{},{search:e.target.value})),className:"form-input"})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium mb-2 text-gray-900 dark:text-gray-100",children:"Region"}),(0,d.jsx)("select",{value:y.region,onChange:e=>b((0,l.A)((0,l.A)({},y),{},{region:e.target.value})),className:"form-input",children:["all","NA","EU","APAC","ASIA","LATAM","BR","CN","KR","JP","Americas","EMEA","Oceania","China"].map((e=>(0,d.jsx)("option",{value:e,children:"all"===e?"All Regions":e},e)))})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium mb-2 text-gray-900 dark:text-gray-100",children:"Sort By"}),(0,d.jsxs)("select",{value:y.sortBy,onChange:e=>b((0,l.A)((0,l.A)({},y),{},{sortBy:e.target.value})),className:"form-input",children:[(0,d.jsx)("option",{value:"rating",children:"Rating"}),(0,d.jsx)("option",{value:"name",children:"Name"})]})]}),(0,d.jsx)("div",{className:"flex items-end",children:(0,d.jsx)("button",{onClick:()=>b({search:"",region:"all",sortBy:"rating"}),className:"btn btn-secondary w-full",children:"Clear Filters"})})]})}),p.size>0&&(0,d.jsx)("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,d.jsxs)("span",{className:"text-sm font-medium text-blue-900 dark:text-blue-200",children:[p.size," teams selected"]}),(0,d.jsx)("div",{className:"flex space-x-2",children:(0,d.jsx)("button",{onClick:async()=>{if(0===p.size)return;const e="Are you sure you want to delete ".concat(p.size," teams? This action cannot be undone.");if(window.confirm(e))try{var a;const e=await j.post("/admin/teams/bulk-delete",{team_ids:Array.from(p)});var t;if(!1===(null===(a=e.data)||void 0===a?void 0:a.success))throw new Error((null===(t=e.data)||void 0===t?void 0:t.message)||"Bulk delete failed");await k(),v(new Set),alert("".concat(p.size," teams deleted successfully!"))}catch(l){var r,s;console.error("Error in bulk delete:",l);const e=(null===(r=l.response)||void 0===r||null===(s=r.data)||void 0===s?void 0:s.message)||l.message||"Bulk delete failed";alert(e)}},className:"px-3 py-1 bg-red-600 hover:bg-red-700 text-white rounded text-sm",children:"Delete Selected"})})]}),(0,d.jsx)("button",{onClick:()=>v(new Set),className:"text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 text-sm",children:"Clear Selection"})]})}),(0,d.jsxs)("div",{className:"card overflow-hidden",children:[(0,d.jsx)("div",{className:"overflow-x-auto",children:(0,d.jsxs)("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[(0,d.jsx)("thead",{className:"bg-gray-50 dark:bg-gray-800",children:(0,d.jsxs)("tr",{children:[(0,d.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:(0,d.jsx)("input",{type:"checkbox",checked:p.size===w.length&&w.length>0,onChange:()=>{p.size===w.length&&w.length>0?v(new Set):v(new Set(w.map((e=>e.id))))},className:"rounded border-gray-300 dark:border-gray-600"})}),(0,d.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Team"}),(0,d.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Region"}),(0,d.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Rating"}),(0,d.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Players"}),(0,d.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Actions"})]})}),(0,d.jsx)("tbody",{className:"bg-white dark:bg-gray-900 divide-y divide-gray-200 dark:divide-gray-700",children:w.map((e=>(0,d.jsxs)("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-800",children:[(0,d.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,d.jsx)("input",{type:"checkbox",checked:p.has(e.id),onChange:()=>(e=>{const a=new Set(p);a.has(e)?a.delete(e):a.add(e),v(a)})(e.id),className:"rounded border-gray-300 dark:border-gray-600"})}),(0,d.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,d.jsxs)("div",{className:"flex items-center",children:[(0,d.jsx)("div",{className:"mr-3",children:(0,d.jsx)(m.LE,{team:e,size:"w-10 h-10",className:"border border-gray-200 dark:border-gray-600"})}),(0,d.jsxs)("div",{children:[(0,d.jsx)("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:e.short_name}),(0,d.jsx)("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:e.name})]})]})}),(0,d.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,d.jsx)("span",{className:"px-2 py-1 text-xs font-medium bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-400 rounded-full",children:e.region})}),(0,d.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,d.jsx)("div",{className:"text-sm text-gray-900 dark:text-white font-medium",children:e.rating||"N/A"}),(0,d.jsxs)("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Rank #",e.rank||"N/A"]})]}),(0,d.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,d.jsxs)("div",{className:"text-sm text-gray-900 dark:text-white",children:[e.player_count||0," players"]})}),(0,d.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:(0,d.jsxs)("div",{className:"flex space-x-2",children:[(0,d.jsx)("button",{onClick:()=>{console.log(" AdminTeams: Navigating to team-detail with ID:",e.id),a("team-detail",{id:e.id})},className:"text-blue-600 hover:text-blue-900 dark:text-blue-400 dark:hover:text-blue-300",children:"View"}),(0,d.jsx)("button",{onClick:()=>(e=>{console.log("\ud83c\udfaf AdminTeams: Navigating to team edit form with ID:",e.id),a&&a("admin-team-edit",{id:e.id})})(e),className:"text-yellow-600 hover:text-yellow-900 dark:text-yellow-400 dark:hover:text-yellow-300",children:"Edit"}),(0,d.jsx)("button",{onClick:()=>(async(e,a)=>{if(window.confirm('Are you sure you want to delete "'.concat(a,'"? This action cannot be undone.')))try{if(!t.find((a=>a.id===e)))return alert("Team not found. Please refresh the page and try again."),void await k();console.log(" AdminTeams: Deleting team with ID:",e),await j.delete("/admin/teams/".concat(e)),await k(),alert("Team deleted successfully!")}catch(r){console.error("Error deleting team:",r),r.response&&404===r.response.status?(alert("Team not found. It may have already been deleted. Refreshing the list..."),await k()):alert("Error deleting team. Please try again.")}})(e.id,e.name),className:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300",children:"Delete"})]})})]},e.id)))})]})}),(0,d.jsx)(g,{currentPage:c,totalPages:N,totalItems:f.length,itemsPerPage:u,onPageChange:x,onPageSizeChange:e=>{h(e),x(1)},itemName:"teams",pageSizeOptions:[10,25,50,100]})]}),0===f.length&&(0,d.jsxs)("div",{className:"card p-12 text-center",children:[(0,d.jsx)("div",{className:"text-6xl mb-4"}),(0,d.jsx)("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:"No Teams Found"}),(0,d.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:y.search||"all"!==y.region?"Try adjusting your filters to find more teams.":"Get started by creating your first team."}),(0,d.jsx)("button",{onClick:C,className:"btn btn-primary",children:"Create First Team"})]}),(0,d.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[(0,d.jsxs)("div",{className:"card p-6 text-center",children:[(0,d.jsx)("div",{className:"text-3xl mb-2"}),(0,d.jsx)("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:t.length}),(0,d.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total Teams"}),f.length!==t.length&&(0,d.jsxs)("div",{className:"text-xs text-gray-500 dark:text-gray-500 mt-1",children:[f.length," filtered"]})]}),(0,d.jsxs)("div",{className:"card p-6 text-center",children:[(0,d.jsx)("div",{className:"text-3xl mb-2",children:"\ud83c\udf0e"}),(0,d.jsx)("div",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:t.filter((e=>"NA"===e.region)).length}),(0,d.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"NA Teams"})]}),(0,d.jsxs)("div",{className:"card p-6 text-center",children:[(0,d.jsx)("div",{className:"text-3xl mb-2",children:"\ud83c\uddea\ud83c\uddfa"}),(0,d.jsx)("div",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400",children:t.filter((e=>"EU"===e.region)).length}),(0,d.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"EU Teams"})]}),(0,d.jsxs)("div",{className:"card p-6 text-center",children:[(0,d.jsx)("div",{className:"text-3xl mb-2"}),(0,d.jsx)("div",{className:"text-2xl font-bold text-yellow-600 dark:text-yellow-400",children:t.filter((e=>(e.rating||0)>2e3)).length}),(0,d.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"High Rated"})]})]})]})};const h=function(e){let{navigateTo:a}=e;const{api:t}=(0,s.As)(),[i,n]=(0,r.useState)([]),[o,c]=(0,r.useState)(!0),[x,u]=(0,r.useState)(null),[h,y]=(0,r.useState)(1),[b,p]=(0,r.useState)(20),[v,j]=(0,r.useState)(new Set),[k,f]=(0,r.useState)({search:"",region:"all",role:"all",sortBy:"rating"});(0,r.useEffect)((()=>{w()}),[]);const w=(0,r.useCallback)((async()=>{try{var e;c(!0),u(null),console.log("\ud83c\udfc3 AdminPlayers: Fetching players from real API...");const a=await t.get("/players?per_page=500");let r=(null===a||void 0===a||null===(e=a.data)||void 0===e?void 0:e.data)||(null===a||void 0===a?void 0:a.data)||a||[];console.log("\ud83c\udfc3 AdminPlayers: Real players data received:",r.length,"players"),console.log("\ud83c\udfc3 AdminPlayers: Sample player data:",r[0]),Array.isArray(r)||(console.warn("\ud83c\udfc3 AdminPlayers: Players data is not an array, using fallback"),r=[]);const s=r.map((e=>{var a,t,r;return(0,l.A)((0,l.A)({},e),{},{ign:e.username||e.name||e.ign||"Unknown",name:e.name||e.real_name||e.username||"Unknown",team_name:(null===(a=e.team)||void 0===a?void 0:a.name)||e.team_name||null,team_short_name:(null===(t=e.team)||void 0===t?void 0:t.short_name)||e.team_short||null,team_logo:(null===(r=e.team)||void 0===r?void 0:r.logo)||e.team_logo||null})}));n(s),console.log("\ud83c\udfc3 AdminPlayers: Players loaded successfully")}catch(s){var a,r;const e=(null===(a=s.response)||void 0===a||null===(r=a.data)||void 0===r?void 0:r.message)||s.message||"Failed to load players";u(e),console.error("Error fetching players:",s),n([])}finally{c(!1)}}),[t]),N=(0,r.useMemo)((()=>{let e=[...i];if(k.search.trim()){const a=k.search.toLowerCase().trim();e=e.filter((e=>{var t,r,s,l;return(null===(t=e.name)||void 0===t?void 0:t.toLowerCase().includes(a))||(null===(r=e.ign)||void 0===r?void 0:r.toLowerCase().includes(a))||(null===(s=e.team_name)||void 0===s?void 0:s.toLowerCase().includes(a))||(null===(l=e.country)||void 0===l?void 0:l.toLowerCase().includes(a))}))}return"all"!==k.region&&(e=e.filter((e=>e.country===k.region))),"all"!==k.role&&(e=e.filter((e=>{const a=e.role;return"DPS"===k.role?"DPS"===a||"Duelist"===a:"Tank"===k.role?"Tank"===a||"Vanguard"===a:"Support"===k.role?"Support"===a||"Strategist"===a:a===k.role}))),"rating"===k.sortBy?e.sort(((e,a)=>(a.rating||0)-(e.rating||0))):"name"===k.sortBy?e.sort(((e,a)=>(e.ign||e.name||"").localeCompare(a.ign||a.name||""))):"team"===k.sortBy&&e.sort(((e,a)=>(e.team_name||"").localeCompare(a.team_name||""))),e}),[i,k]),C=(0,r.useMemo)((()=>{const e=(h-1)*b;return N.slice(e,e+b)}),[N,h,b]),A=Math.ceil(N.length/b);(0,r.useEffect)((()=>{y(1)}),[k]);const S=()=>{console.log("\ud83c\udfc3 AdminPlayers: Navigating to player create form"),a&&a("admin-player-create")};return o?(0,d.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,d.jsxs)("div",{className:"text-center",children:[(0,d.jsx)("div",{className:"loading-spinner mx-auto mb-4"}),(0,d.jsx)("div",{className:"text-gray-600 dark:text-gray-400",children:"Loading players..."})]})}):x?(0,d.jsx)("div",{className:"p-6",children:(0,d.jsxs)("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-6 text-center",children:[(0,d.jsx)("h3",{className:"text-lg font-semibold text-red-900 dark:text-red-200 mb-2",children:"Error Loading Players"}),(0,d.jsx)("p",{className:"text-red-700 dark:text-red-300 mb-4",children:x}),(0,d.jsx)("button",{onClick:w,className:"btn btn-outline-primary",children:"Try Again"})]})}):(0,d.jsxs)("div",{className:"space-y-6",children:[(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("h2",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Manage Players"}),(0,d.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"Create, edit, and manage all players"})]}),(0,d.jsx)("button",{onClick:S,className:"btn btn-primary",children:"Create New Player"})]}),(0,d.jsxs)("div",{className:"card p-6",children:[(0,d.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium mb-2 text-gray-900 dark:text-gray-100",children:"Search Players"}),(0,d.jsx)("input",{type:"text",placeholder:"Search by name...",value:k.search,onChange:e=>f((0,l.A)((0,l.A)({},k),{},{search:e.target.value})),className:"form-input"})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium mb-2 text-gray-900 dark:text-gray-100",children:"Country"}),(0,d.jsx)("select",{value:k.region,onChange:e=>f((0,l.A)((0,l.A)({},k),{},{region:e.target.value})),className:"form-input",children:["all","US","CA","UK","DE","FR","ES","IT","KR","JP","CN","BR"].map((e=>(0,d.jsx)("option",{value:e,children:"all"===e?"All Countries":(0,m.qQ)(e)},e)))})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium mb-2 text-gray-900 dark:text-gray-100",children:"Role"}),(0,d.jsxs)("select",{value:k.role,onChange:e=>f((0,l.A)((0,l.A)({},k),{},{role:e.target.value})),className:"form-input",children:[(0,d.jsx)("option",{value:"all",children:"All Roles"}),(0,d.jsx)("option",{value:"DPS",children:"DPS"}),(0,d.jsx)("option",{value:"Tank",children:"Tank"}),(0,d.jsx)("option",{value:"Support",children:"Support"}),(0,d.jsx)("option",{value:"Flex",children:"Flex"})]})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium mb-2 text-gray-900 dark:text-gray-100",children:"Sort By"}),(0,d.jsxs)("select",{value:k.sortBy,onChange:e=>f((0,l.A)((0,l.A)({},k),{},{sortBy:e.target.value})),className:"form-input",children:[(0,d.jsx)("option",{value:"rating",children:"Rating"}),(0,d.jsx)("option",{value:"name",children:"Name"}),(0,d.jsx)("option",{value:"team",children:"Team"})]})]})]}),(0,d.jsx)("div",{className:"mt-4",children:(0,d.jsx)("button",{onClick:()=>f({search:"",region:"all",role:"all",sortBy:"rating"}),className:"btn btn-secondary",children:"Clear Filters"})})]}),v.size>0&&(0,d.jsx)("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,d.jsxs)("span",{className:"text-sm font-medium text-blue-900 dark:text-blue-200",children:[v.size," players selected"]}),(0,d.jsx)("div",{className:"flex space-x-2",children:(0,d.jsx)("button",{onClick:async()=>{if(0===v.size)return;const e="Are you sure you want to delete ".concat(v.size," players? This action cannot be undone.");if(window.confirm(e))try{var a;const e=await t.post("/players/bulk-delete",{player_ids:Array.from(v)});var r;if(!1===(null===(a=e.data)||void 0===a?void 0:a.success))throw new Error((null===(r=e.data)||void 0===r?void 0:r.message)||"Bulk delete failed");await w(),j(new Set),alert("".concat(v.size," players deleted successfully!"))}catch(x){var s,l;console.error("Error in bulk delete:",x);const a=(null===(s=x.response)||void 0===s||null===(l=s.data)||void 0===l?void 0:l.message)||x.message||"Bulk delete failed";alert(a)}},className:"px-3 py-1 bg-red-600 hover:bg-red-700 text-white rounded text-sm",children:"Delete Selected"})})]}),(0,d.jsx)("button",{onClick:()=>j(new Set),className:"text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 text-sm",children:"Clear Selection"})]})}),(0,d.jsxs)("div",{className:"card overflow-hidden",children:[(0,d.jsx)("div",{className:"overflow-x-auto",children:(0,d.jsxs)("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[(0,d.jsx)("thead",{className:"bg-gray-50 dark:bg-gray-800",children:(0,d.jsxs)("tr",{children:[(0,d.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:(0,d.jsx)("input",{type:"checkbox",checked:v.size===C.length&&C.length>0,onChange:()=>{v.size===C.length&&C.length>0?j(new Set):j(new Set(C.map((e=>e.id))))},className:"rounded border-gray-300 dark:border-gray-600"})}),(0,d.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Player"}),(0,d.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Team"}),(0,d.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Role"}),(0,d.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Country"}),(0,d.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Rating"}),(0,d.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Actions"})]})}),(0,d.jsx)("tbody",{className:"bg-white dark:bg-gray-900 divide-y divide-gray-200 dark:divide-gray-700",children:C.map((e=>(0,d.jsxs)("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-800",children:[(0,d.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,d.jsx)("input",{type:"checkbox",checked:v.has(e.id),onChange:()=>(e=>{const a=new Set(v);a.has(e)?a.delete(e):a.add(e),j(a)})(e.id),className:"rounded border-gray-300 dark:border-gray-600"})}),(0,d.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,d.jsxs)("div",{className:"flex items-center",children:[(0,d.jsx)("div",{className:"mr-3",children:(0,d.jsx)(m.f5,{player:e,size:"w-10 h-10",className:"border border-gray-200 dark:border-gray-600"})}),(0,d.jsxs)("div",{children:[(0,d.jsx)("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:e.ign||e.name}),e.ign&&e.name&&(0,d.jsx)("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:e.name})]})]})}),(0,d.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:e.team_name?(0,d.jsx)("div",{className:"text-sm text-gray-900 dark:text-white",children:e.team_name}):(0,d.jsx)("span",{className:"text-sm text-gray-500 dark:text-gray-400 italic",children:"No team"})}),(0,d.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:e.role?(0,d.jsx)("span",{className:"px-2 py-1 text-xs font-medium rounded-full ".concat("DPS"===e.role||"Duelist"===e.role?"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400":"Tank"===e.role||"Vanguard"===e.role?"bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-400":"Support"===e.role||"Strategist"===e.role?"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400":"bg-gray-100 text-gray-800 dark:bg-gray-900/20 dark:text-gray-400"),children:e.role}):(0,d.jsx)("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:"-"})}),(0,d.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,d.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,d.jsx)("span",{className:"text-lg",children:(0,m.xg)(e.country)}),(0,d.jsx)("span",{className:"text-sm text-gray-900 dark:text-white",children:(0,m.qQ)(e.country)||"Unknown"})]})}),(0,d.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,d.jsx)("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:e.rating||"Unrated"})}),(0,d.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:(0,d.jsxs)("div",{className:"flex space-x-2",children:[(0,d.jsx)("button",{onClick:()=>{console.log("\ud83c\udfc3 AdminPlayers: Navigating to player-detail with ID:",e.id),a&&a("player-detail",{id:e.id})},className:"text-blue-600 hover:text-blue-900 dark:text-blue-400 dark:hover:text-blue-300",children:"View"}),(0,d.jsx)("button",{onClick:()=>{console.log("\ud83c\udfc3 AdminPlayers: Edit player with ID:",e.id),a&&a("admin-player-edit",{id:e.id})},className:"text-yellow-600 hover:text-yellow-900 dark:text-yellow-400 dark:hover:text-yellow-300",children:"Edit"}),(0,d.jsx)("button",{onClick:()=>(async(e,a)=>{if(window.confirm('Are you sure you want to delete player "'.concat(a,'"? This action cannot be undone.')))try{if(!i.find((a=>a.id===e)))return alert("Player not found. Please refresh the page and try again."),void await w();console.log("\ud83c\udfc3 AdminPlayers: Deleting player with ID:",e),await t.delete("/players/".concat(e)),await w(),alert("Player deleted successfully!")}catch(x){console.error("Error deleting player:",x),x.response&&404===x.response.status?(alert("Player not found. It may have already been deleted. Refreshing the list..."),await w()):alert("Error deleting player. Please try again.")}})(e.id,e.ign||e.name),className:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300",children:"Delete"})]})})]},e.id)))})]})}),(0,d.jsx)(g,{currentPage:h,totalPages:A,totalItems:N.length,itemsPerPage:b,onPageChange:y,onPageSizeChange:e=>{p(e),y(1)},itemName:"players",pageSizeOptions:[10,25,50,100]})]}),0===N.length&&(0,d.jsxs)("div",{className:"card p-12 text-center",children:[(0,d.jsx)("div",{className:"text-6xl mb-4",children:"\ud83c\udfc3\u200d\u2642\ufe0f"}),(0,d.jsx)("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:"No Players Found"}),(0,d.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:k.search||"all"!==k.region||"all"!==k.role?"Try adjusting your filters to find more players.":"Get started by creating your first player."}),(0,d.jsx)("button",{onClick:S,className:"btn btn-primary",children:"Create First Player"})]}),(0,d.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[(0,d.jsxs)("div",{className:"card p-6 text-center",children:[(0,d.jsx)("div",{className:"text-3xl mb-2",children:"\ud83c\udfc3\u200d\u2642\ufe0f"}),(0,d.jsx)("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:i.length}),(0,d.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total Players"}),N.length!==i.length&&(0,d.jsxs)("div",{className:"text-xs text-gray-500 dark:text-gray-500 mt-1",children:[N.length," filtered"]})]}),(0,d.jsxs)("div",{className:"card p-6 text-center",children:[(0,d.jsx)("div",{className:"text-3xl mb-2",children:"\u2694\ufe0f"}),(0,d.jsx)("div",{className:"text-2xl font-bold text-red-600 dark:text-red-400",children:i.filter((e=>"DPS"===e.role||"Duelist"===e.role)).length}),(0,d.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"DPS Players"})]}),(0,d.jsxs)("div",{className:"card p-6 text-center",children:[(0,d.jsx)("div",{className:"text-3xl mb-2",children:"\ud83d\udee1\ufe0f"}),(0,d.jsx)("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:i.filter((e=>"Tank"===e.role||"Vanguard"===e.role)).length}),(0,d.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Tank Players"})]}),(0,d.jsxs)("div",{className:"card p-6 text-center",children:[(0,d.jsx)("div",{className:"text-3xl mb-2",children:"\ud83d\udc9a"}),(0,d.jsx)("div",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:i.filter((e=>"Support"===e.role||"Strategist"===e.role)).length}),(0,d.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Support Players"})]})]})]})};var y=t(929);const b=function(){const{api:e}=(0,s.As)(),[a,t]=(0,r.useState)([]),[i,n]=(0,r.useState)(!0),[o,c]=(0,r.useState)(null),[x,g]=(0,r.useState)(1),[u]=(0,r.useState)(15),[h,b]=(0,r.useState)({search:"",status:"all",event:"all",sortBy:"date"}),[p,v]=(0,r.useState)(null),[j,k]=(0,r.useState)(!1),[f,w]=(0,r.useState)(!1),[N,C]=(0,r.useState)(null);(0,r.useEffect)((()=>{A()}),[]);const A=async function(){let a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50;try{var s;n(!0),c(null);const l=await e.get("/api/admin/matches-moderation?page=".concat(a,"&limit=").concat(r)),d=(null===l||void 0===l||null===(s=l.data)||void 0===s?void 0:s.data)||(null===l||void 0===l?void 0:l.data)||l||[];t(Array.isArray(d)?d:[])}catch(i){var l,d;const e=(null===(l=i.response)||void 0===l||null===(d=l.data)||void 0===d?void 0:d.message)||i.message||"Failed to load matches";c(e),console.error("Error fetching matches:",i),t([])}finally{n(!1)}},S=(0,r.useMemo)((()=>{let e=[...a];if(h.search.trim()){const a=h.search.toLowerCase().trim();e=e.filter((e=>{var t,r,s;return(null===(t=e.team1_name)||void 0===t?void 0:t.toLowerCase().includes(a))||(null===(r=e.team2_name)||void 0===r?void 0:r.toLowerCase().includes(a))||(null===(s=e.event_name)||void 0===s?void 0:s.toLowerCase().includes(a))}))}return"all"!==h.status&&(e=e.filter((e=>e.status===h.status))),"all"!==h.event&&(e=e.filter((e=>{var a;return(null===(a=e.event_id)||void 0===a?void 0:a.toString())===h.event}))),"date"===h.sortBy?e.sort(((e,a)=>new Date(a.scheduled_at||a.created_at)-new Date(e.scheduled_at||e.created_at))):"status"===h.sortBy?e.sort(((e,a)=>(e.status||"").localeCompare(a.status||""))):"event"===h.sortBy&&e.sort(((e,a)=>(e.event_name||"").localeCompare(a.event_name||""))),e}),[a,h]),_=(0,r.useMemo)((()=>{const e=(x-1)*u;return S.slice(e,e+u)}),[S,x,u]),E=Math.ceil(S.length/u);(0,r.useEffect)((()=>{g(1)}),[h]);const T=async(a,t)=>{try{var r;const l=await e.put("/api/admin/matches-moderation/".concat(a),{status:t});var s;if(!1===(null===(r=l.data)||void 0===r?void 0:r.success))throw new Error((null===(s=l.data)||void 0===s?void 0:s.message)||"Status update failed");await A(),alert("Match status updated to ".concat(t,"!"))}catch(o){var l,d;console.error("Error updating match status:",o);const a=(null===(l=o.response)||void 0===l||null===(d=l.data)||void 0===d?void 0:d.message)||o.message||"Error updating match status";alert(a)}},P=()=>{v(null),k(!1)},M=()=>{w(!1)},L=()=>{A()},D=async(a,r,s)=>{try{var d;const n=1===r?{team1_score:s}:{team2_score:s},o=await e.put("/api/admin/matches-moderation/".concat(a),n);var i;if(!1===(null===(d=o.data)||void 0===d?void 0:d.success))throw new Error((null===(i=o.data)||void 0===i?void 0:i.message)||"Score update failed");t((e=>e.map((e=>e.id===a?(0,l.A)((0,l.A)({},e),n):e))))}catch(o){var n,c;console.error("Error updating score:",o);const a=(null===(n=o.response)||void 0===n||null===(c=n.data)||void 0===c?void 0:c.message)||o.message||"Error updating score";alert(a)}},z=async()=>{w(!0)},B=e=>{switch(e){case"live":return"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400";case"completed":return"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400";case"scheduled":return"bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-400";case"cancelled":return"bg-gray-100 text-gray-800 dark:bg-gray-900/20 dark:text-gray-400";default:return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-400"}},U=[...new Set(a.map((e=>e.event_name)).filter(Boolean))];return i?(0,d.jsx)("div",{className:"p-6",children:(0,d.jsxs)("div",{className:"animate-pulse space-y-6",children:[(0,d.jsx)("div",{className:"h-8 bg-gray-200 dark:bg-gray-700 rounded w-1/4"}),(0,d.jsx)("div",{className:"h-20 bg-gray-200 dark:bg-gray-700 rounded"}),(0,d.jsx)("div",{className:"space-y-3",children:[...Array(10)].map(((e,a)=>(0,d.jsx)("div",{className:"h-20 bg-gray-200 dark:bg-gray-700 rounded"},a)))})]})}):o?(0,d.jsx)("div",{className:"p-6",children:(0,d.jsxs)("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-6 text-center",children:[(0,d.jsx)("h3",{className:"text-lg font-semibold text-red-900 dark:text-red-200 mb-2",children:"Error Loading Matches"}),(0,d.jsx)("p",{className:"text-red-700 dark:text-red-300 mb-4",children:o}),(0,d.jsx)("button",{onClick:A,className:"btn btn-outline-primary",children:"Try Again"})]})}):(0,d.jsxs)("div",{className:"p-6 space-y-6",children:[(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Match Management"}),(0,d.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"Manage matches and live scoring"})]}),(0,d.jsx)("button",{onClick:z,className:"btn btn-primary",children:"Create New Match"})]}),(0,d.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:(0,d.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium mb-2 text-gray-900 dark:text-gray-100",children:"Search Matches"}),(0,d.jsx)("input",{type:"text",placeholder:"Search teams or event...",value:h.search,onChange:e=>b((0,l.A)((0,l.A)({},h),{},{search:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-white"})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium mb-2 text-gray-900 dark:text-gray-100",children:"Status"}),(0,d.jsxs)("select",{value:h.status,onChange:e=>b((0,l.A)((0,l.A)({},h),{},{status:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-white",children:[(0,d.jsx)("option",{value:"all",children:"All Status"}),(0,d.jsx)("option",{value:"scheduled",children:"Scheduled"}),(0,d.jsx)("option",{value:"live",children:"Live"}),(0,d.jsx)("option",{value:"completed",children:"Completed"}),(0,d.jsx)("option",{value:"cancelled",children:"Cancelled"})]})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium mb-2 text-gray-900 dark:text-gray-100",children:"Event"}),(0,d.jsxs)("select",{value:h.event,onChange:e=>b((0,l.A)((0,l.A)({},h),{},{event:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-white",children:[(0,d.jsx)("option",{value:"all",children:"All Events"}),U.map(((e,a)=>(0,d.jsx)("option",{value:a.toString(),children:e},a)))]})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium mb-2 text-gray-900 dark:text-gray-100",children:"Sort By"}),(0,d.jsxs)("select",{value:h.sortBy,onChange:e=>b((0,l.A)((0,l.A)({},h),{},{sortBy:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-white",children:[(0,d.jsx)("option",{value:"date",children:"Date"}),(0,d.jsx)("option",{value:"status",children:"Status"}),(0,d.jsx)("option",{value:"event",children:"Event"})]})]}),(0,d.jsx)("div",{className:"flex items-end",children:(0,d.jsx)("button",{onClick:()=>b({search:"",status:"all",event:"all",sortBy:"date"}),className:"btn btn-secondary w-full",children:"Clear Filters"})})]})}),(0,d.jsx)("div",{className:"space-y-4",children:_.map((a=>{var t,r;return(0,d.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700",children:[(0,d.jsxs)("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700",children:[(0,d.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,d.jsxs)("div",{className:"flex items-center space-x-4",children:[(null===(t=a.event)||void 0===t?void 0:t.logo)&&(0,d.jsx)("img",{src:(0,m.VG)(a.event.logo),alt:a.event_name,className:"w-6 h-6 rounded object-cover",onError:e=>{e.target.style.display="none"}}),(0,d.jsx)("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:a.event_name||"No Event"}),(0,d.jsx)("span",{className:"px-2 py-1 text-xs font-medium rounded-full ".concat(B(a.status)),children:a.status||"Unknown"}),"live"===a.status&&(0,d.jsxs)("span",{className:"flex items-center text-xs text-red-600 dark:text-red-400",children:[(0,d.jsx)("span",{className:"w-2 h-2 bg-red-500 rounded-full mr-1 animate-pulse"}),"LIVE"]})]}),(0,d.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:(r=a.scheduled_at,r?new Date(r).toLocaleDateString()+" "+new Date(r).toLocaleTimeString():"Not scheduled")})]}),(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsx)("div",{className:"flex-1",children:(0,d.jsxs)("div",{className:"flex items-center space-x-3",children:[a.team1&&(0,d.jsx)(m.LE,{team:a.team1,size:"w-8 h-8"}),(0,d.jsx)("div",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:a.team1_name||"TBD"})]})}),(0,d.jsx)("div",{className:"flex items-center space-x-4 px-6",children:"live"===a.status||"completed"===a.status?(0,d.jsx)("div",{className:"flex items-center space-x-2",children:"live"===a.status?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("input",{type:"number",value:a.team1_score||0,onChange:e=>D(a.id,1,parseInt(e.target.value)||0),className:"w-16 px-2 py-1 text-center font-bold text-lg border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-white",min:"0"}),(0,d.jsx)("span",{className:"text-lg font-bold text-gray-500 dark:text-gray-400",children:"-"}),(0,d.jsx)("input",{type:"number",value:a.team2_score||0,onChange:e=>D(a.id,2,parseInt(e.target.value)||0),className:"w-16 px-2 py-1 text-center font-bold text-lg border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-white",min:"0"})]}):(0,d.jsxs)("div",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:[a.team1_score||0," - ",a.team2_score||0]})}):(0,d.jsx)("div",{className:"text-lg text-gray-500 dark:text-gray-400",children:"vs"})}),(0,d.jsx)("div",{className:"flex-1 text-right",children:(0,d.jsxs)("div",{className:"flex items-center justify-end space-x-3",children:[(0,d.jsx)("div",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:a.team2_name||"TBD"}),a.team2&&(0,d.jsx)(m.LE,{team:a.team2,size:"w-8 h-8"})]})})]}),("live"===a.status||"scheduled"===a.status)&&(0,d.jsx)("div",{className:"mt-3 text-center",children:(0,d.jsxs)("button",{onClick:()=>{return e=a.id,void C(N===e?null:e);var e},className:"text-sm text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 flex items-center mx-auto space-x-1",children:[(0,d.jsx)("span",{children:N===a.id?"Hide Live Controls":"Show Live Controls"}),(0,d.jsx)("svg",{className:"w-4 h-4 transform transition-transform ".concat(N===a.id?"rotate-180":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]})})]}),N===a.id&&("live"===a.status||"scheduled"===a.status)&&(0,d.jsxs)("div",{className:"p-4 bg-gray-50 dark:bg-gray-900 border-t border-gray-200 dark:border-gray-700",children:[(0,d.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,d.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-3 border border-red-200 dark:border-red-800",children:[(0,d.jsx)("h4",{className:"font-semibold text-gray-900 dark:text-white mb-2 text-center",children:a.team1_name||"Team 1"}),(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsx)("button",{onClick:()=>D(a.id,1,(a.team1_score||0)+1),className:"w-full px-3 py-1 bg-green-600 hover:bg-green-700 text-white rounded text-sm font-medium",children:"+1 Point"}),(a.team1_score||0)>0&&(0,d.jsx)("button",{onClick:()=>D(a.id,1,Math.max(0,(a.team1_score||0)-1)),className:"w-full px-3 py-1 bg-red-600 hover:bg-red-700 text-white rounded text-sm font-medium",children:"-1 Point"})]})]}),(0,d.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-3 border border-blue-200 dark:border-blue-800",children:[(0,d.jsx)("h4",{className:"font-semibold text-gray-900 dark:text-white mb-2 text-center",children:a.team2_name||"Team 2"}),(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsx)("button",{onClick:()=>D(a.id,2,(a.team2_score||0)+1),className:"w-full px-3 py-1 bg-green-600 hover:bg-green-700 text-white rounded text-sm font-medium",children:"+1 Point"}),(a.team2_score||0)>0&&(0,d.jsx)("button",{onClick:()=>D(a.id,2,Math.max(0,(a.team2_score||0)-1)),className:"w-full px-3 py-1 bg-red-600 hover:bg-red-700 text-white rounded text-sm font-medium",children:"-1 Point"})]})]})]}),(0,d.jsxs)("div",{className:"mt-4 flex justify-center space-x-3",children:["scheduled"===a.status&&(0,d.jsx)("button",{onClick:()=>T(a.id,"live"),className:"px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded font-medium",children:"Start Match"}),"live"===a.status&&(0,d.jsx)("button",{onClick:()=>T(a.id,"completed"),className:"px-4 py-2 bg-purple-600 hover:bg-purple-700 text-white rounded font-medium",children:"Complete Match"})]})]}),(0,d.jsx)("div",{className:"p-4 border-t border-gray-200 dark:border-gray-700",children:(0,d.jsxs)("div",{className:"flex justify-between items-center",children:[(0,d.jsxs)("div",{className:"flex space-x-2",children:[(0,d.jsx)("button",{onClick:()=>(e=>{v(e),k(!0)})(a),className:"text-blue-600 hover:text-blue-900 dark:text-blue-400 dark:hover:text-blue-300 font-medium",children:"Edit"}),(0,d.jsx)("button",{className:"text-gray-600 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300",children:"View Details"})]}),(0,d.jsx)("button",{onClick:()=>(async(a,t)=>{if(window.confirm('Are you sure you want to delete match "'.concat(t,'"? This action cannot be undone.')))try{var r;const t=await e.delete("/api/admin/matches-moderation/".concat(a));var s;if(!1===(null===(r=t.data)||void 0===r?void 0:r.success))throw new Error((null===(s=t.data)||void 0===s?void 0:s.message)||"Delete failed");await A(),alert("Match deleted successfully!")}catch(o){var l,d;console.error("Error deleting match:",o);const a=(null===(l=o.response)||void 0===l||null===(d=l.data)||void 0===d?void 0:d.message)||o.message||"Error deleting match";alert(a)}})(a.id,"".concat(a.team1_name," vs ").concat(a.team2_name)),className:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300 font-medium",children:"Delete"})]})})]},a.id)}))}),E>1&&(0,d.jsxs)("div",{className:"bg-white dark:bg-gray-800 px-4 py-3 flex items-center justify-between border-t border-gray-200 dark:border-gray-700",children:[(0,d.jsxs)("div",{className:"flex-1 flex justify-between sm:hidden",children:[(0,d.jsx)("button",{onClick:()=>g(Math.max(1,x-1)),disabled:1===x,className:"btn btn-secondary",children:"Previous"}),(0,d.jsx)("button",{onClick:()=>g(Math.min(E,x+1)),disabled:x===E,className:"btn btn-secondary",children:"Next"})]}),(0,d.jsxs)("div",{className:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between",children:[(0,d.jsx)("div",{children:(0,d.jsxs)("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:["Showing ",(0,d.jsx)("span",{className:"font-medium",children:(x-1)*u+1})," to"," ",(0,d.jsx)("span",{className:"font-medium",children:Math.min(x*u,S.length)})," ","of ",(0,d.jsx)("span",{className:"font-medium",children:S.length})," results"]})}),(0,d.jsx)("div",{children:(0,d.jsx)("nav",{className:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px",children:[...Array(Math.min(E,7))].map(((e,a)=>{let t;return t=E<=7||x<=4?a+1:x>=E-3?E-6+a:x-3+a,(0,d.jsx)("button",{onClick:()=>g(t),className:"relative inline-flex items-center px-4 py-2 border text-sm font-medium ".concat(x===t?"z-10 bg-blue-50 border-blue-500 text-blue-600":"bg-white border-gray-300 text-gray-500 hover:bg-gray-50"," ").concat(0===a?"rounded-l-md":""," ").concat(a===Math.min(E,7)-1?"rounded-r-md":""),children:t},t)}))})})]})]}),0===S.length&&(0,d.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-12 text-center",children:[(0,d.jsx)("div",{className:"text-6xl mb-4"}),(0,d.jsx)("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:"No Matches Found"}),(0,d.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:h.search||"all"!==h.status||"all"!==h.event?"Try adjusting your filters to find more matches.":"Get started by creating your first match."}),(0,d.jsx)("button",{onClick:z,className:"btn btn-primary",children:"Create First Match"})]}),(0,d.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[(0,d.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6 text-center",children:[(0,d.jsx)("div",{className:"text-3xl mb-2"}),(0,d.jsx)("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:a.length}),(0,d.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total Matches"})]}),(0,d.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6 text-center",children:[(0,d.jsx)("div",{className:"text-3xl mb-2",children:"\ud83d\udd34"}),(0,d.jsx)("div",{className:"text-2xl font-bold text-red-600 dark:text-red-400",children:a.filter((e=>"live"===e.status)).length}),(0,d.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Live Matches"})]}),(0,d.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6 text-center",children:[(0,d.jsx)("div",{className:"text-3xl mb-2"}),(0,d.jsx)("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:a.filter((e=>"scheduled"===e.status)).length}),(0,d.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Scheduled"})]}),(0,d.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6 text-center",children:[(0,d.jsx)("div",{className:"text-3xl mb-2",children:"\u2705"}),(0,d.jsx)("div",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:a.filter((e=>"completed"===e.status)).length}),(0,d.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Completed"})]})]}),f&&(0,d.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,d.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg max-w-5xl w-full max-h-[90vh] overflow-y-auto",children:[(0,d.jsxs)("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700 flex justify-between items-center",children:[(0,d.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Create New Match"}),(0,d.jsx)("button",{onClick:M,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:"\u2715"})]}),(0,d.jsx)("div",{className:"p-6",children:(0,d.jsx)(y.default,{navigateTo:e=>{M(),L()}})})]})}),j&&p&&(0,d.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,d.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg max-w-5xl w-full max-h-[90vh] overflow-y-auto",children:[(0,d.jsxs)("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700 flex justify-between items-center",children:[(0,d.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Edit Match"}),(0,d.jsx)("button",{onClick:P,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:"\u2715"})]}),(0,d.jsx)("div",{className:"p-6",children:(0,d.jsx)(y.default,{matchId:null===p||void 0===p?void 0:p.id,navigateTo:e=>{P(),L()}})})]})})]})};var p=t(1680);function v(e){let{user:a,navigateToProfile:t}=e;const[s,l]=r.useState(!1);if(!a)return(0,d.jsx)("div",{className:"h-10 w-10 rounded-full bg-gray-200 dark:bg-gray-700 flex items-center justify-center text-gray-600 dark:text-gray-400 font-bold text-lg",children:"?"});let i=null;if(a.hero_image)i=a.hero_image;else if(a.hero_flair&&!1!==a.show_hero_flair){const e=(0,m.JH)(a.hero_flair);e&&(i="/images/heroes/".concat(e))}else a.avatar&&(i=(0,m.cG)(a));return s||!i||"?"===i||i.includes("placeholder")||i.includes("data:image")?(0,d.jsx)("div",{className:"h-10 w-10 rounded-full bg-gray-200 dark:bg-gray-700 flex items-center justify-center text-gray-600 dark:text-gray-400 font-bold text-lg cursor-pointer hover:border-blue-500 hover:border-2 transition-all",onClick:t,title:"Click to view ".concat(a.name,"'s profile"),children:"?"}):(0,d.jsx)("div",{className:"h-10 w-10 rounded-full overflow-hidden cursor-pointer border-2 border-transparent hover:border-blue-500 transition-colors bg-gray-200 dark:bg-gray-700",onClick:t,title:"Click to view ".concat(a.name,"'s profile"),children:(0,d.jsx)("img",{src:i,alt:a.name||"User",className:"w-full h-full object-cover",onError:e=>{e.target.onerror=null,e.target.style.display="none",e.target.parentElement.innerHTML='<span class="text-gray-600 dark:text-gray-400 font-bold text-lg">?</span>',e.target.parentElement.classList.add("flex","items-center","justify-center")}})})}const j=function(){const{api:e}=(0,s.As)(),[a,t]=(0,r.useState)([]),[i,n]=(0,r.useState)(!0),[o,c]=(0,r.useState)(null),[x,m]=(0,r.useState)(1),[g]=(0,r.useState)(20),[u,h]=(0,r.useState)({search:"",role:"all",status:"all",sortBy:"created"}),[y,b]=(0,r.useState)(!1),[p,j]=(0,r.useState)(!1),[k,f]=(0,r.useState)(!1),[w,N]=(0,r.useState)(null),[C,A]=(0,r.useState)({name:"",email:"",password:"",role:"user",status:"active",hero_flair:"",team_flair_id:"",show_hero_flair:!0,show_team_flair:!1}),[S,_]=(0,r.useState)({}),[E,T]=(0,r.useState)(!1),[P,M]=(0,r.useState)(new Set),[L,D]=(0,r.useState)(!1),[z,B]=(0,r.useState)([]),[U,I]=(0,r.useState)(!1);(0,r.useEffect)((()=>{F(),R()}),[]);const R=async()=>{try{var a;I(!0);const t=await e.get("/heroes"),r=(null===t||void 0===t||null===(a=t.data)||void 0===a?void 0:a.data)||(null===t||void 0===t?void 0:t.data)||t||[];B(Array.isArray(r)?r:[])}catch(t){console.error("Error fetching heroes:",t),B([])}finally{I(!1)}},F=(0,r.useCallback)((async function(){let a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50;try{var s;n(!0),c(null);const l=await e.get("/admin/users?page=".concat(a,"&limit=").concat(r)),d=(null===l||void 0===l||null===(s=l.data)||void 0===s?void 0:s.data)||(null===l||void 0===l?void 0:l.data)||l||[];t(Array.isArray(d)?d:[])}catch(i){var l,d;const e=(null===(l=i.response)||void 0===l||null===(d=l.data)||void 0===d?void 0:d.message)||i.message||"Failed to load users";c(e),console.error("Error fetching users:",i),t([])}finally{n(!1)}}),[e]),O=(0,r.useMemo)((()=>{let e=[...a];if(u.search.trim()){const a=u.search.toLowerCase().trim();e=e.filter((e=>{var t,r;return(null===(t=e.name)||void 0===t?void 0:t.toLowerCase().includes(a))||(null===(r=e.email)||void 0===r?void 0:r.toLowerCase().includes(a))}))}return"all"!==u.role&&(e=e.filter((e=>e.role===u.role))),"all"!==u.status&&(e=e.filter((e=>e.status===u.status))),"created"===u.sortBy?e.sort(((e,a)=>new Date(a.created_at)-new Date(e.created_at))):"name"===u.sortBy?e.sort(((e,a)=>(e.name||"").localeCompare(a.name||""))):"email"===u.sortBy&&e.sort(((e,a)=>(e.email||"").localeCompare(a.email||""))),e}),[a,u]),H=(0,r.useMemo)((()=>{const e=(x-1)*g;return O.slice(e,e+g)}),[O,x,g]),V=Math.ceil(O.length/g);(0,r.useEffect)((()=>{m(1)}),[u]);const q=()=>{b(!1),j(!1),f(!1),N(null),A({name:"",email:"",password:"",role:"user",status:"active",hero_flair:"",team_flair_id:"",show_hero_flair:!0,show_team_flair:!1}),_({})},G=function(e){let a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const t={};return e.name.trim()||(t.name="Name is required"),e.email.trim()?/\S+@\S+\.\S+/.test(e.email)||(t.email="Email is invalid"):t.email="Email is required",a||e.password.trim()?e.password.trim()&&e.password.length<8&&(t.password="Password must be at least 8 characters"):t.password="Password is required",["admin","moderator","user"].includes(e.role)||(t.role="Invalid role selected"),["active","inactive","banned","suspended"].includes(e.status)||(t.status="Invalid status selected"),t},W=e=>{switch(e){case"admin":return"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400";case"moderator":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-400";case"user":return"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400";default:return"bg-gray-100 text-gray-800 dark:bg-gray-900/20 dark:text-gray-400"}},Z=e=>{switch(e){case"active":return"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400";case"banned":return"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400";case"suspended":return"bg-orange-100 text-orange-800 dark:bg-orange-900/20 dark:text-orange-400";default:return"bg-gray-100 text-gray-800 dark:bg-gray-900/20 dark:text-gray-400"}},Q=async a=>{if(0===P.size)return;const t='Are you sure you want to change status to "'.concat(a,'" for ').concat(P.size," users?");if(window.confirm(t))try{var r;const t=await e.post("/api/admin/users/bulk-update",{user_ids:Array.from(P),status:a});var s;if(!1===(null===(r=t.data)||void 0===r?void 0:r.success))throw new Error((null===(s=t.data)||void 0===s?void 0:s.message)||"Bulk update failed");await F(),M(new Set),D(!1),alert("".concat(P.size," users updated successfully!"))}catch(o){var l,d;console.error("Error in bulk status update:",o);const a=(null===(l=o.response)||void 0===l||null===(d=l.data)||void 0===d?void 0:d.message)||o.message||"Bulk update failed";alert(a)}};return i?(0,d.jsx)("div",{className:"p-6",children:(0,d.jsxs)("div",{className:"animate-pulse space-y-6",children:[(0,d.jsx)("div",{className:"h-8 bg-gray-200 dark:bg-gray-700 rounded w-1/4"}),(0,d.jsx)("div",{className:"h-20 bg-gray-200 dark:bg-gray-700 rounded"}),(0,d.jsx)("div",{className:"space-y-3",children:[...Array(10)].map(((e,a)=>(0,d.jsx)("div",{className:"h-16 bg-gray-200 dark:bg-gray-700 rounded"},a)))})]})}):o?(0,d.jsx)("div",{className:"p-6",children:(0,d.jsxs)("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-6 text-center",children:[(0,d.jsx)("h3",{className:"text-lg font-semibold text-red-900 dark:text-red-200 mb-2",children:"Error Loading Users"}),(0,d.jsx)("p",{className:"text-red-700 dark:text-red-300 mb-4",children:o}),(0,d.jsx)("button",{onClick:F,className:"btn btn-outline-primary",children:"Try Again"})]})}):(0,d.jsxs)("div",{className:"p-6 space-y-6",children:[(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"User Management"}),(0,d.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"Manage user accounts and permissions"})]}),(0,d.jsxs)("button",{onClick:()=>{A({name:"",email:"",password:"",role:"user",status:"active",hero_flair:"",team_flair_id:"",show_hero_flair:!0,show_team_flair:!1}),_({}),b(!0)},className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg flex items-center space-x-2",children:[(0,d.jsx)("span",{children:"+"}),(0,d.jsx)("span",{children:"Create User"})]})]}),(0,d.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:(0,d.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium mb-2 text-gray-900 dark:text-gray-100",children:"Search Users"}),(0,d.jsx)("input",{type:"text",placeholder:"Search by name or email...",value:u.search,onChange:e=>h((0,l.A)((0,l.A)({},u),{},{search:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-white"})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium mb-2 text-gray-900 dark:text-gray-100",children:"Role"}),(0,d.jsxs)("select",{value:u.role,onChange:e=>h((0,l.A)((0,l.A)({},u),{},{role:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-white",children:[(0,d.jsx)("option",{value:"all",children:"All Roles"}),(0,d.jsx)("option",{value:"admin",children:"Admin"}),(0,d.jsx)("option",{value:"moderator",children:"Moderator"}),(0,d.jsx)("option",{value:"user",children:"User"})]})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium mb-2 text-gray-900 dark:text-gray-100",children:"Status"}),(0,d.jsxs)("select",{value:u.status,onChange:e=>h((0,l.A)((0,l.A)({},u),{},{status:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-white",children:[(0,d.jsx)("option",{value:"all",children:"All Status"}),(0,d.jsx)("option",{value:"active",children:"Active"}),(0,d.jsx)("option",{value:"inactive",children:"Inactive"}),(0,d.jsx)("option",{value:"suspended",children:"Suspended"}),(0,d.jsx)("option",{value:"banned",children:"Banned"})]})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium mb-2 text-gray-900 dark:text-gray-100",children:"Sort By"}),(0,d.jsxs)("select",{value:u.sortBy,onChange:e=>h((0,l.A)((0,l.A)({},u),{},{sortBy:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-white",children:[(0,d.jsx)("option",{value:"created",children:"Created Date"}),(0,d.jsx)("option",{value:"name",children:"Name"}),(0,d.jsx)("option",{value:"email",children:"Email"})]})]}),(0,d.jsx)("div",{className:"flex items-end",children:(0,d.jsx)("button",{onClick:()=>h({search:"",role:"all",status:"all",sortBy:"created"}),className:"btn btn-secondary w-full",children:"Clear Filters"})})]})}),L&&(0,d.jsx)("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,d.jsxs)("span",{className:"text-sm font-medium text-blue-900 dark:text-blue-200",children:[P.size," users selected"]}),(0,d.jsxs)("div",{className:"flex space-x-2",children:[(0,d.jsx)("button",{onClick:()=>Q("active"),className:"px-3 py-1 bg-green-600 hover:bg-green-700 text-white rounded text-sm",children:"Activate"}),(0,d.jsx)("button",{onClick:()=>Q("inactive"),className:"px-3 py-1 bg-yellow-600 hover:bg-yellow-700 text-white rounded text-sm",children:"Deactivate"}),(0,d.jsx)("button",{onClick:()=>Q("banned"),className:"px-3 py-1 bg-red-600 hover:bg-red-700 text-white rounded text-sm",children:"Ban"}),(0,d.jsx)("button",{onClick:()=>Q("suspended"),className:"px-3 py-1 bg-orange-600 hover:bg-orange-700 text-white rounded text-sm",children:"Suspend"}),(0,d.jsx)("button",{onClick:()=>(async a=>{if(0===P.size)return;const t='Are you sure you want to change role to "'.concat(a,'" for ').concat(P.size," users?");if(window.confirm(t))try{var r;const t=await e.post("/api/admin/users/bulk-update",{user_ids:Array.from(P),role:a});var s;if(!1===(null===(r=t.data)||void 0===r?void 0:r.success))throw new Error((null===(s=t.data)||void 0===s?void 0:s.message)||"Bulk update failed");await F(),M(new Set),D(!1),alert("".concat(P.size," users updated successfully!"))}catch(o){var l,d;console.error("Error in bulk role update:",o);const a=(null===(l=o.response)||void 0===l||null===(d=l.data)||void 0===d?void 0:d.message)||o.message||"Bulk update failed";alert(a)}})("moderator"),className:"px-3 py-1 bg-purple-600 hover:bg-purple-700 text-white rounded text-sm",children:"Make Moderator"}),(0,d.jsx)("button",{onClick:async()=>{if(0===P.size)return;const a="Are you sure you want to delete ".concat(P.size," users? This action cannot be undone.");if(window.confirm(a))try{var t;const a=await e.post("/admin/users/bulk-delete",{user_ids:Array.from(P)});var r;if(!1===(null===(t=a.data)||void 0===t?void 0:t.success))throw new Error((null===(r=a.data)||void 0===r?void 0:r.message)||"Bulk delete failed");await F(),M(new Set),D(!1),alert("".concat(P.size," users deleted successfully!"))}catch(o){var s,l;console.error("Error in bulk delete:",o);const a=(null===(s=o.response)||void 0===s||null===(l=s.data)||void 0===l?void 0:l.message)||o.message||"Bulk delete failed";alert(a)}},className:"px-3 py-1 bg-red-600 hover:bg-red-700 text-white rounded text-sm",children:"Delete"})]})]}),(0,d.jsx)("button",{onClick:()=>{M(new Set),D(!1)},className:"text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 text-sm",children:"Clear Selection"})]})}),(0,d.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden",children:[(0,d.jsx)("div",{className:"overflow-x-auto",children:(0,d.jsxs)("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[(0,d.jsx)("thead",{className:"bg-gray-50 dark:bg-gray-900",children:(0,d.jsxs)("tr",{children:[(0,d.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:(0,d.jsx)("input",{type:"checkbox",checked:P.size===O.length&&O.length>0,onChange:()=>{P.size===O.length?(M(new Set),D(!1)):(M(new Set(O.map((e=>e.id)))),D(!0))},className:"rounded border-gray-300 dark:border-gray-600"})}),(0,d.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"User"}),(0,d.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Role"}),(0,d.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Status"}),(0,d.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Joined"}),(0,d.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Actions"})]})}),(0,d.jsx)("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:H.map((a=>(0,d.jsxs)("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700",children:[(0,d.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,d.jsx)("input",{type:"checkbox",checked:P.has(a.id),onChange:()=>(e=>{const a=new Set(P);a.has(e)?a.delete(e):a.add(e),M(a),D(a.size>0)})(a.id),className:"rounded border-gray-300 dark:border-gray-600"})}),(0,d.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,d.jsxs)("div",{className:"flex items-center",children:[(0,d.jsx)("div",{className:"flex-shrink-0 h-10 w-10",children:(0,d.jsx)(v,{user:a,navigateToProfile:()=>{console.log("\ud83d\udd0d AdminUsers: Navigating to user profile:",a.id),window.confirm("Navigate to user profile for ".concat(a.name,"?"))&&window.open("/profile/".concat(a.id),"_blank")}})}),(0,d.jsxs)("div",{className:"ml-4",children:[(0,d.jsxs)("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:[a.name,a.hero_flair&&(0,d.jsx)("span",{className:"ml-2 inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-400",children:a.hero_flair})]}),(0,d.jsx)("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:a.email})]})]})}),(0,d.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,d.jsxs)("select",{value:a.role||"user",onChange:t=>(async(a,t)=>{try{var r;const l=await e.put("/admin/users/".concat(a),{role:t});var s;if(!1===(null===(r=l.data)||void 0===r?void 0:r.success))throw new Error((null===(s=l.data)||void 0===s?void 0:s.message)||"Role update failed");await F(),alert("User role updated to ".concat(t,"!"))}catch(o){var l,d;console.error("Error updating user role:",o);const a=(null===(l=o.response)||void 0===l||null===(d=l.data)||void 0===d?void 0:d.message)||o.message||"Error updating user role";alert(a)}})(a.id,t.target.value),className:"px-2 py-1 text-xs font-medium rounded-full border-0 ".concat(W(a.role)),children:[(0,d.jsx)("option",{value:"user",children:"User"}),(0,d.jsx)("option",{value:"moderator",children:"Moderator"}),(0,d.jsx)("option",{value:"admin",children:"Admin"})]})}),(0,d.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,d.jsxs)("select",{value:a.status||"active",onChange:t=>(async(a,t)=>{try{var r;n(!0);const l=await e.put("/admin/users/".concat(a),{status:t});var s;if(!1===(null===(r=l.data)||void 0===r?void 0:r.success))throw new Error((null===(s=l.data)||void 0===s?void 0:s.message)||"Status update failed");await F(),alert("User status updated to ".concat(t,"!"))}catch(o){var l,d;console.error("Error updating user status:",o);const a=(null===(l=o.response)||void 0===l||null===(d=l.data)||void 0===d?void 0:d.message)||"Error updating user status. Please try again.";alert(a)}finally{n(!1)}})(a.id,t.target.value),className:"px-2 py-1 text-xs font-medium rounded-full border-0 ".concat(Z(a.status)),children:[(0,d.jsx)("option",{value:"active",children:"Active"}),(0,d.jsx)("option",{value:"inactive",children:"Inactive"}),(0,d.jsx)("option",{value:"banned",children:"Banned"}),(0,d.jsx)("option",{value:"suspended",children:"Suspended"})]})}),(0,d.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,d.jsx)("div",{className:"text-sm text-gray-900 dark:text-white",children:a.created_at?new Date(a.created_at).toLocaleDateString():"Unknown"})}),(0,d.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:(0,d.jsxs)("div",{className:"flex space-x-2",children:[(0,d.jsx)("button",{onClick:()=>(e=>{N(e),f(!0)})(a),className:"text-blue-600 hover:text-blue-900 dark:text-blue-400 dark:hover:text-blue-300",children:"View"}),(0,d.jsx)("button",{onClick:()=>(e=>{var a,t;N(e),A({name:e.name||"",email:e.email||"",password:"",role:e.role||"user",status:e.status||"active",hero_flair:e.hero_flair||"",team_flair_id:e.team_flair_id||"",show_hero_flair:null===(a=e.show_hero_flair)||void 0===a||a,show_team_flair:null!==(t=e.show_team_flair)&&void 0!==t&&t}),_({}),j(!0)})(a),className:"text-yellow-600 hover:text-yellow-900 dark:text-yellow-400 dark:hover:text-yellow-300",children:"Edit"}),(0,d.jsx)("button",{onClick:()=>(async(a,t)=>{if(window.confirm('Are you sure you want to delete user "'.concat(t,'"? This action cannot be undone.')))try{var r;n(!0);const t=await e.delete("/admin/users/".concat(a));var s;if(!1===(null===(r=t.data)||void 0===r?void 0:r.success))throw new Error((null===(s=t.data)||void 0===s?void 0:s.message)||"Delete failed");await F(),alert("User deleted successfully!")}catch(o){var l,d;console.error("Error deleting user:",o);const a=(null===(l=o.response)||void 0===l||null===(d=l.data)||void 0===d?void 0:d.message)||"Error deleting user. Please try again.";alert(a)}finally{n(!1)}})(a.id,a.name),className:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300",children:"Delete"})]})})]},a.id)))})]})}),V>1&&(0,d.jsxs)("div",{className:"bg-white dark:bg-gray-800 px-4 py-3 flex items-center justify-between border-t border-gray-200 dark:border-gray-700",children:[(0,d.jsxs)("div",{className:"flex-1 flex justify-between sm:hidden",children:[(0,d.jsx)("button",{onClick:()=>m(Math.max(1,x-1)),disabled:1===x,className:"btn btn-secondary",children:"Previous"}),(0,d.jsx)("button",{onClick:()=>m(Math.min(V,x+1)),disabled:x===V,className:"btn btn-secondary",children:"Next"})]}),(0,d.jsx)("div",{className:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between",children:(0,d.jsx)("div",{children:(0,d.jsxs)("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:["Showing ",(0,d.jsx)("span",{className:"font-medium",children:(x-1)*g+1})," to"," ",(0,d.jsx)("span",{className:"font-medium",children:Math.min(x*g,O.length)})," ","of ",(0,d.jsx)("span",{className:"font-medium",children:O.length})," results"]})})})]})]}),(0,d.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[(0,d.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6 text-center",children:[(0,d.jsx)("div",{className:"text-3xl mb-2"}),(0,d.jsx)("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:a.length}),(0,d.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total Users"})]}),(0,d.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6 text-center",children:[(0,d.jsx)("div",{className:"text-3xl mb-2",children:"\ud83d\udd34"}),(0,d.jsx)("div",{className:"text-2xl font-bold text-red-600 dark:text-red-400",children:a.filter((e=>"admin"===e.role)).length}),(0,d.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Admins"})]}),(0,d.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6 text-center",children:[(0,d.jsx)("div",{className:"text-3xl mb-2",children:"\ud83d\udfe1"}),(0,d.jsx)("div",{className:"text-2xl font-bold text-yellow-600 dark:text-yellow-400",children:a.filter((e=>"moderator"===e.role)).length}),(0,d.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Moderators"})]}),(0,d.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6 text-center",children:[(0,d.jsx)("div",{className:"text-3xl mb-2",children:"\u2705"}),(0,d.jsx)("div",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:a.filter((e=>"active"===e.status)).length}),(0,d.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Active"})]})]}),y&&(0,d.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,d.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 w-full max-w-md max-h-screen overflow-y-auto",children:[(0,d.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,d.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Create New User"}),(0,d.jsx)("button",{onClick:q,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:"\u2715"})]}),(0,d.jsxs)("form",{onSubmit:async a=>{a.preventDefault();const t=G(C,!1);if(Object.keys(t).length>0)_(t);else{T(!0),_({});try{var r;const a=await e.post("/admin/users",C);var s;if(!1===(null===(r=a.data)||void 0===r?void 0:r.success))throw new Error((null===(s=a.data)||void 0===s?void 0:s.message)||"User creation failed");await F(),q(),alert("User created successfully!")}catch(o){var l,d,i,n;console.error("Error creating user:",o);const a=(null===(l=o.response)||void 0===l||null===(d=l.data)||void 0===d?void 0:d.message)||"Error creating user. Please try again.";null!==(i=o.response)&&void 0!==i&&null!==(n=i.data)&&void 0!==n&&n.errors?_(o.response.data.errors):alert(a)}finally{T(!1)}}},className:"space-y-4",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Name *"}),(0,d.jsx)("input",{type:"text",value:C.name,onChange:e=>A((0,l.A)((0,l.A)({},C),{},{name:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-white",required:!0}),S.name&&(0,d.jsx)("p",{className:"text-red-500 text-xs mt-1",children:S.name})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Email *"}),(0,d.jsx)("input",{type:"email",value:C.email,onChange:e=>A((0,l.A)((0,l.A)({},C),{},{email:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-white",required:!0}),S.email&&(0,d.jsx)("p",{className:"text-red-500 text-xs mt-1",children:S.email})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Password *"}),(0,d.jsx)("input",{type:"password",value:C.password,onChange:e=>A((0,l.A)((0,l.A)({},C),{},{password:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-white",required:!0}),S.password&&(0,d.jsx)("p",{className:"text-red-500 text-xs mt-1",children:S.password})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Role"}),(0,d.jsxs)("select",{value:C.role,onChange:e=>A((0,l.A)((0,l.A)({},C),{},{role:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-white",children:[(0,d.jsx)("option",{value:"user",children:"User"}),(0,d.jsx)("option",{value:"moderator",children:"Moderator"}),(0,d.jsx)("option",{value:"admin",children:"Admin"})]}),S.role&&(0,d.jsx)("p",{className:"text-red-500 text-xs mt-1",children:S.role})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Status"}),(0,d.jsxs)("select",{value:C.status,onChange:e=>A((0,l.A)((0,l.A)({},C),{},{status:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-white",children:[(0,d.jsx)("option",{value:"active",children:"Active"}),(0,d.jsx)("option",{value:"inactive",children:"Inactive"}),(0,d.jsx)("option",{value:"banned",children:"Banned"}),(0,d.jsx)("option",{value:"suspended",children:"Suspended"})]}),S.status&&(0,d.jsx)("p",{className:"text-red-500 text-xs mt-1",children:S.status})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Hero Avatar"}),(0,d.jsxs)("select",{value:C.hero_flair,onChange:e=>A((0,l.A)((0,l.A)({},C),{},{hero_flair:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-white",children:[(0,d.jsx)("option",{value:"",children:"No Hero Selected"}),z.map((e=>(0,d.jsx)("option",{value:e.name,children:e.name},e.name)))]}),S.hero_flair&&(0,d.jsx)("p",{className:"text-red-500 text-xs mt-1",children:S.hero_flair})]}),(0,d.jsxs)("div",{className:"flex items-center",children:[(0,d.jsx)("input",{type:"checkbox",id:"create_show_hero_flair",checked:C.show_hero_flair,onChange:e=>A((0,l.A)((0,l.A)({},C),{},{show_hero_flair:e.target.checked})),className:"mr-2"}),(0,d.jsx)("label",{htmlFor:"create_show_hero_flair",className:"text-sm text-gray-700 dark:text-gray-300",children:"Show hero avatar publicly"})]}),(0,d.jsxs)("div",{className:"flex justify-end space-x-3 pt-4",children:[(0,d.jsx)("button",{type:"button",onClick:q,className:"px-4 py-2 text-gray-700 dark:text-gray-300 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700",children:"Cancel"}),(0,d.jsx)("button",{type:"submit",disabled:E,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50",children:E?"Creating...":"Create User"})]})]})]})}),p&&w&&(0,d.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,d.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 w-full max-w-md max-h-screen overflow-y-auto",children:[(0,d.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,d.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Edit User"}),(0,d.jsx)("button",{onClick:q,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:"\u2715"})]}),(0,d.jsxs)("form",{onSubmit:async a=>{a.preventDefault();const t=G(C,!0);if(Object.keys(t).length>0)_(t);else{T(!0),_({});try{var r;const a=(0,l.A)({},C);a.password.trim()||delete a.password;const t=await e.put("/admin/users/".concat(w.id),a);var s;if(!1===(null===(r=t.data)||void 0===r?void 0:r.success))throw new Error((null===(s=t.data)||void 0===s?void 0:s.message)||"User update failed");await F(),q(),alert("User updated successfully!")}catch(o){var d,i,n,c;console.error("Error updating user:",o);const a=(null===(d=o.response)||void 0===d||null===(i=d.data)||void 0===i?void 0:i.message)||"Error updating user. Please try again.";null!==(n=o.response)&&void 0!==n&&null!==(c=n.data)&&void 0!==c&&c.errors?_(o.response.data.errors):alert(a)}finally{T(!1)}}},className:"space-y-4",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Name *"}),(0,d.jsx)("input",{type:"text",value:C.name,onChange:e=>A((0,l.A)((0,l.A)({},C),{},{name:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-white",required:!0}),S.name&&(0,d.jsx)("p",{className:"text-red-500 text-xs mt-1",children:S.name})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Email *"}),(0,d.jsx)("input",{type:"email",value:C.email,onChange:e=>A((0,l.A)((0,l.A)({},C),{},{email:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-white",required:!0}),S.email&&(0,d.jsx)("p",{className:"text-red-500 text-xs mt-1",children:S.email})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Password (Leave blank to keep current)"}),(0,d.jsx)("input",{type:"password",value:C.password,onChange:e=>A((0,l.A)((0,l.A)({},C),{},{password:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-white"}),S.password&&(0,d.jsx)("p",{className:"text-red-500 text-xs mt-1",children:S.password})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Role"}),(0,d.jsxs)("select",{value:C.role,onChange:e=>A((0,l.A)((0,l.A)({},C),{},{role:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-white",children:[(0,d.jsx)("option",{value:"user",children:"User"}),(0,d.jsx)("option",{value:"moderator",children:"Moderator"}),(0,d.jsx)("option",{value:"admin",children:"Admin"})]}),S.role&&(0,d.jsx)("p",{className:"text-red-500 text-xs mt-1",children:S.role})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Status"}),(0,d.jsxs)("select",{value:C.status,onChange:e=>A((0,l.A)((0,l.A)({},C),{},{status:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-white",children:[(0,d.jsx)("option",{value:"active",children:"Active"}),(0,d.jsx)("option",{value:"inactive",children:"Inactive"}),(0,d.jsx)("option",{value:"banned",children:"Banned"}),(0,d.jsx)("option",{value:"suspended",children:"Suspended"})]}),S.status&&(0,d.jsx)("p",{className:"text-red-500 text-xs mt-1",children:S.status})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Hero Avatar"}),(0,d.jsxs)("select",{value:C.hero_flair,onChange:e=>A((0,l.A)((0,l.A)({},C),{},{hero_flair:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-white",children:[(0,d.jsx)("option",{value:"",children:"No Hero Selected"}),z.map((e=>(0,d.jsx)("option",{value:e.name,children:e.name},e.name)))]}),S.hero_flair&&(0,d.jsx)("p",{className:"text-red-500 text-xs mt-1",children:S.hero_flair})]}),(0,d.jsxs)("div",{className:"flex items-center",children:[(0,d.jsx)("input",{type:"checkbox",id:"edit_show_hero_flair",checked:C.show_hero_flair,onChange:e=>A((0,l.A)((0,l.A)({},C),{},{show_hero_flair:e.target.checked})),className:"mr-2"}),(0,d.jsx)("label",{htmlFor:"edit_show_hero_flair",className:"text-sm text-gray-700 dark:text-gray-300",children:"Show hero avatar publicly"})]}),(0,d.jsxs)("div",{className:"flex justify-end space-x-3 pt-4",children:[(0,d.jsx)("button",{type:"button",onClick:q,className:"px-4 py-2 text-gray-700 dark:text-gray-300 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700",children:"Cancel"}),(0,d.jsx)("button",{type:"submit",disabled:E,className:"px-4 py-2 bg-yellow-600 text-white rounded-lg hover:bg-yellow-700 disabled:opacity-50",children:E?"Updating...":"Update User"})]})]})]})}),k&&w&&(0,d.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,d.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 w-full max-w-md max-h-screen overflow-y-auto",children:[(0,d.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,d.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"User Details"}),(0,d.jsx)("button",{onClick:q,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:"\u2715"})]}),(0,d.jsxs)("div",{className:"space-y-4",children:[(0,d.jsxs)("div",{className:"text-center",children:[(0,d.jsx)("div",{className:"h-16 w-16 mx-auto mb-3",children:(0,d.jsx)(v,{user:w,navigateToProfile:()=>{}})}),(0,d.jsx)("h4",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:w.name}),(0,d.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:w.email}),w.hero_flair&&(0,d.jsxs)("p",{className:"text-sm text-blue-600 dark:text-blue-400 mt-1",children:["Hero: ",w.hero_flair]})]}),(0,d.jsxs)("div",{className:"grid grid-cols-2 gap-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Role"}),(0,d.jsx)("span",{className:"px-2 py-1 text-xs font-medium rounded-full ".concat(W(w.role)),children:w.role||"user"})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Status"}),(0,d.jsx)("span",{className:"px-2 py-1 text-xs font-medium rounded-full ".concat(Z(w.status)),children:w.status||"active"})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Joined"}),(0,d.jsx)("p",{className:"text-sm text-gray-900 dark:text-white",children:w.created_at?new Date(w.created_at).toLocaleDateString():"Unknown"})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Last Login"}),(0,d.jsx)("p",{className:"text-sm text-gray-900 dark:text-white",children:w.last_login?new Date(w.last_login).toLocaleDateString():"Never"})]})]}),w.stats&&(0,d.jsxs)("div",{className:"pt-4 border-t border-gray-200 dark:border-gray-700",children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Activity Stats"}),(0,d.jsxs)("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[(0,d.jsxs)("div",{children:["Forum Posts: ",w.stats.total_forum_posts||0]}),(0,d.jsxs)("div",{children:["Comments: ",w.stats.total_comments||0]}),(0,d.jsxs)("div",{children:["Forum Threads: ",w.stats.total_forum_threads||0]})]})]}),(0,d.jsx)("div",{className:"flex justify-end pt-4",children:(0,d.jsx)("button",{onClick:q,className:"px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700",children:"Close"})})]})]})})]})};t(6781);const k=function(e){let{navigateTo:a}=e;const{api:t}=(0,s.As)(),[l,i]=(0,r.useState)([]),[n,o]=(0,r.useState)([]),[c,x]=(0,r.useState)(!0),[g,u]=(0,r.useState)("list"),[h,y]=(0,r.useState)(null),[b,p]=(0,r.useState)("all"),[v,j]=(0,r.useState)("");(0,r.useEffect)((()=>{k(),f()}),[]);const k=async()=>{try{var e;x(!0);const a=await t.get("/admin/news-moderation"),r=(null===a||void 0===a||null===(e=a.data)||void 0===e?void 0:e.data)||(null===a||void 0===a?void 0:a.data)||[];console.log("\ud83d\udcf0 News data received:",r.slice(0,1)),i(Array.isArray(r)?r:[])}catch(a){console.error("Error fetching news:",a),i([])}finally{x(!1)}},f=async()=>{try{var e;const a=await t.get("/news/categories"),r=(null===a||void 0===a||null===(e=a.data)||void 0===e?void 0:e.data)||(null===a||void 0===a?void 0:a.data)||[];o(Array.isArray(r)?r:[])}catch(a){console.error("Error fetching categories:",a),o([])}},w=l.filter((e=>{var a,t,r,s;const l=(null===(a=e.title)||void 0===a?void 0:a.toLowerCase().includes(v.toLowerCase()))||(null===(t=e.excerpt)||void 0===t?void 0:t.toLowerCase().includes(v.toLowerCase())),d="all"===b||e.category===b||(null===(r=e.category)||void 0===r?void 0:r.slug)===b||(null===(s=e.category)||void 0===s?void 0:s.id)===b;return l&&d}));return"edit"===g?(a("admin-news-edit",{id:null===h||void 0===h?void 0:h.id}),null):"create"===g?(a("admin-news-create"),null):(0,d.jsxs)("div",{className:"p-6",children:[(0,d.jsxs)("div",{className:"mb-6",children:[(0,d.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"News Management"}),(0,d.jsxs)("div",{className:"flex flex-wrap gap-4 mb-4",children:[(0,d.jsx)("button",{onClick:()=>{y(null),u("create")},className:"px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700",children:"+ Create Article"}),(0,d.jsx)("input",{type:"text",placeholder:"Search articles...",value:v,onChange:e=>j(e.target.value),className:"px-4 py-2 border rounded flex-1 max-w-xs"}),(0,d.jsxs)("select",{value:b,onChange:e=>p(e.target.value),className:"px-4 py-2 border rounded",children:[(0,d.jsx)("option",{value:"all",children:"All Categories"}),n.map((e=>(0,d.jsx)("option",{value:e.slug||e.id,children:e.name},e.slug||e.id)))]})]})]}),c?(0,d.jsx)("div",{className:"text-center py-8",children:"Loading..."}):(0,d.jsx)("div",{className:"grid gap-4",children:0===w.length?(0,d.jsx)("div",{className:"text-center py-8 text-gray-500",children:"No articles found"}):w.map((e=>{var a;return console.log("\ud83d\uddbc\ufe0f Article image data:",{id:e.id,featured_image:e.featured_image,featured_image_url:e.featured_image_url,image:e.image}),(0,d.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-4",children:(0,d.jsxs)("div",{className:"flex gap-4",children:[(0,d.jsx)("div",{className:"flex-shrink-0",children:(0,d.jsx)("img",{src:(0,m.G8)(e),alt:e.title,className:"w-24 h-24 object-cover rounded",onError:e=>{console.log("\ud83d\uddbc\ufe0f Image failed to load:",e.target.src),e.target.src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iOTYiIGhlaWdodD0iOTYiIHZpZXdCb3g9IjAgMCA5NiA5NiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9Ijk2IiBoZWlnaHQ9Ijk2IiBmaWxsPSIjRjNGNEY2Ii8+Cjx0ZXh0IHg9IjQ4IiB5PSI1OCIgZm9udC1mYW1pbHk9InN5c3RlbS11aSIgZm9udC1zaXplPSIzMiIgZm9udC13ZWlnaHQ9ImJvbGQiIGZpbGw9IiM2QjcyODAiIHRleHQtYW5jaG9yPSJtaWRkbGUiPj88L3RleHQ+Cjwvc3ZnPg=="},onLoad:()=>{console.log("\ud83d\uddbc\ufe0f Image loaded successfully:",(0,m.G8)(e))}})}),(0,d.jsxs)("div",{className:"flex-1",children:[(0,d.jsx)("div",{className:"flex justify-between items-start mb-2",children:(0,d.jsxs)("div",{children:[(0,d.jsxs)("h3",{className:"text-lg font-semibold",children:[e.title,e.featured&&(0,d.jsx)("span",{className:"ml-2 text-xs bg-yellow-100 text-yellow-800 px-2 py-1 rounded",children:"Featured"}),(0,d.jsx)("span",{className:"ml-2 text-xs px-2 py-1 rounded ".concat("published"===e.status?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"),children:e.status})]}),(0,d.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:e.excerpt||"No excerpt"})]})}),(0,d.jsxs)("div",{className:"flex flex-wrap gap-4 text-sm text-gray-500 mb-3",children:[(0,d.jsxs)("span",{children:["Category: ","string"===typeof e.category?e.category:(null===(a=e.category)||void 0===a?void 0:a.name)||"Uncategorized"]}),(0,d.jsxs)("span",{children:["Views: ",e.views||0]}),(0,d.jsxs)("span",{children:["Comments: ",e.comments_count||0]}),(0,d.jsxs)("span",{children:["Published: ",e.published_at?new Date(e.published_at).toLocaleDateString():"Not published"]})]}),(0,d.jsxs)("div",{className:"flex gap-2",children:[(0,d.jsx)("button",{onClick:()=>(e=>{y(e),u("edit")})(e),className:"px-3 py-1 bg-blue-600 text-white text-sm rounded hover:bg-blue-700",children:"Edit"}),(0,d.jsx)("button",{onClick:()=>(async e=>{try{const a="published"===e.status?"draft":"published";await t.put("/admin/news/".concat(e.id),{status:a}),await k()}catch(a){alert("Failed to update publish status")}})(e),className:"px-3 py-1 text-white text-sm rounded ".concat("published"===e.status?"bg-gray-600 hover:bg-gray-700":"bg-green-600 hover:bg-green-700"),children:"published"===e.status?"Unpublish":"Publish"}),(0,d.jsx)("button",{onClick:()=>(async e=>{try{const a=e.featured?"/moderator/news/".concat(e.id,"/unfeature"):"/moderator/news/".concat(e.id,"/feature");await t.put(a),await k()}catch(a){alert("Failed to update featured status")}})(e),className:"px-3 py-1 text-white text-sm rounded ".concat(e.featured?"bg-gray-600 hover:bg-gray-700":"bg-yellow-600 hover:bg-yellow-700"),children:e.featured?"Unfeature":"Feature"}),(0,d.jsx)("button",{onClick:()=>(async e=>{if(window.confirm("Are you sure you want to delete this article?"))try{await t.delete("/admin/news/".concat(e)),await k(),alert("Article deleted successfully")}catch(a){alert("Failed to delete article")}})(e.id),className:"px-3 py-1 bg-red-600 text-white text-sm rounded hover:bg-red-700",children:"Delete"})]})]})]})},e.id)}))})]})};const f=function(e){let{navigateTo:a}=e;const{api:t,user:l}=(0,s.As)(),[i,n]=(0,r.useState)([]),[o,c]=(0,r.useState)([]),[x,m]=(0,r.useState)(!0),[g,u]=(0,r.useState)("all"),[h,y]=(0,r.useState)("");(0,r.useEffect)((()=>{b(),p()}),[]);const b=async()=>{try{var e;m(!0);const a=await t.get("/forums/threads?sort=latest&limit=50"),r=(null===a||void 0===a||null===(e=a.data)||void 0===e?void 0:e.data)||(null===a||void 0===a?void 0:a.data)||[];n(Array.isArray(r)?r:[])}catch(a){console.error("Error fetching threads:",a),n([])}finally{m(!1)}},p=async()=>{try{var e;const a=await t.get("/forums/categories"),r=(null===a||void 0===a||null===(e=a.data)||void 0===e?void 0:e.data)||(null===a||void 0===a?void 0:a.data)||[];c(Array.isArray(r)?r:[])}catch(a){console.error("Error fetching categories:",a),c([])}},v=i.filter((e=>{var a,t,r;const s=(null===(a=e.title)||void 0===a?void 0:a.toLowerCase().includes(h.toLowerCase()))||(null===(t=e.content)||void 0===t?void 0:t.toLowerCase().includes(h.toLowerCase())),l="all"===g||(null===(r=e.category)||void 0===r?void 0:r.id)===g||e.category_id===g;return s&&l}));return(0,d.jsxs)("div",{className:"p-6",children:[(0,d.jsxs)("div",{className:"mb-6",children:[(0,d.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"Forum Management"}),(0,d.jsxs)("div",{className:"flex flex-wrap gap-4 mb-4",children:[(0,d.jsx)("button",{onClick:()=>{a("admin-forum-create")},className:"px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700",children:"+ Create Thread"}),(0,d.jsx)("input",{type:"text",placeholder:"Search threads...",value:h,onChange:e=>y(e.target.value),className:"px-4 py-2 border rounded flex-1 max-w-xs"}),(0,d.jsxs)("select",{value:g,onChange:e=>u(e.target.value),className:"px-4 py-2 border rounded",children:[(0,d.jsx)("option",{value:"all",children:"All Categories"}),o.map((e=>(0,d.jsx)("option",{value:e.id,children:e.name},e.id)))]})]})]}),x?(0,d.jsx)("div",{className:"text-center py-8",children:"Loading..."}):(0,d.jsx)("div",{className:"grid gap-4",children:0===v.length?(0,d.jsx)("div",{className:"text-center py-8 text-gray-500",children:"No threads found"}):v.map((e=>{var r,s,l,i;return(0,d.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-4",children:[(0,d.jsx)("div",{className:"flex justify-between items-start mb-2",children:(0,d.jsxs)("div",{className:"flex-1",children:[(0,d.jsxs)("h3",{className:"text-lg font-semibold",children:[e.title,e.pinned&&(0,d.jsx)("span",{className:"ml-2 text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded",children:"Pinned"}),e.locked&&(0,d.jsx)("span",{className:"ml-2 text-xs bg-red-100 text-red-800 px-2 py-1 rounded",children:"Locked"})]}),(0,d.jsxs)("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:[null===(r=e.content)||void 0===r?void 0:r.substring(0,150),"..."]}),(0,d.jsxs)("div",{className:"flex flex-wrap gap-4 text-sm text-gray-500 mt-2",children:[(0,d.jsxs)("span",{children:["Category: ",(null===(s=e.category)||void 0===s?void 0:s.name)||"Uncategorized"]}),(0,d.jsxs)("span",{children:["Replies: ",e.replies||0]}),(0,d.jsxs)("span",{children:["Views: ",e.views||0]}),(0,d.jsxs)("span",{children:["Author: ",(null===(l=e.user)||void 0===l?void 0:l.name)||(null===(i=e.author)||void 0===i?void 0:i.name)||"Unknown"]}),(0,d.jsxs)("span",{children:["Created: ",e.created_at?new Date(e.created_at).toLocaleDateString():"Unknown"]})]})]})}),(0,d.jsxs)("div",{className:"flex gap-2 mt-3",children:[(0,d.jsx)("button",{onClick:()=>(e=>{a("admin-forum-edit",{id:e.id})})(e),className:"px-3 py-1 bg-blue-600 text-white text-sm rounded hover:bg-blue-700",children:"Edit"}),(0,d.jsx)("button",{onClick:()=>(async e=>{try{await t.put("/admin/forums/".concat(e.id),{pinned:!e.pinned}),await b()}catch(a){alert("Failed to update pinned status")}})(e),className:"px-3 py-1 text-white text-sm rounded ".concat(e.pinned?"bg-gray-600 hover:bg-gray-700":"bg-blue-600 hover:bg-blue-700"),children:e.pinned?"Unpin":"Pin"}),(0,d.jsx)("button",{onClick:()=>(async e=>{try{await t.put("/admin/forums/".concat(e.id),{locked:!e.locked}),await b()}catch(a){alert("Failed to update locked status")}})(e),className:"px-3 py-1 text-white text-sm rounded ".concat(e.locked?"bg-gray-600 hover:bg-gray-700":"bg-orange-600 hover:bg-orange-700"),children:e.locked?"Unlock":"Lock"}),(0,d.jsx)("button",{onClick:()=>a("thread-detail",{id:e.id}),className:"px-3 py-1 bg-green-600 text-white text-sm rounded hover:bg-green-700",children:"View"}),(0,d.jsx)("button",{onClick:()=>(async e=>{if(window.confirm("Are you sure you want to delete this thread?"))try{await t.delete("/admin/forums/".concat(e)),await b(),alert("Thread deleted successfully")}catch(a){alert("Failed to delete thread")}})(e.id),className:"px-3 py-1 bg-red-600 text-white text-sm rounded hover:bg-red-700",children:"Delete"})]})]},e.id)}))})]})};const w=function(){var e;const{api:a}=(0,s.As)(),[t,i]=(0,r.useState)(""),[n,o]=(0,r.useState)(""),[c,x]=(0,r.useState)(""),[m,g]=(0,r.useState)(!1),[u,h]=(0,r.useState)([]),[y,b]=(0,r.useState)([]),[p,v]=(0,r.useState)(!1),[j,k]=(0,r.useState)({}),f={news:{name:"News System",types:["articles","categories","comments","tags"]},forums:{name:"Forums System",types:["threads","posts","categories","reports"]},players:{name:"Players System",types:["players","stats","achievements","transfers"]},teams:{name:"Teams System",types:["teams","rosters","staff","achievements"]},events:{name:"Events System",types:["events","tournaments","brackets","registrations"]},matches:{name:"Matches System",types:["matches","rounds","maps","stats"]},users:{name:"Users System",types:["users","roles","permissions","activity"]}},w={create:{name:"Create",color:"green",requiresData:!0},read:{name:"Export/Read",color:"blue",requiresData:!1},update:{name:"Update",color:"yellow",requiresData:!0},delete:{name:"Delete",color:"red",requiresData:!1},archive:{name:"Archive",color:"gray",requiresData:!1},restore:{name:"Restore",color:"purple",requiresData:!1},activate:{name:"Activate",color:"green",requiresData:!1},deactivate:{name:"Deactivate",color:"orange",requiresData:!1}};(0,r.useEffect)((()=>{t&&n&&N()}),[t,n]);const N=async()=>{try{g(!0);const e=await a.get("/admin/".concat(t,"/").concat(n));b(e.data||[]),h([]),v(!1)}catch(e){console.error("Error fetching items:",e),b([])}finally{g(!1)}};return(0,d.jsxs)("div",{className:"p-6 space-y-6",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Bulk Operations"}),(0,d.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"Perform bulk CRUD operations on platform data"}),(0,d.jsx)("div",{className:"mt-2 text-sm text-red-600 dark:text-red-400",children:"Admin Only - Use with extreme caution"})]}),(0,d.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,d.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[(0,d.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"System Selection"}),(0,d.jsxs)("div",{className:"space-y-4",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium mb-2 text-gray-700 dark:text-gray-300",children:"System"}),(0,d.jsxs)("select",{value:t,onChange:e=>{i(e.target.value),o(""),b([]),h([])},className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-white",children:[(0,d.jsx)("option",{value:"",children:"Select System"}),Object.entries(f).map((e=>{let[a,t]=e;return(0,d.jsx)("option",{value:a,children:t.name},a)}))]})]}),t&&(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium mb-2 text-gray-700 dark:text-gray-300",children:"Data Type"}),(0,d.jsxs)("select",{value:n,onChange:e=>o(e.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-white",children:[(0,d.jsx)("option",{value:"",children:"Select Type"}),f[t].types.map((e=>(0,d.jsx)("option",{value:e,children:e.charAt(0).toUpperCase()+e.slice(1)},e)))]})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium mb-2 text-gray-700 dark:text-gray-300",children:"Operation"}),(0,d.jsxs)("select",{value:c,onChange:e=>{x(e.target.value),k({})},className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-white",children:[(0,d.jsx)("option",{value:"",children:"Select Operation"}),Object.entries(w).map((e=>{let[a,t]=e;return(0,d.jsx)("option",{value:a,children:t.name},a)}))]})]})]}),(()=>{var e;return null!==(e=w[c])&&void 0!==e&&e.requiresData?(0,d.jsxs)("div",{className:"mt-4 p-4 bg-gray-50 dark:bg-gray-900 rounded-lg",children:[(0,d.jsx)("h4",{className:"font-medium text-gray-900 dark:text-white mb-3",children:"Bulk Data"}),(0,d.jsxs)("div",{className:"space-y-3",children:["create"===c&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Number of items to create"}),(0,d.jsx)("input",{type:"number",value:j.count||1,onChange:e=>k((0,l.A)((0,l.A)({},j),{},{count:e.target.value})),min:"1",max:"100",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white"})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Name prefix"}),(0,d.jsx)("input",{type:"text",value:j.prefix||"",onChange:e=>k((0,l.A)((0,l.A)({},j),{},{prefix:e.target.value})),placeholder:"New ".concat(n," "),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white"})]})]}),"update"===c&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Field to update"}),(0,d.jsxs)("select",{value:j.field||"",onChange:e=>k((0,l.A)((0,l.A)({},j),{},{field:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white",children:[(0,d.jsx)("option",{value:"",children:"Select field"}),(0,d.jsx)("option",{value:"status",children:"Status"}),(0,d.jsx)("option",{value:"featured",children:"Featured"}),(0,d.jsx)("option",{value:"published",children:"Published"}),(0,d.jsx)("option",{value:"category",children:"Category"}),(0,d.jsx)("option",{value:"tags",children:"Tags"})]})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"New value"}),(0,d.jsx)("input",{type:"text",value:j.value||"",onChange:e=>k((0,l.A)((0,l.A)({},j),{},{value:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white"})]})]})]})]}):null})(),(0,d.jsx)("div",{className:"mt-6",children:(0,d.jsx)("button",{onClick:async()=>{if(!t||!n||!c)return void alert("Please select system, type, and operation");if("create"!==c&&0===u.length)return void alert("Please select items to perform the operation");const e=w[c].name,r="create"===c?"Are you sure you want to create new ".concat(n," in ").concat(f[t].name,"?"):"Are you sure you want to ".concat(e," ").concat(u.length," ").concat(n," in ").concat(f[t].name,"? This action cannot be undone.");if(window.confirm(r))try{g(!0);const r={operation:c,items:u,data:j};await a.post("/admin/bulk/".concat(t,"/").concat(n),r),alert("Bulk ".concat(e," completed successfully!")),N(),h([]),v(!1),k({})}catch(s){console.error("Error performing bulk operation:",s),alert("Error performing bulk ".concat(e,"."))}finally{g(!1)}},disabled:m||!c||!t||!n,className:"w-full px-4 py-2 rounded-lg font-medium transition-colors ".concat(c&&w[c]?"delete"===c?"bg-red-600 hover:bg-red-700 text-white":"create"===c?"bg-green-600 hover:bg-green-700 text-white":"update"===c?"bg-yellow-600 hover:bg-yellow-700 text-white":"bg-blue-600 hover:bg-blue-700 text-white":"bg-gray-400 text-gray-200 cursor-not-allowed"),children:m?"Processing...":c?"Perform ".concat((null===(e=w[c])||void 0===e?void 0:e.name)||c):"Select Operation"})})]}),(0,d.jsxs)("div",{className:"lg:col-span-2 bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[(0,d.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,d.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:n?"".concat(n.charAt(0).toUpperCase()+n.slice(1)," Items"):"Select System & Type"}),y.length>0&&(0,d.jsxs)("label",{className:"flex items-center space-x-2",children:[(0,d.jsx)("input",{type:"checkbox",checked:p,onChange:()=>{h(p?[]:y.map((e=>e.id))),v(!p)},className:"rounded border-gray-300 text-red-600 focus:ring-red-500"}),(0,d.jsx)("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Select All"})]})]}),t&&n?(0,d.jsx)("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:m?(0,d.jsx)("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:"Loading items..."}):y.length>0?y.map((e=>(0,d.jsx)("div",{className:"flex items-center justify-between p-3 rounded-lg border ".concat(u.includes(e.id)?"border-red-500 bg-red-50 dark:bg-red-900/20":"border-gray-200 dark:border-gray-700"),children:(0,d.jsxs)("label",{className:"flex items-center space-x-3 flex-1 cursor-pointer",children:[(0,d.jsx)("input",{type:"checkbox",checked:u.includes(e.id),onChange:()=>{return a=e.id,void(u.includes(a)?h(u.filter((e=>e!==a))):h([...u,a]));var a},className:"rounded border-gray-300 text-red-600 focus:ring-red-500"}),(0,d.jsxs)("div",{children:[(0,d.jsx)("p",{className:"font-medium text-gray-900 dark:text-white",children:e.name||e.title||"".concat(n," #").concat(e.id)}),e.status&&(0,d.jsx)("span",{className:"text-xs px-2 py-1 rounded-full ".concat("active"===e.status?"bg-green-100 text-green-800":"inactive"===e.status?"bg-gray-100 text-gray-800":"bg-yellow-100 text-yellow-800"),children:e.status})]})]})},e.id))):(0,d.jsx)("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:"No items found"})}):(0,d.jsx)("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:"Select a system and type to view items"}),u.length>0&&(0,d.jsx)("div",{className:"mt-4 p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:(0,d.jsxs)("p",{className:"text-sm text-blue-800 dark:text-blue-300",children:[u.length," item",1!==u.length?"s":""," selected"]})})]})]}),(0,d.jsxs)("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg p-6",children:[(0,d.jsx)("h3",{className:"text-lg font-semibold text-yellow-800 dark:text-yellow-200 mb-2",children:"\u26a0\ufe0f Warning"}),(0,d.jsx)("p",{className:"text-yellow-700 dark:text-yellow-300",children:"Bulk operations affect large amounts of data and cannot be undone. Always create a backup before performing bulk operations. Delete operations are permanent and will remove all associated data."})]})]})};const N=function(){var e;const{user:a,api:t}=(0,s.As)(),[i,n]=(0,r.useState)(null),[o,c]=(0,r.useState)(!0),[x,g]=(0,r.useState)(!1),[u,h]=(0,r.useState)({name:"",email:"",hero_flair:"",show_hero_flair:!1,team_flair_id:null,show_team_flair:!1,current_password:"",new_password:"",new_password_confirmation:""});(0,r.useEffect)((()=>{y()}),[]);const y=async()=>{try{var e;c(!0);const a=await t.get("/user/profile");n(a.data),h({name:a.data.name||"",email:a.data.email||"",hero_flair:a.data.hero_flair||"",show_hero_flair:a.data.show_hero_flair||!1,team_flair_id:(null===(e=a.data.team_flair)||void 0===e?void 0:e.id)||null,show_team_flair:a.data.show_team_flair||!1,current_password:"",new_password:"",new_password_confirmation:""})}catch(a){console.error("Error fetching profile:",a)}finally{c(!1)}};return o?(0,d.jsx)("div",{className:"p-6",children:(0,d.jsx)("div",{className:"animate-pulse",children:"Loading profile..."})}):(0,d.jsxs)("div",{className:"p-6 space-y-6",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Admin Profile"}),(0,d.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"Manage your administrator account settings"})]}),(0,d.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700",children:(0,d.jsxs)("div",{className:"p-6",children:[(0,d.jsxs)("div",{className:"flex items-start justify-between mb-6",children:[(0,d.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,d.jsx)("div",{className:"w-20 h-20 rounded-full overflow-hidden bg-gray-200 dark:bg-gray-700",children:(0,d.jsx)("img",{src:null!==a&&void 0!==a&&a.hero_flair?"/images/heroes/".concat(a.hero_flair.toLowerCase(),"-headbig.webp"):(0,m.VG)(null,"player-avatar"),alt:null===a||void 0===a?void 0:a.name,className:"w-full h-full object-cover",onError:e=>{e.target.src=(0,m.VG)(null,"player-avatar")}})}),(0,d.jsxs)("div",{children:[(0,d.jsx)("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:null===a||void 0===a?void 0:a.name}),(0,d.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:null===a||void 0===a?void 0:a.email}),(0,d.jsxs)("div",{className:"flex items-center gap-2 mt-1",children:[(0,d.jsx)("span",{className:"px-2 py-1 text-xs font-medium rounded-full ".concat("admin"===(null===a||void 0===a?void 0:a.role)?"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400":"moderator"===(null===a||void 0===a?void 0:a.role)?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-400":"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400"),children:null===a||void 0===a||null===(e=a.role)||void 0===e?void 0:e.toUpperCase()}),(null===a||void 0===a?void 0:a.hero_flair)&&(null===a||void 0===a?void 0:a.show_hero_flair)&&(0,d.jsx)("span",{className:"px-2 py-1 text-xs font-medium bg-purple-100 text-purple-800 dark:bg-purple-900/20 dark:text-purple-400 rounded-full",children:a.hero_flair})]})]})]}),(0,d.jsx)("button",{onClick:()=>g(!x),className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:x?"Cancel":"Edit Profile"})]}),x?(0,d.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{const e={name:u.name,email:u.email,hero_flair:u.hero_flair,show_hero_flair:u.show_hero_flair,team_flair_id:u.team_flair_id,show_team_flair:u.show_team_flair};u.new_password&&(e.current_password=u.current_password,e.new_password=u.new_password,e.new_password_confirmation=u.new_password_confirmation),await t.put("/user/profile",e),await y(),g(!1),alert("Profile updated successfully!")}catch(a){console.error("Error updating profile:",a),alert("Failed to update profile. Please check your input.")}},className:"space-y-4",children:[(0,d.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Name"}),(0,d.jsx)("input",{type:"text",value:u.name,onChange:e=>h((0,l.A)((0,l.A)({},u),{},{name:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",required:!0})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Email"}),(0,d.jsx)("input",{type:"email",value:u.email,onChange:e=>h((0,l.A)((0,l.A)({},u),{},{email:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",required:!0})]})]}),(0,d.jsxs)("div",{className:"border-t dark:border-gray-700 pt-4",children:[(0,d.jsx)("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-3",children:"Change Password"}),(0,d.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Current Password"}),(0,d.jsx)("input",{type:"password",value:u.current_password,onChange:e=>h((0,l.A)((0,l.A)({},u),{},{current_password:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"New Password"}),(0,d.jsx)("input",{type:"password",value:u.new_password,onChange:e=>h((0,l.A)((0,l.A)({},u),{},{new_password:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Confirm New Password"}),(0,d.jsx)("input",{type:"password",value:u.new_password_confirmation,onChange:e=>h((0,l.A)((0,l.A)({},u),{},{new_password_confirmation:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]})]})]}),(0,d.jsxs)("div",{className:"flex justify-end gap-3",children:[(0,d.jsx)("button",{type:"button",onClick:()=>g(!1),className:"px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700",children:"Cancel"}),(0,d.jsx)("button",{type:"submit",className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700",children:"Save Changes"})]})]}):(0,d.jsxs)("div",{className:"space-y-4",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-3",children:"Account Information"}),(0,d.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"User ID"}),(0,d.jsx)("p",{className:"font-medium text-gray-900 dark:text-white",children:null===a||void 0===a?void 0:a.id})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Role"}),(0,d.jsx)("p",{className:"font-medium text-gray-900 dark:text-white capitalize",children:null===a||void 0===a?void 0:a.role})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Member Since"}),(0,d.jsx)("p",{className:"font-medium text-gray-900 dark:text-white",children:null!==a&&void 0!==a&&a.created_at?new Date(a.created_at).toLocaleDateString():"N/A"})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Last Login"}),(0,d.jsx)("p",{className:"font-medium text-gray-900 dark:text-white",children:null!==a&&void 0!==a&&a.last_login_at?new Date(a.last_login_at).toLocaleDateString():"N/A"})]})]})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-3",children:"Permissions"}),(0,d.jsxs)("div",{className:"flex flex-wrap gap-2",children:["admin"===(null===a||void 0===a?void 0:a.role)&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("span",{className:"px-3 py-1 text-sm bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400 rounded-full",children:"Full System Access"}),(0,d.jsx)("span",{className:"px-3 py-1 text-sm bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400 rounded-full",children:"User Management"}),(0,d.jsx)("span",{className:"px-3 py-1 text-sm bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400 rounded-full",children:"Bulk Operations"}),(0,d.jsx)("span",{className:"px-3 py-1 text-sm bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400 rounded-full",children:"System Statistics"})]}),("admin"===(null===a||void 0===a?void 0:a.role)||"moderator"===(null===a||void 0===a?void 0:a.role))&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("span",{className:"px-3 py-1 text-sm bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-400 rounded-full",children:"Content Moderation"}),(0,d.jsx)("span",{className:"px-3 py-1 text-sm bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-400 rounded-full",children:"Forum Management"}),(0,d.jsx)("span",{className:"px-3 py-1 text-sm bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-400 rounded-full",children:"News Management"})]})]})]})]})]})}),(0,d.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[(0,d.jsx)("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:"Recent Activity"}),(0,d.jsxs)("div",{className:"space-y-3",children:[(0,d.jsx)("div",{className:"flex items-center justify-between py-2 border-b dark:border-gray-700",children:(0,d.jsxs)("div",{children:[(0,d.jsx)("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"Logged in"}),(0,d.jsxs)("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:["Today at ",(new Date).toLocaleTimeString()]})]})}),(0,d.jsx)("div",{className:"text-center py-4 text-gray-500 dark:text-gray-400",children:(0,d.jsx)("p",{className:"text-sm",children:"Full activity log coming soon..."})})]})]})]})};var C=t(438);function A(e){let{navigateTo:a}=e;const[t,l]=(0,r.useState)("overview"),{user:i,logout:n,api:o}=(0,s.As)(),c={primary:"admin"===(null===i||void 0===i?void 0:i.role)?"bg-red-600":"moderator"===(null===i||void 0===i?void 0:i.role)?"bg-yellow-600":"bg-green-600",primaryHover:"admin"===(null===i||void 0===i?void 0:i.role)?"hover:bg-red-700":"moderator"===(null===i||void 0===i?void 0:i.role)?"hover:bg-yellow-700":"hover:bg-green-700",shadow:"admin"===(null===i||void 0===i?void 0:i.role)?"shadow-red-500/30":"moderator"===(null===i||void 0===i?void 0:i.role)?"shadow-yellow-500/30":"shadow-green-500/30"},m="admin"===(null===i||void 0===i?void 0:i.role)?[{id:"overview",name:"Overview"},{id:"teams",name:"Teams"},{id:"players",name:"Players"},{id:"matches",name:"Matches"},{id:"events",name:"Events"},{id:"users",name:"Users"},{id:"news",name:"News"},{id:"forums",name:"Forums"},{id:"bulk-operations",name:"Bulk Ops"},{id:"profile",name:"Profile"}]:"moderator"===(null===i||void 0===i?void 0:i.role)?[{id:"overview",name:"Overview"},{id:"teams",name:"Teams"},{id:"players",name:"Players"},{id:"matches",name:"Matches"},{id:"events",name:"Events"},{id:"news",name:"News"},{id:"forums",name:"Forums"}]:[],g=()=>(0,d.jsx)("div",{className:"p-8 text-center",children:(0,d.jsxs)("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-6",children:[(0,d.jsx)("div",{className:"flex items-center justify-center w-12 h-12 mx-auto bg-red-100 dark:bg-red-900/40 rounded-full mb-4",children:(0,d.jsx)("svg",{className:"w-6 h-6 text-red-600 dark:text-red-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),(0,d.jsx)("h3",{className:"text-lg font-semibold text-red-900 dark:text-red-200 mb-2",children:"Access Denied"}),(0,d.jsxs)("p",{className:"text-red-700 dark:text-red-300",children:["You don't have permission to access this section.",(0,d.jsxs)("span",{className:"block mt-2",children:["This section requires ","moderator"===(null===i||void 0===i?void 0:i.role)?"Admin":"higher"," privileges."]})]})]})});return(0,d.jsxs)("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[(0,d.jsx)("header",{className:"bg-white dark:bg-gray-800 shadow-sm border-b border-gray-200 dark:border-gray-700",children:(0,d.jsx)("div",{className:"px-6 py-4",children:(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,d.jsxs)("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:["admin"===(null===i||void 0===i?void 0:i.role)?"Admin":"moderator"===(null===i||void 0===i?void 0:i.role)?"Moderator":"User"," Dashboard"]}),(0,d.jsx)("span",{className:"px-3 py-1 text-sm font-medium rounded-full ".concat("admin"===(null===i||void 0===i?void 0:i.role)?"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400":"moderator"===(null===i||void 0===i?void 0:i.role)?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-400":"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400"),children:"admin"===(null===i||void 0===i?void 0:i.role)?"Administrator":"moderator"===(null===i||void 0===i?void 0:i.role)?"Moderator":"User"})]}),(0,d.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,d.jsxs)("span",{className:"text-gray-600 dark:text-gray-400",children:["Welcome, ",null===i||void 0===i?void 0:i.name]}),(0,d.jsx)("button",{onClick:()=>a("home"),className:"btn btn-secondary",children:"Back to Site"}),(0,d.jsx)("button",{onClick:n,className:"btn btn-ghost",children:"Logout"})]})]})})}),(0,d.jsxs)("div",{className:"flex",children:[(0,d.jsx)("nav",{className:"w-64 bg-white dark:bg-gray-800 shadow-sm h-[calc(100vh-73px)] overflow-y-auto border-r border-gray-200 dark:border-gray-700",children:(0,d.jsx)("div",{className:"p-4",children:0===m.length?(0,d.jsx)("div",{className:"text-red-500 font-bold p-4 bg-red-50 dark:bg-red-900/20 rounded-lg border border-red-200 dark:border-red-800",children:"NO SECTIONS ACCESSIBLE - CHECK USER ROLE!"}):(0,d.jsx)("div",{className:"space-y-1",children:m.map((e=>(0,d.jsxs)("button",{onClick:()=>l(e.id),className:"w-full text-left px-4 py-3 rounded-lg font-medium transition-all duration-200 flex items-center justify-between border ".concat(t===e.id?"".concat(c.primary," text-white shadow-lg border-transparent"):"text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 border-transparent hover:border-gray-200 dark:hover:border-gray-600"),children:[(0,d.jsx)("span",{children:e.name}),"admin"===(null===i||void 0===i?void 0:i.role)&&["users","bulk-operations","stats"].includes(e.id)&&(0,d.jsx)("span",{className:"text-xs px-2 py-0.5 rounded-full ".concat(t===e.id?"bg-white/20 text-white":"bg-red-100 text-red-800 dark:bg-red-900/40 dark:text-red-300"),children:"Admin"})]},e.id)))})})}),(0,d.jsx)("main",{className:"flex-1 p-6",children:(()=>{const e=m.some((e=>e.id===t));m.find((e=>e.id===t));if(!e)return(0,d.jsx)("div",{className:"p-8 text-center",children:(0,d.jsxs)("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-6",children:[(0,d.jsx)("div",{className:"flex items-center justify-center w-12 h-12 mx-auto bg-red-100 dark:bg-red-900/40 rounded-full mb-4",children:(0,d.jsx)("svg",{className:"w-6 h-6 text-red-600 dark:text-red-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),(0,d.jsx)("h3",{className:"text-lg font-semibold text-red-900 dark:text-red-200 mb-2",children:"Access Denied"}),(0,d.jsxs)("p",{className:"text-red-700 dark:text-red-300",children:["You don't have permission to access this section.",(0,d.jsxs)("span",{className:"block mt-2",children:["This section requires ","moderator"===(null===i||void 0===i?void 0:i.role)?"Admin":"higher"," privileges."]})]}),(0,d.jsx)("span",{className:"mt-3 px-3 py-1 text-sm font-medium rounded-full ".concat("admin"===(null===i||void 0===i?void 0:i.role)?"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400":"moderator"===(null===i||void 0===i?void 0:i.role)?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-400":"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400"),children:"admin"===(null===i||void 0===i?void 0:i.role)?"Administrator":"moderator"===(null===i||void 0===i?void 0:i.role)?"Moderator":"User"})]})});switch(t){case"overview":default:return(0,d.jsx)(x,{});case"teams":return(0,C.TD)(i,C.gg.MODERATOR)?(0,d.jsx)(u,{navigateTo:a}):(0,d.jsx)(g,{});case"players":return(0,C.TD)(i,C.gg.MODERATOR)?(0,d.jsx)(h,{navigateTo:a}):(0,d.jsx)(g,{});case"matches":return(0,C.TD)(i,C.gg.MODERATOR)?(0,d.jsx)(b,{navigateTo:a}):(0,d.jsx)(g,{});case"events":return(0,C.TD)(i,C.gg.MODERATOR)?(0,d.jsx)(p.default,{navigateTo:a}):(0,d.jsx)(g,{});case"users":return(0,C.hf)(i,C.gg.ADMIN)?(0,d.jsx)(j,{}):(0,d.jsx)(g,{});case"news":return(0,C.TD)(i,C.gg.MODERATOR)?(0,d.jsx)(k,{navigateTo:a}):(0,d.jsx)(g,{});case"forums":return(0,C.TD)(i,C.gg.MODERATOR)?(0,d.jsx)(f,{navigateTo:a}):(0,d.jsx)(g,{});case"bulk-operations":return(0,C.hf)(i,C.gg.ADMIN)?(0,d.jsx)(w,{}):(0,d.jsx)(g,{});case"profile":return(0,d.jsx)(N,{})}})()})]})]})}const S=function(e){let{navigateTo:a}=e;const{user:t}=(0,s.As)();return t?(0,d.jsx)(A,{navigateTo:a}):(0,d.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,d.jsxs)("div",{className:"text-center",children:[(0,d.jsx)("h2",{className:"text-2xl font-bold text-red-600",children:"Error: No User Data"}),(0,d.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"Admin dashboard requires authentication"})]})})}}}]);